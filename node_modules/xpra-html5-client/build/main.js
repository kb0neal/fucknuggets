!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.XpraHtml5Client=e():t.XpraHtml5Client=e()}(window,function(){return function(t){var e={};function r(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=t,r.c=e,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(i,n,function(e){return t[e]}.bind(null,n));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=106)}([function(t,e){t.exports={options:{usePureJavaScript:!1}}},function(t,e,r){(function(e,i,n){var a=r(0),s=r(74),o=t.exports=a.util=a.util||{};function u(t){if(8!==t&&16!==t&&24!==t&&32!==t)throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}function c(t){if(this.data="",this.read=0,"string"==typeof t)this.data=t;else if(o.isArrayBuffer(t)||o.isArrayBufferView(t))if(void 0!==n&&t instanceof n)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch(t){for(var r=0;r<e.length;++r)this.putByte(e[r])}}else(t instanceof c||"object"==typeof t&&"string"==typeof t.data&&"number"==typeof t.read)&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}!function(){if(void 0!==e&&e.nextTick&&!e.browser)return o.nextTick=e.nextTick,void(o.setImmediate="function"==typeof i?i:o.nextTick);if("function"==typeof i)return o.setImmediate=function(){return i.apply(void 0,arguments)},void(o.nextTick=function(t){return i(t)});if(o.setImmediate=function(t){setTimeout(t,0)},"undefined"!=typeof window&&"function"==typeof window.postMessage){var t="forge.setImmediate",r=[];o.setImmediate=function(e){r.push(e),1===r.length&&window.postMessage(t,"*")},window.addEventListener("message",function(e){if(e.source===window&&e.data===t){e.stopPropagation();var i=r.slice();r.length=0,i.forEach(function(t){t()})}},!0)}if("undefined"!=typeof MutationObserver){var n=Date.now(),a=!0,s=document.createElement("div");r=[];new MutationObserver(function(){var t=r.slice();r.length=0,t.forEach(function(t){t()})}).observe(s,{attributes:!0});var u=o.setImmediate;o.setImmediate=function(t){Date.now()-n>15?(n=Date.now(),u(t)):(r.push(t),1===r.length&&s.setAttribute("a",a=!a))}}o.nextTick=o.setImmediate}(),o.isNodejs=void 0!==e&&e.versions&&e.versions.node,o.isArray=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},o.isArrayBuffer=function(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer},o.isArrayBufferView=function(t){return t&&o.isArrayBuffer(t.buffer)&&void 0!==t.byteLength},o.ByteBuffer=c,o.ByteStringBuffer=c;o.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>4096&&(this.data.substr(0,1),this._constructedStringLength=0)},o.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},o.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},o.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))},o.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var r=this.data;e>0;)1&e&&(r+=t),(e>>>=1)>0&&(t+=t);return this.data=r,this._optimizeConstructedString(e),this},o.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this},o.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(o.encodeUtf8(t))},o.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(255&t))},o.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t))},o.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t))},o.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(255&t)+String.fromCharCode(t>>8&255))},o.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(255&t)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))},o.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(255&t)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))},o.ByteStringBuffer.prototype.putInt=function(t,e){u(e);var r="";do{e-=8,r+=String.fromCharCode(t>>e&255)}while(e>0);return this.putBytes(r)},o.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)},o.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())},o.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},o.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t},o.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t},o.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t},o.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t},o.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t},o.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t},o.ByteStringBuffer.prototype.getInt=function(t){u(t);var e=0;do{e=(e<<8)+this.data.charCodeAt(this.read++),t-=8}while(t>0);return e},o.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e},o.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):0===t?e="":(e=0===this.read?this.data:this.data.slice(this.read),this.clear()),e},o.ByteStringBuffer.prototype.bytes=function(t){return void 0===t?this.data.slice(this.read):this.data.slice(this.read,this.read+t)},o.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)},o.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this},o.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},o.ByteStringBuffer.prototype.copy=function(){var t=o.createBuffer(this.data);return t.read=this.read,t},o.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this},o.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this},o.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this},o.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var r=this.data.charCodeAt(e);r<16&&(t+="0"),t+=r.toString(16)}return t},o.ByteStringBuffer.prototype.toString=function(){return o.decodeUtf8(this.bytes())},o.DataBuffer=function(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var r=o.isArrayBuffer(t),i=o.isArrayBufferView(t);if(r||i)return this.data=r?new DataView(t):new DataView(t.buffer,t.byteOffset,t.byteLength),void(this.write="writeOffset"in e?e.writeOffset:this.data.byteLength);this.data=new DataView(new ArrayBuffer(0)),this.write=0,null!==t&&void 0!==t&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)},o.DataBuffer.prototype.length=function(){return this.write-this.read},o.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},o.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),i=new Uint8Array(this.length()+e);return i.set(r),this.data=new DataView(i.buffer),this},o.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this},o.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var r=0;r<e;++r)this.data.setUint8(t);return this},o.DataBuffer.prototype.putBytes=function(t,e){if(o.isArrayBufferView(t)){var r=(i=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)).byteLength-i.byteOffset;return this.accommodate(r),new Uint8Array(this.data.buffer,this.write).set(i),this.write+=r,this}if(o.isArrayBuffer(t)){var i=new Uint8Array(t);return this.accommodate(i.byteLength),new Uint8Array(this.data.buffer).set(i,this.write),this.write+=i.byteLength,this}if(t instanceof o.DataBuffer||"object"==typeof t&&"number"==typeof t.read&&"number"==typeof t.write&&o.isArrayBufferView(t.data)){i=new Uint8Array(t.data.byteLength,t.read,t.length());return this.accommodate(i.byteLength),new Uint8Array(t.data.byteLength,this.write).set(i),this.write+=i.byteLength,this}if(t instanceof o.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary","string"==typeof t){var n;if("hex"===e)return this.accommodate(Math.ceil(t.length/2)),n=new Uint8Array(this.data.buffer,this.write),this.write+=o.binary.hex.decode(t,n,this.write),this;if("base64"===e)return this.accommodate(3*Math.ceil(t.length/4)),n=new Uint8Array(this.data.buffer,this.write),this.write+=o.binary.base64.decode(t,n,this.write),this;if("utf8"===e&&(t=o.encodeUtf8(t),e="binary"),"binary"===e||"raw"===e)return this.accommodate(t.length),n=new Uint8Array(this.data.buffer,this.write),this.write+=o.binary.raw.decode(n),this;if("utf16"===e)return this.accommodate(2*t.length),n=new Uint16Array(this.data.buffer,this.write),this.write+=o.text.utf16.encode(n),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)},o.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this},o.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")},o.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this},o.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this},o.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this},o.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this},o.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this},o.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this},o.DataBuffer.prototype.putInt=function(t,e){u(e),this.accommodate(e/8);do{e-=8,this.data.setInt8(this.write++,t>>e&255)}while(e>0);return this},o.DataBuffer.prototype.putSignedInt=function(t,e){return u(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)},o.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},o.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t},o.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t},o.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t},o.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t},o.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t},o.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t},o.DataBuffer.prototype.getInt=function(t){u(t);var e=0;do{e=(e<<8)+this.data.getInt8(this.read++),t-=8}while(t>0);return e},o.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e},o.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):0===t?e="":(e=0===this.read?this.data:this.data.slice(this.read),this.clear()),e},o.DataBuffer.prototype.bytes=function(t){return void 0===t?this.data.slice(this.read):this.data.slice(this.read,this.read+t)},o.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)},o.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this},o.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},o.DataBuffer.prototype.copy=function(){return new o.DataBuffer(this)},o.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this},o.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},o.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this},o.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var r=this.data.getUint8(e);r<16&&(t+="0"),t+=r.toString(16)}return t},o.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if("binary"===(t=t||"utf8")||"raw"===t)return o.binary.raw.encode(e);if("hex"===t)return o.binary.hex.encode(e);if("base64"===t)return o.binary.base64.encode(e);if("utf8"===t)return o.text.utf8.decode(e);if("utf16"===t)return o.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)},o.createBuffer=function(t,e){return e=e||"raw",void 0!==t&&"utf8"===e&&(t=o.encodeUtf8(t)),new o.ByteBuffer(t)},o.fillString=function(t,e){for(var r="";e>0;)1&e&&(r+=t),(e>>>=1)>0&&(t+=t);return r},o.xorBytes=function(t,e,r){for(var i="",n="",a="",s=0,o=0;r>0;--r,++s)n=t.charCodeAt(s)^e.charCodeAt(s),o>=10&&(i+=a,a="",o=0),a+=String.fromCharCode(n),++o;return i+=a},o.hexToBytes=function(t){var e="",r=0;for(!0&t.length&&(r=1,e+=String.fromCharCode(parseInt(t[0],16)));r<t.length;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e},o.bytesToHex=function(t){return o.createBuffer(t).toHex()},o.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(255&t)};var l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],f="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";o.encode64=function(t,e){for(var r,i,n,a="",s="",o=0;o<t.length;)r=t.charCodeAt(o++),i=t.charCodeAt(o++),n=t.charCodeAt(o++),a+=l.charAt(r>>2),a+=l.charAt((3&r)<<4|i>>4),isNaN(i)?a+="==":(a+=l.charAt((15&i)<<2|n>>6),a+=isNaN(n)?"=":l.charAt(63&n)),e&&a.length>e&&(s+=a.substr(0,e)+"\r\n",a=a.substr(e));return s+=a},o.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e,r,i,n,a="",s=0;s<t.length;)e=h[t.charCodeAt(s++)-43],r=h[t.charCodeAt(s++)-43],i=h[t.charCodeAt(s++)-43],n=h[t.charCodeAt(s++)-43],a+=String.fromCharCode(e<<2|r>>4),64!==i&&(a+=String.fromCharCode((15&r)<<4|i>>2),64!==n&&(a+=String.fromCharCode((3&i)<<6|n)));return a},o.encodeUtf8=function(t){return unescape(encodeURIComponent(t))},o.decodeUtf8=function(t){return decodeURIComponent(escape(t))},o.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:s.encode,decode:s.decode}},o.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)},o.binary.raw.decode=function(t,e,r){var i=e;i||(i=new Uint8Array(t.length));for(var n=r=r||0,a=0;a<t.length;++a)i[n++]=t.charCodeAt(a);return e?n-r:i},o.binary.hex.encode=o.bytesToHex,o.binary.hex.decode=function(t,e,r){var i=e;i||(i=new Uint8Array(Math.ceil(t.length/2)));var n=0,a=r=r||0;for(1&t.length&&(n=1,i[a++]=parseInt(t[0],16));n<t.length;n+=2)i[a++]=parseInt(t.substr(n,2),16);return e?a-r:i},o.binary.base64.encode=function(t,e){for(var r,i,n,a="",s="",o=0;o<t.byteLength;)r=t[o++],i=t[o++],n=t[o++],a+=l.charAt(r>>2),a+=l.charAt((3&r)<<4|i>>4),isNaN(i)?a+="==":(a+=l.charAt((15&i)<<2|n>>6),a+=isNaN(n)?"=":l.charAt(63&n)),e&&a.length>e&&(s+=a.substr(0,e)+"\r\n",a=a.substr(e));return s+=a},o.binary.base64.decode=function(t,e,r){var i,n,a,s,o=e;o||(o=new Uint8Array(3*Math.ceil(t.length/4))),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var u=0,c=r=r||0;u<t.length;)i=h[t.charCodeAt(u++)-43],n=h[t.charCodeAt(u++)-43],a=h[t.charCodeAt(u++)-43],s=h[t.charCodeAt(u++)-43],o[c++]=i<<2|n>>4,64!==a&&(o[c++]=(15&n)<<4|a>>2,64!==s&&(o[c++]=(3&a)<<6|s));return e?c-r:o.subarray(0,c)},o.binary.base58.encode=function(t,e){return o.binary.baseN.encode(t,f,e)},o.binary.base58.decode=function(t,e){return o.binary.baseN.decode(t,f,e)},o.text={utf8:{},utf16:{}},o.text.utf8.encode=function(t,e,r){t=o.encodeUtf8(t);var i=e;i||(i=new Uint8Array(t.length));for(var n=r=r||0,a=0;a<t.length;++a)i[n++]=t.charCodeAt(a);return e?n-r:i},o.text.utf8.decode=function(t){return o.decodeUtf8(String.fromCharCode.apply(null,t))},o.text.utf16.encode=function(t,e,r){var i=e;i||(i=new Uint8Array(2*t.length));for(var n=new Uint16Array(i.buffer),a=r=r||0,s=r,o=0;o<t.length;++o)n[s++]=t.charCodeAt(o),a+=2;return e?a-r:i},o.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))},o.deflate=function(t,e,r){if(e=o.decode64(t.deflate(o.encode64(e)).rval),r){var i=2;32&e.charCodeAt(1)&&(i=6),e=e.substring(i,e.length-4)}return e},o.inflate=function(t,e,r){var i=t.inflate(o.encode64(e)).rval;return null===i?null:o.decode64(i)};var p=function(t,e,r){if(!t)throw new Error("WebStorage not available.");var i;if(null===r?i=t.removeItem(e):(r=o.encode64(JSON.stringify(r)),i=t.setItem(e,r)),void 0!==i&&!0!==i.rval){var n=new Error(i.error.message);throw n.id=i.error.id,n.name=i.error.name,n}},d=function(t,e){if(!t)throw new Error("WebStorage not available.");var r=t.getItem(e);if(t.init)if(null===r.rval){if(r.error){var i=new Error(r.error.message);throw i.id=r.error.id,i.name=r.error.name,i}r=null}else r=r.rval;return null!==r&&(r=JSON.parse(o.decode64(r))),r},g=function(t,e,r,i){var n=d(t,e);null===n&&(n={}),n[r]=i,p(t,e,n)},y=function(t,e,r){var i=d(t,e);return null!==i&&(i=r in i?i[r]:null),i},m=function(t,e,r){var i=d(t,e);if(null!==i&&r in i){delete i[r];var n=!0;for(var a in i){n=!1;break}n&&(i=null),p(t,e,i)}},v=function(t,e){p(t,e,null)},_=function(t,e,r){var i,n=null;void 0===r&&(r=["web","flash"]);var a=!1,s=null;for(var o in r){i=r[o];try{if("flash"===i||"both"===i){if(null===e[0])throw new Error("Flash local storage not available.");n=t.apply(this,e),a="flash"===i}"web"!==i&&"both"!==i||(e[0]=localStorage,n=t.apply(this,e),a=!0)}catch(t){s=t}if(a)break}if(!a)throw s;return n};o.setItem=function(t,e,r,i,n){_(g,arguments,n)},o.getItem=function(t,e,r,i){return _(y,arguments,i)},o.removeItem=function(t,e,r,i){_(m,arguments,i)},o.clearItems=function(t,e,r){_(v,arguments,r)},o.parseUrl=function(t){var e=/^(https?):\/\/([^:&^\/]*):?(\d*)(.*)$/g;e.lastIndex=0;var r=e.exec(t),i=null===r?null:{full:t,scheme:r[1],host:r[2],port:r[3],path:r[4]};return i&&(i.fullHost=i.host,i.port?80!==i.port&&"http"===i.scheme?i.fullHost+=":"+i.port:443!==i.port&&"https"===i.scheme&&(i.fullHost+=":"+i.port):"http"===i.scheme?i.port=80:"https"===i.scheme&&(i.port=443),i.full=i.scheme+"://"+i.fullHost),i};var b=null;o.getQueryVariables=function(t){var e,r=function(t){for(var e={},r=t.split("&"),i=0;i<r.length;i++){var n,a,s=r[i].indexOf("=");s>0?(n=r[i].substring(0,s),a=r[i].substring(s+1)):(n=r[i],a=null),n in e||(e[n]=[]),n in Object.prototype||null===a||e[n].push(unescape(a))}return e};return void 0===t?(null===b&&(b="undefined"!=typeof window&&window.location&&window.location.search?r(window.location.search.substring(1)):{}),e=b):e=r(t),e},o.parseFragment=function(t){var e=t,r="",i=t.indexOf("?");i>0&&(e=t.substring(0,i),r=t.substring(i+1));var n=e.split("/");return n.length>0&&""===n[0]&&n.shift(),{pathString:e,queryString:r,path:n,query:""===r?{}:o.getQueryVariables(r)}},o.makeRequest=function(t){var e=o.parseFragment(t),r={path:e.pathString,query:e.queryString,getPath:function(t){return void 0===t?e.path:e.path[t]},getQuery:function(t,r){var i;return void 0===t?i=e.query:(i=e.query[t])&&void 0!==r&&(i=i[r]),i},getQueryLast:function(t,e){var i=r.getQuery(t);return i?i[i.length-1]:e}};return r},o.makeLink=function(t,e,r){t=jQuery.isArray(t)?t.join("/"):t;var i=jQuery.param(e||{});return r=r||"",t+(i.length>0?"?"+i:"")+(r.length>0?"#"+r:"")},o.setPath=function(t,e,r){if("object"==typeof t&&null!==t)for(var i=0,n=e.length;i<n;){var a=e[i++];if(i==n)t[a]=r;else{var s=a in t;(!s||s&&"object"!=typeof t[a]||s&&null===t[a])&&(t[a]={}),t=t[a]}}},o.getPath=function(t,e,r){for(var i=0,n=e.length,a=!0;a&&i<n&&"object"==typeof t&&null!==t;){var s=e[i++];(a=s in t)&&(t=t[s])}return a?t:r},o.deletePath=function(t,e){if("object"==typeof t&&null!==t)for(var r=0,i=e.length;r<i;){var n=e[r++];if(r==i)delete t[n];else{if(!(n in t)||"object"!=typeof t[n]||null===t[n])break;t=t[n]}}},o.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},o.format=function(t){for(var e,r,i=/%./g,n=0,a=[],s=0;e=i.exec(t);){(r=t.substring(s,i.lastIndex-2)).length>0&&a.push(r),s=i.lastIndex;var o=e[0][1];switch(o){case"s":case"o":n<arguments.length?a.push(arguments[1+n++]):a.push("<?>");break;case"%":a.push("%");break;default:a.push("<%"+o+"?>")}}return a.push(t.substring(s)),a.join("")},o.formatNumber=function(t,e,r,i){var n=t,a=isNaN(e=Math.abs(e))?2:e,s=void 0===r?",":r,o=void 0===i?".":i,u=n<0?"-":"",c=parseInt(n=Math.abs(+n||0).toFixed(a),10)+"",l=c.length>3?c.length%3:0;return u+(l?c.substr(0,l)+o:"")+c.substr(l).replace(/(\d{3})(?=\d)/g,"$1"+o)+(a?s+Math.abs(n-c).toFixed(a).slice(2):"")},o.formatSize=function(t){return t=t>=1073741824?o.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?o.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?o.formatNumber(t/1024,0)+" KiB":o.formatNumber(t,0)+" bytes"},o.bytesFromIP=function(t){return-1!==t.indexOf(".")?o.bytesFromIPv4(t):-1!==t.indexOf(":")?o.bytesFromIPv6(t):null},o.bytesFromIPv4=function(t){if(4!==(t=t.split(".")).length)return null;for(var e=o.createBuffer(),r=0;r<t.length;++r){var i=parseInt(t[r],10);if(isNaN(i))return null;e.putByte(i)}return e.getBytes()},o.bytesFromIPv6=function(t){for(var e=0,r=2*(8-(t=t.split(":").filter(function(t){return 0===t.length&&++e,!0})).length+e),i=o.createBuffer(),n=0;n<8;++n)if(t[n]&&0!==t[n].length){var a=o.hexToBytes(t[n]);a.length<2&&i.putByte(0),i.putBytes(a)}else i.fillWithByte(0,r),r=0;return i.getBytes()},o.bytesToIP=function(t){return 4===t.length?o.bytesToIPv4(t):16===t.length?o.bytesToIPv6(t):null},o.bytesToIPv4=function(t){if(4!==t.length)return null;for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e.join(".")},o.bytesToIPv6=function(t){if(16!==t.length)return null;for(var e=[],r=[],i=0,n=0;n<t.length;n+=2){for(var a=o.bytesToHex(t[n]+t[n+1]);"0"===a[0]&&"0"!==a;)a=a.substr(1);if("0"===a){var s=r[r.length-1],u=e.length;s&&u===s.end+1?(s.end=u,s.end-s.start>r[i].end-r[i].start&&(i=r.length-1)):r.push({start:u,end:u})}e.push(a)}if(r.length>0){var c=r[i];c.end-c.start>0&&(e.splice(c.start,c.end-c.start+1,""),0===c.start&&e.unshift(""),7===c.end&&e.push(""))}return e.join(":")},o.estimateCores=function(t,e){if("function"==typeof t&&(e=t,t={}),t=t||{},"cores"in o&&!t.update)return e(null,o.cores);if("undefined"!=typeof navigator&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return o.cores=navigator.hardwareConcurrency,e(null,o.cores);if("undefined"==typeof Worker)return o.cores=1,e(null,o.cores);if("undefined"==typeof Blob)return o.cores=2,e(null,o.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(t){for(var e=Date.now(),r=e+4;Date.now()<r;);self.postMessage({st:e,et:r})})}.toString(),")()"],{type:"application/javascript"}));!function t(i,n,a){if(0===n){var s=Math.floor(i.reduce(function(t,e){return t+e},0)/i.length);return o.cores=Math.max(1,s),URL.revokeObjectURL(r),e(null,o.cores)}!function(t,e){for(var i=[],n=[],a=0;a<t;++a){var s=new Worker(r);s.addEventListener("message",function(r){if(n.push(r.data),n.length===t){for(var a=0;a<t;++a)i[a].terminate();e(null,n)}}),i.push(s)}for(var a=0;a<t;++a)i[a].postMessage(a)}(a,function(e,r){i.push(function(t,e){for(var r=[],i=0;i<t;++i)for(var n=e[i],a=r[i]=[],s=0;s<t;++s)if(i!==s){var o=e[s];(n.st>o.st&&n.st<o.et||o.st>n.st&&o.st<n.et)&&a.push(s)}return r.reduce(function(t,e){return Math.max(t,e.length)},0)}(a,r)),t(i,n-1,a)})}([],5,16)}}).call(this,r(7),r(37).setImmediate,r(3).Buffer)},function(t,e,r){var i=r(68),n=r(69),a=r(70);t.exports=function(t){return i(t)||n(t)||a()}},function(t,e,r){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var i=r(72),n=r(73),a=r(38);function s(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,r){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,r);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return h(this,t)}return c(this,t,e,r)}function c(t,e,r,i){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,r,i){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(i||0))throw new RangeError("'length' is out of bounds");e=void 0===r&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,r):new Uint8Array(e,r,i);u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=f(t,e);return t}(t,e,r,i):"string"==typeof e?function(t,e,r){"string"==typeof r&&""!==r||(r="utf8");if(!u.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var i=0|d(e,r),n=(t=o(t,i)).write(e,r);n!==i&&(t=t.slice(0,n));return t}(t,e,r):function(t,e){if(u.isBuffer(e)){var r=0|p(e.length);return 0===(t=o(t,r)).length?t:(e.copy(t,0,0,r),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||function(t){return t!=t}(e.length)?o(t,0):f(t,e);if("Buffer"===e.type&&a(e.data))return f(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function h(t,e){if(l(e),t=o(t,e<0?0:0|p(e)),!u.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function f(t,e){var r=e.length<0?0:0|p(e.length);t=o(t,r);for(var i=0;i<r;i+=1)t[i]=255&e[i];return t}function p(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function d(t,e){if(u.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return K(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return F(t).length;default:if(i)return K(t).length;e=(""+e).toLowerCase(),i=!0}}function g(t,e,r){var i=t[e];t[e]=t[r],t[r]=i}function y(t,e,r,i,n){if(0===t.length)return-1;if("string"==typeof r?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=n?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(n)return-1;r=t.length-1}else if(r<0){if(!n)return-1;r=0}if("string"==typeof e&&(e=u.from(e,i)),u.isBuffer(e))return 0===e.length?-1:m(t,e,r,i,n);if("number"==typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):m(t,[e],r,i,n);throw new TypeError("val must be string, number or Buffer")}function m(t,e,r,i,n){var a,s=1,o=t.length,u=e.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(t.length<2||e.length<2)return-1;s=2,o/=2,u/=2,r/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(n){var l=-1;for(a=r;a<o;a++)if(c(t,a)===c(e,-1===l?0:a-l)){if(-1===l&&(l=a),a-l+1===u)return l*s}else-1!==l&&(a-=a-l),l=-1}else for(r+u>o&&(r=o-u),a=r;a>=0;a--){for(var h=!0,f=0;f<u;f++)if(c(t,a+f)!==c(e,f)){h=!1;break}if(h)return a}return-1}function v(t,e,r,i){r=Number(r)||0;var n=t.length-r;i?(i=Number(i))>n&&(i=n):i=n;var a=e.length;if(a%2!=0)throw new TypeError("Invalid hex string");i>a/2&&(i=a/2);for(var s=0;s<i;++s){var o=parseInt(e.substr(2*s,2),16);if(isNaN(o))return s;t[r+s]=o}return s}function _(t,e,r,i){return z(K(e,t.length-r),t,r,i)}function b(t,e,r,i){return z(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,i)}function C(t,e,r,i){return b(t,e,r,i)}function E(t,e,r,i){return z(F(e),t,r,i)}function S(t,e,r,i){return z(function(t,e){for(var r,i,n,a=[],s=0;s<t.length&&!((e-=2)<0);++s)r=t.charCodeAt(s),i=r>>8,n=r%256,a.push(n),a.push(i);return a}(e,t.length-r),t,r,i)}function w(t,e,r){return 0===e&&r===t.length?i.fromByteArray(t):i.fromByteArray(t.slice(e,r))}function A(t,e,r){r=Math.min(t.length,r);for(var i=[],n=e;n<r;){var a,s,o,u,c=t[n],l=null,h=c>239?4:c>223?3:c>191?2:1;if(n+h<=r)switch(h){case 1:c<128&&(l=c);break;case 2:128==(192&(a=t[n+1]))&&(u=(31&c)<<6|63&a)>127&&(l=u);break;case 3:a=t[n+1],s=t[n+2],128==(192&a)&&128==(192&s)&&(u=(15&c)<<12|(63&a)<<6|63&s)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:a=t[n+1],s=t[n+2],o=t[n+3],128==(192&a)&&128==(192&s)&&128==(192&o)&&(u=(15&c)<<18|(63&a)<<12|(63&s)<<6|63&o)>65535&&u<1114112&&(l=u)}null===l?(l=65533,h=1):l>65535&&(l-=65536,i.push(l>>>10&1023|55296),l=56320|1023&l),i.push(l),n+=h}return function(t){var e=t.length;if(e<=T)return String.fromCharCode.apply(String,t);var r="",i=0;for(;i<e;)r+=String.fromCharCode.apply(String,t.slice(i,i+=T));return r}(i)}e.Buffer=u,e.SlowBuffer=function(t){+t!=t&&(t=0);return u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=s(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,r){return c(null,t,e,r)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,r){return function(t,e,r,i){return l(e),e<=0?o(t,e):void 0!==r?"string"==typeof i?o(t,e).fill(r,i):o(t,e).fill(r):o(t,e)}(null,t,e,r)},u.allocUnsafe=function(t){return h(null,t)},u.allocUnsafeSlow=function(t){return h(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,i=e.length,n=0,a=Math.min(r,i);n<a;++n)if(t[n]!==e[n]){r=t[n],i=e[n];break}return r<i?-1:i<r?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!a(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var i=u.allocUnsafe(e),n=0;for(r=0;r<t.length;++r){var s=t[r];if(!u.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(i,n),n+=s.length}return i},u.byteLength=d,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)g(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)g(this,e,e+3),g(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)g(this,e,e+7),g(this,e+1,e+6),g(this,e+2,e+5),g(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?A(this,0,t):function(t,e,r){var i=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return B(this,e,r);case"utf8":case"utf-8":return A(this,e,r);case"ascii":return k(this,e,r);case"latin1":case"binary":return I(this,e,r);case"base64":return w(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,e,r);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,r,i,n){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===i&&(i=0),void 0===n&&(n=this.length),e<0||r>t.length||i<0||n>this.length)throw new RangeError("out of range index");if(i>=n&&e>=r)return 0;if(i>=n)return-1;if(e>=r)return 1;if(e>>>=0,r>>>=0,i>>>=0,n>>>=0,this===t)return 0;for(var a=n-i,s=r-e,o=Math.min(a,s),c=this.slice(i,n),l=t.slice(e,r),h=0;h<o;++h)if(c[h]!==l[h]){a=c[h],s=l[h];break}return a<s?-1:s<a?1:0},u.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},u.prototype.indexOf=function(t,e,r){return y(this,t,e,r,!0)},u.prototype.lastIndexOf=function(t,e,r){return y(this,t,e,r,!1)},u.prototype.write=function(t,e,r,i){if(void 0===e)i="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)i=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===i&&(i="utf8")):(i=r,r=void 0)}var n=this.length-e;if((void 0===r||r>n)&&(r=n),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var a=!1;;)switch(i){case"hex":return v(this,t,e,r);case"utf8":case"utf-8":return _(this,t,e,r);case"ascii":return b(this,t,e,r);case"latin1":case"binary":return C(this,t,e,r);case"base64":return E(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,e,r);default:if(a)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),a=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var T=4096;function k(t,e,r){var i="";r=Math.min(t.length,r);for(var n=e;n<r;++n)i+=String.fromCharCode(127&t[n]);return i}function I(t,e,r){var i="";r=Math.min(t.length,r);for(var n=e;n<r;++n)i+=String.fromCharCode(t[n]);return i}function B(t,e,r){var i=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>i)&&(r=i);for(var n="",a=e;a<r;++a)n+=V(t[a]);return n}function R(t,e,r){for(var i=t.slice(e,r),n="",a=0;a<i.length;a+=2)n+=String.fromCharCode(i[a]+256*i[a+1]);return n}function N(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function U(t,e,r,i,n,a){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>n||e<a)throw new RangeError('"value" argument is out of bounds');if(r+i>t.length)throw new RangeError("Index out of range")}function L(t,e,r,i){e<0&&(e=65535+e+1);for(var n=0,a=Math.min(t.length-r,2);n<a;++n)t[r+n]=(e&255<<8*(i?n:1-n))>>>8*(i?n:1-n)}function P(t,e,r,i){e<0&&(e=4294967295+e+1);for(var n=0,a=Math.min(t.length-r,4);n<a;++n)t[r+n]=e>>>8*(i?n:3-n)&255}function D(t,e,r,i,n,a){if(r+i>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function x(t,e,r,i,a){return a||D(t,0,r,4),n.write(t,e,r,i,23,4),r+4}function O(t,e,r,i,a){return a||D(t,0,r,8),n.write(t,e,r,i,52,8),r+8}u.prototype.slice=function(t,e){var r,i=this.length;if(t=~~t,e=void 0===e?i:~~e,t<0?(t+=i)<0&&(t=0):t>i&&(t=i),e<0?(e+=i)<0&&(e=0):e>i&&(e=i),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(r=this.subarray(t,e)).__proto__=u.prototype;else{var n=e-t;r=new u(n,void 0);for(var a=0;a<n;++a)r[a]=this[a+t]}return r},u.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||N(t,e,this.length);for(var i=this[t],n=1,a=0;++a<e&&(n*=256);)i+=this[t+a]*n;return i},u.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||N(t,e,this.length);for(var i=this[t+--e],n=1;e>0&&(n*=256);)i+=this[t+--e]*n;return i},u.prototype.readUInt8=function(t,e){return e||N(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||N(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||N(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||N(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||N(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||N(t,e,this.length);for(var i=this[t],n=1,a=0;++a<e&&(n*=256);)i+=this[t+a]*n;return i>=(n*=128)&&(i-=Math.pow(2,8*e)),i},u.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||N(t,e,this.length);for(var i=e,n=1,a=this[t+--i];i>0&&(n*=256);)a+=this[t+--i]*n;return a>=(n*=128)&&(a-=Math.pow(2,8*e)),a},u.prototype.readInt8=function(t,e){return e||N(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||N(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(t,e){e||N(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(t,e){return e||N(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||N(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||N(t,4,this.length),n.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||N(t,4,this.length),n.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||N(t,8,this.length),n.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||N(t,8,this.length),n.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,r,i){(t=+t,e|=0,r|=0,i)||U(this,t,e,r,Math.pow(2,8*r)-1,0);var n=1,a=0;for(this[e]=255&t;++a<r&&(n*=256);)this[e+a]=t/n&255;return e+r},u.prototype.writeUIntBE=function(t,e,r,i){(t=+t,e|=0,r|=0,i)||U(this,t,e,r,Math.pow(2,8*r)-1,0);var n=r-1,a=1;for(this[e+n]=255&t;--n>=0&&(a*=256);)this[e+n]=t/a&255;return e+r},u.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||U(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||U(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):L(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||U(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):L(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||U(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):P(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||U(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):P(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,r,i){if(t=+t,e|=0,!i){var n=Math.pow(2,8*r-1);U(this,t,e,r,n-1,-n)}var a=0,s=1,o=0;for(this[e]=255&t;++a<r&&(s*=256);)t<0&&0===o&&0!==this[e+a-1]&&(o=1),this[e+a]=(t/s>>0)-o&255;return e+r},u.prototype.writeIntBE=function(t,e,r,i){if(t=+t,e|=0,!i){var n=Math.pow(2,8*r-1);U(this,t,e,r,n-1,-n)}var a=r-1,s=1,o=0;for(this[e+a]=255&t;--a>=0&&(s*=256);)t<0&&0===o&&0!==this[e+a+1]&&(o=1),this[e+a]=(t/s>>0)-o&255;return e+r},u.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||U(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||U(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):L(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||U(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):L(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||U(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):P(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||U(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):P(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,r){return x(this,t,e,!0,r)},u.prototype.writeFloatBE=function(t,e,r){return x(this,t,e,!1,r)},u.prototype.writeDoubleLE=function(t,e,r){return O(this,t,e,!0,r)},u.prototype.writeDoubleBE=function(t,e,r){return O(this,t,e,!1,r)},u.prototype.copy=function(t,e,r,i){if(r||(r=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&i<r&&(i=r),i===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-r&&(i=t.length-e+r);var n,a=i-r;if(this===t&&r<e&&e<i)for(n=a-1;n>=0;--n)t[n+e]=this[n+r];else if(a<1e3||!u.TYPED_ARRAY_SUPPORT)for(n=0;n<a;++n)t[n+e]=this[n+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+a),e);return a},u.prototype.fill=function(t,e,r,i){if("string"==typeof t){if("string"==typeof e?(i=e,e=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),1===t.length){var n=t.charCodeAt(0);n<256&&(t=n)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!u.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var a;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(a=e;a<r;++a)this[a]=t;else{var s=u.isBuffer(t)?t:K(new u(t,i).toString()),o=s.length;for(a=0;a<r-e;++a)this[a+e]=s[a%o]}return this};var M=/[^+\/0-9A-Za-z-_]/g;function V(t){return t<16?"0"+t.toString(16):t.toString(16)}function K(t,e){var r;e=e||1/0;for(var i=t.length,n=null,a=[],s=0;s<i;++s){if((r=t.charCodeAt(s))>55295&&r<57344){if(!n){if(r>56319){(e-=3)>-1&&a.push(239,191,189);continue}if(s+1===i){(e-=3)>-1&&a.push(239,191,189);continue}n=r;continue}if(r<56320){(e-=3)>-1&&a.push(239,191,189),n=r;continue}r=65536+(n-55296<<10|r-56320)}else n&&(e-=3)>-1&&a.push(239,191,189);if(n=null,r<128){if((e-=1)<0)break;a.push(r)}else if(r<2048){if((e-=2)<0)break;a.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;a.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return a}function F(t){return i.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(M,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function z(t,e,r,i){for(var n=0;n<i&&!(n+r>=e.length||n>=t.length);++n)e[n+r]=t[n];return n}}).call(this,r(8))},function(t,e,r){var i=r(0);r(9),r(44),r(45),r(1),i.random&&i.random.getBytes?t.exports=i.random:function(e){var r={},n=new Array(4),a=i.util.createBuffer();function s(){var t=i.prng.create(r);return t.getBytes=function(e,r){return t.generate(e,r)},t.getBytesSync=function(e){return t.generate(e)},t}r.formatKey=function(t){var e=i.util.createBuffer(t);return(t=new Array(4))[0]=e.getInt32(),t[1]=e.getInt32(),t[2]=e.getInt32(),t[3]=e.getInt32(),i.aes._expandKey(t,!1)},r.formatSeed=function(t){var e=i.util.createBuffer(t);return(t=new Array(4))[0]=e.getInt32(),t[1]=e.getInt32(),t[2]=e.getInt32(),t[3]=e.getInt32(),t},r.cipher=function(t,e){return i.aes._updateBlock(t,e,n,!1),a.putInt32(n[0]),a.putInt32(n[1]),a.putInt32(n[2]),a.putInt32(n[3]),a.getBytes()},r.increment=function(t){return++t[3],t},r.md=i.md.sha256;var o=s(),u=null;if("undefined"!=typeof window){var c=window.crypto||window.msCrypto;c&&c.getRandomValues&&(u=function(t){return c.getRandomValues(t)})}if(i.options.usePureJavaScript||!i.util.isNodejs&&!u){if("undefined"==typeof window||window.document,o.collectInt(+new Date,32),"undefined"!=typeof navigator){var l="";for(var h in navigator)try{"string"==typeof navigator[h]&&(l+=navigator[h])}catch(t){}o.collect(l),l=null}e&&(e().mousemove(function(t){o.collectInt(t.clientX,16),o.collectInt(t.clientY,16)}),e().keypress(function(t){o.collectInt(t.charCode,8)}))}if(i.random)for(var h in o)i.random[h]=o[h];else i.random=o;i.random.createInstance=s,t.exports=i.random}("undefined"!=typeof jQuery?jQuery:null)},function(t,e,r){var i=r(0);r(1),r(10);var n=t.exports=i.asn1=i.asn1||{};function a(t,e,r){if(r>e){var i=new Error("Too few bytes to parse DER.");throw i.available=t.length(),i.remaining=e,i.requested=r,i}}n.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192},n.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30},n.create=function(t,e,r,a,s){if(i.util.isArray(a)){for(var o=[],u=0;u<a.length;++u)void 0!==a[u]&&o.push(a[u]);a=o}var c={tagClass:t,type:e,constructed:r,composed:r||i.util.isArray(a),value:a};return s&&"bitStringContents"in s&&(c.bitStringContents=s.bitStringContents,c.original=n.copy(c)),c},n.copy=function(t,e){var r;if(i.util.isArray(t)){r=[];for(var a=0;a<t.length;++a)r.push(n.copy(t[a],e));return r}return"string"==typeof t?t:(r={tagClass:t.tagClass,type:t.type,constructed:t.constructed,composed:t.composed,value:n.copy(t.value,e)},e&&!e.excludeBitStringContents&&(r.bitStringContents=t.bitStringContents),r)},n.equals=function(t,e,r){if(i.util.isArray(t)){if(!i.util.isArray(e))return!1;if(t.length!==e.length)return!1;for(var a=0;a<t.length;++a)if(!n.equals(t[a],e[a]))return!1;return!0}if(typeof t!=typeof e)return!1;if("string"==typeof t)return t===e;var s=t.tagClass===e.tagClass&&t.type===e.type&&t.constructed===e.constructed&&t.composed===e.composed&&n.equals(t.value,e.value);return r&&r.includeBitStringContents&&(s=s&&t.bitStringContents===e.bitStringContents),s},n.getBerValueLength=function(t){var e=t.getByte();if(128!==e)return 128&e?t.getInt((127&e)<<3):e};var s=function(t,e){var r=t.getByte();if(e--,128!==r){var i;if(128&r){var n=127&r;a(t,e,n),i=t.getInt(n<<3)}else i=r;if(i<0)throw new Error("Negative length: "+i);return i}};n.fromDer=function(t,e){return void 0===e&&(e={strict:!0,decodeBitStrings:!0}),"boolean"==typeof e&&(e={strict:e,decodeBitStrings:!0}),"strict"in e||(e.strict=!0),"decodeBitStrings"in e||(e.decodeBitStrings=!0),"string"==typeof t&&(t=i.util.createBuffer(t)),function t(e,r,i,o){var u;a(e,r,2);var c=e.getByte();r--;var l=192&c;var h=31&c;u=e.length();var f=s(e,r);r-=u-e.length();if(void 0!==f&&f>r){if(o.strict){var p=new Error("Too few bytes to read ASN.1 value.");throw p.available=e.length(),p.remaining=r,p.requested=f,p}f=r}var d;var g;var y=32==(32&c);if(y)if(d=[],void 0===f)for(;;){if(a(e,r,2),e.bytes(2)===String.fromCharCode(0,0)){e.getBytes(2),r-=2;break}u=e.length(),d.push(t(e,r,i+1,o)),r-=u-e.length()}else for(;f>0;)u=e.length(),d.push(t(e,f,i+1,o)),r-=u-e.length(),f-=u-e.length();void 0===d&&l===n.Class.UNIVERSAL&&h===n.Type.BITSTRING&&(g=e.bytes(f));if(void 0===d&&o.decodeBitStrings&&l===n.Class.UNIVERSAL&&h===n.Type.BITSTRING&&f>1){var m=e.read,v=r,_=0;if(h===n.Type.BITSTRING&&(a(e,r,1),_=e.getByte(),r--),0===_)try{u=e.length();var b={verbose:o.verbose,strict:!0,decodeBitStrings:!0},C=t(e,r,i+1,b),E=u-e.length();r-=E,h==n.Type.BITSTRING&&E++;var S=C.tagClass;E!==f||S!==n.Class.UNIVERSAL&&S!==n.Class.CONTEXT_SPECIFIC||(d=[C])}catch(t){}void 0===d&&(e.read=m,r=v)}if(void 0===d){if(void 0===f){if(o.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");f=r}if(h===n.Type.BMPSTRING)for(d="";f>0;f-=2)a(e,r,2),d+=String.fromCharCode(e.getInt16()),r-=2;else d=e.getBytes(f)}var w=void 0===g?null:{bitStringContents:g};return n.create(l,h,y,d,w)}(t,t.length(),0,e)},n.toDer=function(t){var e=i.util.createBuffer(),r=t.tagClass|t.type,a=i.util.createBuffer(),s=!1;if("bitStringContents"in t&&(s=!0,t.original&&(s=n.equals(t,t.original))),s)a.putBytes(t.bitStringContents);else if(t.composed){t.constructed?r|=32:a.putByte(0);for(var o=0;o<t.value.length;++o)void 0!==t.value[o]&&a.putBuffer(n.toDer(t.value[o]))}else if(t.type===n.Type.BMPSTRING)for(o=0;o<t.value.length;++o)a.putInt16(t.value.charCodeAt(o));else t.type===n.Type.INTEGER&&t.value.length>1&&(0===t.value.charCodeAt(0)&&0==(128&t.value.charCodeAt(1))||255===t.value.charCodeAt(0)&&128==(128&t.value.charCodeAt(1)))?a.putBytes(t.value.substr(1)):a.putBytes(t.value);if(e.putByte(r),a.length()<=127)e.putByte(127&a.length());else{var u=a.length(),c="";do{c+=String.fromCharCode(255&u),u>>>=8}while(u>0);e.putByte(128|c.length);for(o=c.length-1;o>=0;--o)e.putByte(c.charCodeAt(o))}return e.putBuffer(a),e},n.oidToDer=function(t){var e,r,n,a,s=t.split("."),o=i.util.createBuffer();o.putByte(40*parseInt(s[0],10)+parseInt(s[1],10));for(var u=2;u<s.length;++u){e=!0,r=[],n=parseInt(s[u],10);do{a=127&n,n>>>=7,e||(a|=128),r.push(a),e=!1}while(n>0);for(var c=r.length-1;c>=0;--c)o.putByte(r[c])}return o},n.derToOid=function(t){var e;"string"==typeof t&&(t=i.util.createBuffer(t));var r=t.getByte();e=Math.floor(r/40)+"."+r%40;for(var n=0;t.length()>0;)n<<=7,128&(r=t.getByte())?n+=127&r:(e+="."+(n+r),n=0);return e},n.utcTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,2),10);r=r>=50?1900+r:2e3+r;var i=parseInt(t.substr(2,2),10)-1,n=parseInt(t.substr(4,2),10),a=parseInt(t.substr(6,2),10),s=parseInt(t.substr(8,2),10),o=0;if(t.length>11){var u=t.charAt(10),c=10;"+"!==u&&"-"!==u&&(o=parseInt(t.substr(10,2),10),c+=2)}if(e.setUTCFullYear(r,i,n),e.setUTCHours(a,s,o,0),c&&("+"===(u=t.charAt(c))||"-"===u)){var l=60*parseInt(t.substr(c+1,2),10)+parseInt(t.substr(c+4,2),10);l*=6e4,"+"===u?e.setTime(+e-l):e.setTime(+e+l)}return e},n.generalizedTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,4),10),i=parseInt(t.substr(4,2),10)-1,n=parseInt(t.substr(6,2),10),a=parseInt(t.substr(8,2),10),s=parseInt(t.substr(10,2),10),o=parseInt(t.substr(12,2),10),u=0,c=0,l=!1;"Z"===t.charAt(t.length-1)&&(l=!0);var h=t.length-5,f=t.charAt(h);"+"!==f&&"-"!==f||(c=60*parseInt(t.substr(h+1,2),10)+parseInt(t.substr(h+4,2),10),c*=6e4,"+"===f&&(c*=-1),l=!0);return"."===t.charAt(14)&&(u=1e3*parseFloat(t.substr(14),10)),l?(e.setUTCFullYear(r,i,n),e.setUTCHours(a,s,o,u),e.setTime(+e+c)):(e.setFullYear(r,i,n),e.setHours(a,s,o,u)),e},n.dateToUtcTime=function(t){if("string"==typeof t)return t;var e="",r=[];r.push((""+t.getUTCFullYear()).substr(2)),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var i=0;i<r.length;++i)r[i].length<2&&(e+="0"),e+=r[i];return e+="Z"},n.dateToGeneralizedTime=function(t){if("string"==typeof t)return t;var e="",r=[];r.push(""+t.getUTCFullYear()),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var i=0;i<r.length;++i)r[i].length<2&&(e+="0"),e+=r[i];return e+="Z"},n.integerToDer=function(t){var e=i.util.createBuffer();if(t>=-128&&t<128)return e.putSignedInt(t,8);if(t>=-32768&&t<32768)return e.putSignedInt(t,16);if(t>=-8388608&&t<8388608)return e.putSignedInt(t,24);if(t>=-2147483648&&t<2147483648)return e.putSignedInt(t,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=t,r},n.derToInteger=function(t){"string"==typeof t&&(t=i.util.createBuffer(t));var e=8*t.length();if(e>32)throw new Error("Integer too large; max is 32-bits.");return t.getSignedInt(e)},n.validate=function(t,e,r,a){var s=!1;if(t.tagClass!==e.tagClass&&void 0!==e.tagClass||t.type!==e.type&&void 0!==e.type)a&&(t.tagClass!==e.tagClass&&a.push("["+e.name+'] Expected tag class "'+e.tagClass+'", got "'+t.tagClass+'"'),t.type!==e.type&&a.push("["+e.name+'] Expected type "'+e.type+'", got "'+t.type+'"'));else if(t.constructed===e.constructed||void 0===e.constructed){if(s=!0,e.value&&i.util.isArray(e.value))for(var o=0,u=0;s&&u<e.value.length;++u)s=e.value[u].optional||!1,t.value[o]&&((s=n.validate(t.value[o],e.value[u],r,a))?++o:e.value[u].optional&&(s=!0)),!s&&a&&a.push("["+e.name+'] Tag class "'+e.tagClass+'", type "'+e.type+'" expected value length "'+e.value.length+'", got "'+t.value.length+'"');if(s&&r)if(e.capture&&(r[e.capture]=t.value),e.captureAsn1&&(r[e.captureAsn1]=t),e.captureBitStringContents&&"bitStringContents"in t&&(r[e.captureBitStringContents]=t.bitStringContents),e.captureBitStringValue&&"bitStringContents"in t)if(t.bitStringContents.length<2)r[e.captureBitStringValue]="";else{if(0!==t.bitStringContents.charCodeAt(0))throw new Error("captureBitStringValue only supported for zero unused bits");r[e.captureBitStringValue]=t.bitStringContents.slice(1)}}else a&&a.push("["+e.name+'] Expected constructed "'+e.constructed+'", got "'+t.constructed+'"');return s};var o=/[^\\u0000-\\u00ff]/;n.prettyPrint=function(t,e,r){var a="";e=e||0,r=r||2,e>0&&(a+="\n");for(var s="",u=0;u<e*r;++u)s+=" ";switch(a+=s+"Tag: ",t.tagClass){case n.Class.UNIVERSAL:a+="Universal:";break;case n.Class.APPLICATION:a+="Application:";break;case n.Class.CONTEXT_SPECIFIC:a+="Context-Specific:";break;case n.Class.PRIVATE:a+="Private:"}if(t.tagClass===n.Class.UNIVERSAL)switch(a+=t.type,t.type){case n.Type.NONE:a+=" (None)";break;case n.Type.BOOLEAN:a+=" (Boolean)";break;case n.Type.INTEGER:a+=" (Integer)";break;case n.Type.BITSTRING:a+=" (Bit string)";break;case n.Type.OCTETSTRING:a+=" (Octet string)";break;case n.Type.NULL:a+=" (Null)";break;case n.Type.OID:a+=" (Object Identifier)";break;case n.Type.ODESC:a+=" (Object Descriptor)";break;case n.Type.EXTERNAL:a+=" (External or Instance of)";break;case n.Type.REAL:a+=" (Real)";break;case n.Type.ENUMERATED:a+=" (Enumerated)";break;case n.Type.EMBEDDED:a+=" (Embedded PDV)";break;case n.Type.UTF8:a+=" (UTF8)";break;case n.Type.ROID:a+=" (Relative Object Identifier)";break;case n.Type.SEQUENCE:a+=" (Sequence)";break;case n.Type.SET:a+=" (Set)";break;case n.Type.PRINTABLESTRING:a+=" (Printable String)";break;case n.Type.IA5String:a+=" (IA5String (ASCII))";break;case n.Type.UTCTIME:a+=" (UTC time)";break;case n.Type.GENERALIZEDTIME:a+=" (Generalized time)";break;case n.Type.BMPSTRING:a+=" (BMP String)"}else a+=t.type;if(a+="\n",a+=s+"Constructed: "+t.constructed+"\n",t.composed){var c=0,l="";for(u=0;u<t.value.length;++u)void 0!==t.value[u]&&(c+=1,l+=n.prettyPrint(t.value[u],e+1,r),u+1<t.value.length&&(l+=","));a+=s+"Sub values: "+c+l}else{if(a+=s+"Value: ",t.type===n.Type.OID){var h=n.derToOid(t.value);a+=h,i.pki&&i.pki.oids&&h in i.pki.oids&&(a+=" ("+i.pki.oids[h]+") ")}if(t.type===n.Type.INTEGER)try{a+=n.derToInteger(t.value)}catch(e){a+="0x"+i.util.bytesToHex(t.value)}else if(t.type===n.Type.BITSTRING){if(t.value.length>1?a+="0x"+i.util.bytesToHex(t.value.slice(1)):a+="(none)",t.value.length>0){var f=t.value.charCodeAt(0);1==f?a+=" (1 unused bit shown)":f>1&&(a+=" ("+f+" unused bits shown)")}}else t.type===n.Type.OCTETSTRING?(o.test(t.value)||(a+="("+t.value+") "),a+="0x"+i.util.bytesToHex(t.value)):t.type===n.Type.UTF8?a+=i.util.decodeUtf8(t.value):t.type===n.Type.PRINTABLESTRING||t.type===n.Type.IA5String?a+=t.value:o.test(t.value)?a+="0x"+i.util.bytesToHex(t.value):0===t.value.length?a+="[null]":a+=t.value}return a}},function(t,e,r){var i=r(0);t.exports=i.md=i.md||{},i.md.algorithms=i.md.algorithms||{}},function(t,e){var r,i,n=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function o(t){if(r===setTimeout)return setTimeout(t,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(t){r=a}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(t){i=s}}();var u,c=[],l=!1,h=-1;function f(){l&&u&&(l=!1,u.length?c=u.concat(c):h=-1,c.length&&p())}function p(){if(!l){var t=o(f);l=!0;for(var e=c.length;e;){for(u=c,c=[];++h<e;)u&&u[h].run();h=-1,e=c.length}u=null,l=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function g(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];c.push(new d(t,e)),1!==c.length||l||o(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=g,n.addListener=g,n.once=g,n.off=g,n.removeListener=g,n.removeAllListeners=g,n.emit=g,n.prependListener=g,n.prependOnceListener=g,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},function(t,e){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){var i=r(0);function n(t,e){i.cipher.registerAlgorithm(t,function(){return new i.aes.Algorithm(t,e)})}r(27),r(39),r(1),t.exports=i.aes=i.aes||{},i.aes.startEncrypting=function(t,e,r,i){var n=g({key:t,output:r,decrypt:!1,mode:i});return n.start(e),n},i.aes.createEncryptionCipher=function(t,e){return g({key:t,output:null,decrypt:!1,mode:e})},i.aes.startDecrypting=function(t,e,r,i){var n=g({key:t,output:r,decrypt:!0,mode:i});return n.start(e),n},i.aes.createDecryptionCipher=function(t,e){return g({key:t,output:null,decrypt:!0,mode:e})},i.aes.Algorithm=function(t,e){l||f();var r=this;r.name=t,r.mode=new e({blockSize:16,cipher:{encrypt:function(t,e){return d(r._w,t,e,!1)},decrypt:function(t,e){return d(r._w,t,e,!0)}}}),r._init=!1},i.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var e,r=t.key;if("string"!=typeof r||16!==r.length&&24!==r.length&&32!==r.length){if(i.util.isArray(r)&&(16===r.length||24===r.length||32===r.length)){e=r,r=i.util.createBuffer();for(var n=0;n<e.length;++n)r.putByte(e[n])}}else r=i.util.createBuffer(r);if(!i.util.isArray(r)){e=r,r=[];var a=e.length();if(16===a||24===a||32===a){a>>>=2;for(n=0;n<a;++n)r.push(e.getInt32())}}if(!i.util.isArray(r)||4!==r.length&&6!==r.length&&8!==r.length)throw new Error("Invalid key parameter.");var s=this.mode.name,o=-1!==["CFB","OFB","CTR","GCM"].indexOf(s);this._w=p(r,t.decrypt&&!o),this._init=!0}},i.aes._expandKey=function(t,e){return l||f(),p(t,e)},i.aes._updateBlock=d,n("AES-ECB",i.cipher.modes.ecb),n("AES-CBC",i.cipher.modes.cbc),n("AES-CFB",i.cipher.modes.cfb),n("AES-OFB",i.cipher.modes.ofb),n("AES-CTR",i.cipher.modes.ctr),n("AES-GCM",i.cipher.modes.gcm);var a,s,o,u,c,l=!1,h=4;function f(){l=!0,o=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),e=0;e<128;++e)t[e]=e<<1,t[e+128]=e+128<<1^283;a=new Array(256),s=new Array(256),u=new Array(4),c=new Array(4);for(e=0;e<4;++e)u[e]=new Array(256),c[e]=new Array(256);var r,i,n,h,f,p,d,g=0,y=0;for(e=0;e<256;++e){h=(h=y^y<<1^y<<2^y<<3^y<<4)>>8^255&h^99,a[g]=h,s[h]=g,p=(f=t[h])<<24^h<<16^h<<8^h^f,d=((r=t[g])^(i=t[r])^(n=t[i]))<<24^(g^n)<<16^(g^i^n)<<8^g^r^n;for(var m=0;m<4;++m)u[m][g]=p,c[m][h]=d,p=p<<24|p>>>8,d=d<<24|d>>>8;0===g?g=y=1:(g=r^t[t[t[r^n]]],y^=t[t[y]])}}function p(t,e){for(var r,i=t.slice(0),n=1,s=i.length,u=h*(s+6+1),l=s;l<u;++l)r=i[l-1],l%s==0?(r=a[r>>>16&255]<<24^a[r>>>8&255]<<16^a[255&r]<<8^a[r>>>24]^o[n]<<24,n++):s>6&&l%s==4&&(r=a[r>>>24]<<24^a[r>>>16&255]<<16^a[r>>>8&255]<<8^a[255&r]),i[l]=i[l-s]^r;if(e){for(var f,p=c[0],d=c[1],g=c[2],y=c[3],m=i.slice(0),v=(l=0,(u=i.length)-h);l<u;l+=h,v-=h)if(0===l||l===u-h)m[l]=i[v],m[l+1]=i[v+3],m[l+2]=i[v+2],m[l+3]=i[v+1];else for(var _=0;_<h;++_)f=i[v+_],m[l+(3&-_)]=p[a[f>>>24]]^d[a[f>>>16&255]]^g[a[f>>>8&255]]^y[a[255&f]];i=m}return i}function d(t,e,r,i){var n,o,l,h,f,p,d,g,y,m,v,_,b=t.length/4-1;i?(n=c[0],o=c[1],l=c[2],h=c[3],f=s):(n=u[0],o=u[1],l=u[2],h=u[3],f=a),p=e[0]^t[0],d=e[i?3:1]^t[1],g=e[2]^t[2],y=e[i?1:3]^t[3];for(var C=3,E=1;E<b;++E)m=n[p>>>24]^o[d>>>16&255]^l[g>>>8&255]^h[255&y]^t[++C],v=n[d>>>24]^o[g>>>16&255]^l[y>>>8&255]^h[255&p]^t[++C],_=n[g>>>24]^o[y>>>16&255]^l[p>>>8&255]^h[255&d]^t[++C],y=n[y>>>24]^o[p>>>16&255]^l[d>>>8&255]^h[255&g]^t[++C],p=m,d=v,g=_;r[0]=f[p>>>24]<<24^f[d>>>16&255]<<16^f[g>>>8&255]<<8^f[255&y]^t[++C],r[i?3:1]=f[d>>>24]<<24^f[g>>>16&255]<<16^f[y>>>8&255]<<8^f[255&p]^t[++C],r[2]=f[g>>>24]<<24^f[y>>>16&255]<<16^f[p>>>8&255]<<8^f[255&d]^t[++C],r[i?1:3]=f[y>>>24]<<24^f[p>>>16&255]<<16^f[d>>>8&255]<<8^f[255&g]^t[++C]}function g(t){var e,r="AES-"+((t=t||{}).mode||"CBC").toUpperCase(),n=(e=t.decrypt?i.cipher.createDecipher(r,t.key):i.cipher.createCipher(r,t.key)).start;return e.start=function(t,r){var a=null;r instanceof i.util.ByteBuffer&&(a=r,r={}),(r=r||{}).output=a,r.iv=t,n.call(e,r)},e}},function(t,e,r){var i=r(0);i.pki=i.pki||{};var n=t.exports=i.pki.oids=i.oids=i.oids||{};function a(t,e){n[t]=e,n[e]=t}function s(t,e){n[t]=e}a("1.2.840.113549.1.1.1","rsaEncryption"),a("1.2.840.113549.1.1.4","md5WithRSAEncryption"),a("1.2.840.113549.1.1.5","sha1WithRSAEncryption"),a("1.2.840.113549.1.1.7","RSAES-OAEP"),a("1.2.840.113549.1.1.8","mgf1"),a("1.2.840.113549.1.1.9","pSpecified"),a("1.2.840.113549.1.1.10","RSASSA-PSS"),a("1.2.840.113549.1.1.11","sha256WithRSAEncryption"),a("1.2.840.113549.1.1.12","sha384WithRSAEncryption"),a("1.2.840.113549.1.1.13","sha512WithRSAEncryption"),a("1.2.840.10040.4.3","dsa-with-sha1"),a("1.3.14.3.2.7","desCBC"),a("1.3.14.3.2.26","sha1"),a("2.16.840.1.101.3.4.2.1","sha256"),a("2.16.840.1.101.3.4.2.2","sha384"),a("2.16.840.1.101.3.4.2.3","sha512"),a("1.2.840.113549.2.5","md5"),a("1.2.840.113549.1.7.1","data"),a("1.2.840.113549.1.7.2","signedData"),a("1.2.840.113549.1.7.3","envelopedData"),a("1.2.840.113549.1.7.4","signedAndEnvelopedData"),a("1.2.840.113549.1.7.5","digestedData"),a("1.2.840.113549.1.7.6","encryptedData"),a("1.2.840.113549.1.9.1","emailAddress"),a("1.2.840.113549.1.9.2","unstructuredName"),a("1.2.840.113549.1.9.3","contentType"),a("1.2.840.113549.1.9.4","messageDigest"),a("1.2.840.113549.1.9.5","signingTime"),a("1.2.840.113549.1.9.6","counterSignature"),a("1.2.840.113549.1.9.7","challengePassword"),a("1.2.840.113549.1.9.8","unstructuredAddress"),a("1.2.840.113549.1.9.14","extensionRequest"),a("1.2.840.113549.1.9.20","friendlyName"),a("1.2.840.113549.1.9.21","localKeyId"),a("1.2.840.113549.1.9.22.1","x509Certificate"),a("1.2.840.113549.1.12.10.1.1","keyBag"),a("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag"),a("1.2.840.113549.1.12.10.1.3","certBag"),a("1.2.840.113549.1.12.10.1.4","crlBag"),a("1.2.840.113549.1.12.10.1.5","secretBag"),a("1.2.840.113549.1.12.10.1.6","safeContentsBag"),a("1.2.840.113549.1.5.13","pkcs5PBES2"),a("1.2.840.113549.1.5.12","pkcs5PBKDF2"),a("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4"),a("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4"),a("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC"),a("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC"),a("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC"),a("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC"),a("1.2.840.113549.2.7","hmacWithSHA1"),a("1.2.840.113549.2.8","hmacWithSHA224"),a("1.2.840.113549.2.9","hmacWithSHA256"),a("1.2.840.113549.2.10","hmacWithSHA384"),a("1.2.840.113549.2.11","hmacWithSHA512"),a("1.2.840.113549.3.7","des-EDE3-CBC"),a("2.16.840.1.101.3.4.1.2","aes128-CBC"),a("2.16.840.1.101.3.4.1.22","aes192-CBC"),a("2.16.840.1.101.3.4.1.42","aes256-CBC"),a("2.5.4.3","commonName"),a("2.5.4.5","serialName"),a("2.5.4.6","countryName"),a("2.5.4.7","localityName"),a("2.5.4.8","stateOrProvinceName"),a("2.5.4.10","organizationName"),a("2.5.4.11","organizationalUnitName"),a("2.16.840.1.113730.1.1","nsCertType"),s("2.5.29.1","authorityKeyIdentifier"),s("2.5.29.2","keyAttributes"),s("2.5.29.3","certificatePolicies"),s("2.5.29.4","keyUsageRestriction"),s("2.5.29.5","policyMapping"),s("2.5.29.6","subtreesConstraint"),s("2.5.29.7","subjectAltName"),s("2.5.29.8","issuerAltName"),s("2.5.29.9","subjectDirectoryAttributes"),s("2.5.29.10","basicConstraints"),s("2.5.29.11","nameConstraints"),s("2.5.29.12","policyConstraints"),s("2.5.29.13","basicConstraints"),a("2.5.29.14","subjectKeyIdentifier"),a("2.5.29.15","keyUsage"),s("2.5.29.16","privateKeyUsagePeriod"),a("2.5.29.17","subjectAltName"),a("2.5.29.18","issuerAltName"),a("2.5.29.19","basicConstraints"),s("2.5.29.20","cRLNumber"),s("2.5.29.21","cRLReason"),s("2.5.29.22","expirationDate"),s("2.5.29.23","instructionCode"),s("2.5.29.24","invalidityDate"),s("2.5.29.25","cRLDistributionPoints"),s("2.5.29.26","issuingDistributionPoint"),s("2.5.29.27","deltaCRLIndicator"),s("2.5.29.28","issuingDistributionPoint"),s("2.5.29.29","certificateIssuer"),s("2.5.29.30","nameConstraints"),a("2.5.29.31","cRLDistributionPoints"),a("2.5.29.32","certificatePolicies"),s("2.5.29.33","policyMappings"),s("2.5.29.34","policyConstraints"),a("2.5.29.35","authorityKeyIdentifier"),s("2.5.29.36","policyConstraints"),a("2.5.29.37","extKeyUsage"),s("2.5.29.46","freshestCRL"),s("2.5.29.54","inhibitAnyPolicy"),a("1.3.6.1.4.1.11129.2.4.2","timestampList"),a("1.3.6.1.5.5.7.1.1","authorityInfoAccess"),a("1.3.6.1.5.5.7.3.1","serverAuth"),a("1.3.6.1.5.5.7.3.2","clientAuth"),a("1.3.6.1.5.5.7.3.3","codeSigning"),a("1.3.6.1.5.5.7.3.4","emailProtection"),a("1.3.6.1.5.5.7.3.8","timeStamping")},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},function(t,e,r){"use strict";var i=r(21),n=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};t.exports=h;var a=r(17);a.inherits=r(11);var s=r(57),o=r(36);a.inherits(h,s);for(var u=n(o.prototype),c=0;c<u.length;c++){var l=u[c];h.prototype[l]||(h.prototype[l]=o.prototype[l])}function h(t){if(!(this instanceof h))return new h(t);s.call(this,t),o.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",f)}function f(){this.allowHalfOpen||this._writableState.ended||i.nextTick(p,this)}function p(t){t.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),h.prototype._destroy=function(t,e){this.push(null),this.end(),i.nextTick(e,t)}},function(t,e,r){var i=r(0);r(1);var n=t.exports=i.pem=i.pem||{};function a(t){for(var e=t.name+": ",r=[],i=function(t,e){return" "+e},n=0;n<t.values.length;++n)r.push(t.values[n].replace(/^(\S+\r\n)/,i));e+=r.join(",")+"\r\n";var a=0,s=-1;for(n=0;n<e.length;++n,++a)if(a>65&&-1!==s){var o=e[s];","===o?(++s,e=e.substr(0,s)+"\r\n "+e.substr(s)):e=e.substr(0,s)+"\r\n"+o+e.substr(s+1),a=n-s-1,s=-1,++n}else" "!==e[n]&&"\t"!==e[n]&&","!==e[n]||(s=n);return e}function s(t){return t.replace(/^\s+/,"")}n.encode=function(t,e){e=e||{};var r,n="-----BEGIN "+t.type+"-----\r\n";if(t.procType&&(n+=a(r={name:"Proc-Type",values:[String(t.procType.version),t.procType.type]})),t.contentDomain&&(n+=a(r={name:"Content-Domain",values:[t.contentDomain]})),t.dekInfo&&(r={name:"DEK-Info",values:[t.dekInfo.algorithm]},t.dekInfo.parameters&&r.values.push(t.dekInfo.parameters),n+=a(r)),t.headers)for(var s=0;s<t.headers.length;++s)n+=a(t.headers[s]);return t.procType&&(n+="\r\n"),n+=i.util.encode64(t.body,e.maxline||64)+"\r\n",n+="-----END "+t.type+"-----\r\n"},n.decode=function(t){for(var e,r=[],n=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,a=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,o=/\r?\n/;e=n.exec(t);){var u={type:e[1],procType:null,contentDomain:null,dekInfo:null,headers:[],body:i.util.decode64(e[3])};if(r.push(u),e[2]){for(var c=e[2].split(o),l=0;e&&l<c.length;){for(var h=c[l].replace(/\s+$/,""),f=l+1;f<c.length;++f){var p=c[f];if(!/\s/.test(p[0]))break;h+=p,l=f}if(e=h.match(a)){for(var d={name:e[1],values:[]},g=e[2].split(","),y=0;y<g.length;++y)d.values.push(s(g[y]));if(u.procType)if(u.contentDomain||"Content-Domain"!==d.name)if(u.dekInfo||"DEK-Info"!==d.name)u.headers.push(d);else{if(0===d.values.length)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');u.dekInfo={algorithm:g[0],parameters:g[1]||null}}else u.contentDomain=g[0]||"";else{if("Proc-Type"!==d.name)throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(2!==d.values.length)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');u.procType={version:g[0],type:g[1]}}}++l}if("ENCRYPTED"===u.procType&&!u.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(0===r.length)throw new Error("Invalid PEM formatted message.");return r}},function(t,e){t.exports=function(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}},function(t,e,r){var i=r(0);r(6),r(1),(t.exports=i.hmac=i.hmac||{}).create=function(){var t=null,e=null,r=null,n=null,a={start:function(a,s){if(null!==a)if("string"==typeof a){if(!((a=a.toLowerCase())in i.md.algorithms))throw new Error('Unknown hash algorithm "'+a+'"');e=i.md.algorithms[a].create()}else e=a;if(null===s)s=t;else{if("string"==typeof s)s=i.util.createBuffer(s);else if(i.util.isArray(s)){var o=s;s=i.util.createBuffer();for(var u=0;u<o.length;++u)s.putByte(o[u])}var c=s.length();c>e.blockLength&&(e.start(),e.update(s.bytes()),s=e.digest()),r=i.util.createBuffer(),n=i.util.createBuffer(),c=s.length();for(u=0;u<c;++u){o=s.at(u);r.putByte(54^o),n.putByte(92^o)}if(c<e.blockLength)for(o=e.blockLength-c,u=0;u<o;++u)r.putByte(54),n.putByte(92);t=s,r=r.bytes(),n=n.bytes()}e.start(),e.update(r)},update:function(t){e.update(t)},getMac:function(){var t=e.digest().bytes();return e.start(),e.update(n),e.update(t),e.digest()}};return a.digest=a.getMac,a}},function(t,e,r){var i=r(0);r(6),r(1);var n=t.exports=i.sha1=i.sha1||{};i.md.sha1=i.md.algorithms.sha1=n,n.create=function(){s||(a=String.fromCharCode(128),a+=i.util.fillString(String.fromCharCode(0),64),s=!0);var t=null,e=i.util.createBuffer(),r=new Array(80),n={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var r=n.messageLengthSize/4,a=0;a<r;++a)n.fullMessageLength.push(0);return e=i.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},n}};return n.start(),n.update=function(a,s){"utf8"===s&&(a=i.util.encodeUtf8(a));var u=a.length;n.messageLength+=u,u=[u/4294967296>>>0,u>>>0];for(var c=n.fullMessageLength.length-1;c>=0;--c)n.fullMessageLength[c]+=u[1],u[1]=u[0]+(n.fullMessageLength[c]/4294967296>>>0),n.fullMessageLength[c]=n.fullMessageLength[c]>>>0,u[0]=u[1]/4294967296>>>0;return e.putBytes(a),o(t,r,e),(e.read>2048||0===e.length())&&e.compact(),n},n.digest=function(){var s=i.util.createBuffer();s.putBytes(e.bytes());var u,c=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize&n.blockLength-1;s.putBytes(a.substr(0,n.blockLength-c));for(var l=8*n.fullMessageLength[0],h=0;h<n.fullMessageLength.length-1;++h)l+=(u=8*n.fullMessageLength[h+1])/4294967296>>>0,s.putInt32(l>>>0),l=u>>>0;s.putInt32(l);var f={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4};o(f,r,s);var p=i.util.createBuffer();return p.putInt32(f.h0),p.putInt32(f.h1),p.putInt32(f.h2),p.putInt32(f.h3),p.putInt32(f.h4),p},n};var a=null,s=!1;function o(t,e,r){for(var i,n,a,s,o,u,c,l=r.length();l>=64;){for(n=t.h0,a=t.h1,s=t.h2,o=t.h3,u=t.h4,c=0;c<16;++c)i=r.getInt32(),e[c]=i,i=(n<<5|n>>>27)+(o^a&(s^o))+u+1518500249+i,u=o,o=s,s=(a<<30|a>>>2)>>>0,a=n,n=i;for(;c<20;++c)i=(i=e[c-3]^e[c-8]^e[c-14]^e[c-16])<<1|i>>>31,e[c]=i,i=(n<<5|n>>>27)+(o^a&(s^o))+u+1518500249+i,u=o,o=s,s=(a<<30|a>>>2)>>>0,a=n,n=i;for(;c<32;++c)i=(i=e[c-3]^e[c-8]^e[c-14]^e[c-16])<<1|i>>>31,e[c]=i,i=(n<<5|n>>>27)+(a^s^o)+u+1859775393+i,u=o,o=s,s=(a<<30|a>>>2)>>>0,a=n,n=i;for(;c<40;++c)i=(i=e[c-6]^e[c-16]^e[c-28]^e[c-32])<<2|i>>>30,e[c]=i,i=(n<<5|n>>>27)+(a^s^o)+u+1859775393+i,u=o,o=s,s=(a<<30|a>>>2)>>>0,a=n,n=i;for(;c<60;++c)i=(i=e[c-6]^e[c-16]^e[c-28]^e[c-32])<<2|i>>>30,e[c]=i,i=(n<<5|n>>>27)+(a&s|o&(a^s))+u+2400959708+i,u=o,o=s,s=(a<<30|a>>>2)>>>0,a=n,n=i;for(;c<80;++c)i=(i=e[c-6]^e[c-16]^e[c-28]^e[c-32])<<2|i>>>30,e[c]=i,i=(n<<5|n>>>27)+(a^s^o)+u+3395469782+i,u=o,o=s,s=(a<<30|a>>>2)>>>0,a=n,n=i;t.h0=t.h0+n|0,t.h1=t.h1+a|0,t.h2=t.h2+s|0,t.h3=t.h3+o|0,t.h4=t.h4+u|0,l-=64}}},function(t,e,r){(function(t){function r(t){return Object.prototype.toString.call(t)}e.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===r(t)},e.isBoolean=function(t){return"boolean"==typeof t},e.isNull=function(t){return null===t},e.isNullOrUndefined=function(t){return null==t},e.isNumber=function(t){return"number"==typeof t},e.isString=function(t){return"string"==typeof t},e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=function(t){return void 0===t},e.isRegExp=function(t){return"[object RegExp]"===r(t)},e.isObject=function(t){return"object"==typeof t&&null!==t},e.isDate=function(t){return"[object Date]"===r(t)},e.isError=function(t){return"[object Error]"===r(t)||t instanceof Error},e.isFunction=function(t){return"function"==typeof t},e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=t.isBuffer}).call(this,r(3).Buffer)},function(t,e,r){var i=r(0);function n(t,e){i.cipher.registerAlgorithm(t,function(){return new i.des.Algorithm(t,e)})}r(27),r(39),r(1),t.exports=i.des=i.des||{},i.des.startEncrypting=function(t,e,r,i){var n=d({key:t,output:r,decrypt:!1,mode:i||(null===e?"ECB":"CBC")});return n.start(e),n},i.des.createEncryptionCipher=function(t,e){return d({key:t,output:null,decrypt:!1,mode:e})},i.des.startDecrypting=function(t,e,r,i){var n=d({key:t,output:r,decrypt:!0,mode:i||(null===e?"ECB":"CBC")});return n.start(e),n},i.des.createDecryptionCipher=function(t,e){return d({key:t,output:null,decrypt:!0,mode:e})},i.des.Algorithm=function(t,e){var r=this;r.name=t,r.mode=new e({blockSize:8,cipher:{encrypt:function(t,e){return p(r._keys,t,e,!1)},decrypt:function(t,e){return p(r._keys,t,e,!0)}}}),r._init=!1},i.des.Algorithm.prototype.initialize=function(t){if(!this._init){var e=i.util.createBuffer(t.key);if(0===this.name.indexOf("3DES")&&24!==e.length())throw new Error("Invalid Triple-DES key size: "+8*e.length());this._keys=function(t){for(var e,r=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],i=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],n=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],a=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],s=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],o=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],u=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],c=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],l=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],h=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],f=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],p=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],d=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],g=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],y=t.length()>8?3:1,m=[],v=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],_=0,b=0;b<y;b++){var C=t.getInt32(),E=t.getInt32();C^=(e=252645135&(C>>>4^E))<<4,C^=e=65535&((E^=e)>>>-16^C),C^=(e=858993459&(C>>>2^(E^=e<<-16)))<<2,C^=e=65535&((E^=e)>>>-16^C),C^=(e=1431655765&(C>>>1^(E^=e<<-16)))<<1,C^=e=16711935&((E^=e)>>>8^C),e=(C^=(e=1431655765&(C>>>1^(E^=e<<8)))<<1)<<8|(E^=e)>>>20&240,C=E<<24|E<<8&16711680|E>>>8&65280|E>>>24&240,E=e;for(var S=0;S<v.length;++S){v[S]?(C=C<<2|C>>>26,E=E<<2|E>>>26):(C=C<<1|C>>>27,E=E<<1|E>>>27);var w=r[(C&=-15)>>>28]|i[C>>>24&15]|n[C>>>20&15]|a[C>>>16&15]|s[C>>>12&15]|o[C>>>8&15]|u[C>>>4&15],A=c[(E&=-15)>>>28]|l[E>>>24&15]|h[E>>>20&15]|f[E>>>16&15]|p[E>>>12&15]|d[E>>>8&15]|g[E>>>4&15];e=65535&(A>>>16^w),m[_++]=w^e,m[_++]=A^e<<16}}return m}(e),this._init=!0}},n("DES-ECB",i.cipher.modes.ecb),n("DES-CBC",i.cipher.modes.cbc),n("DES-CFB",i.cipher.modes.cfb),n("DES-OFB",i.cipher.modes.ofb),n("DES-CTR",i.cipher.modes.ctr),n("3DES-ECB",i.cipher.modes.ecb),n("3DES-CBC",i.cipher.modes.cbc),n("3DES-CFB",i.cipher.modes.cfb),n("3DES-OFB",i.cipher.modes.ofb),n("3DES-CTR",i.cipher.modes.ctr);var a=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],s=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],o=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],u=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],c=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],l=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],h=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],f=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function p(t,e,r,i){var n,p,d=32===t.length?3:9;n=3===d?i?[30,-2,-2]:[0,32,2]:i?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var g=e[0],y=e[1];g^=(p=252645135&(g>>>4^y))<<4,g^=(p=65535&(g>>>16^(y^=p)))<<16,g^=p=858993459&((y^=p)>>>2^g),g^=p=16711935&((y^=p<<2)>>>8^g),g=(g^=(p=1431655765&(g>>>1^(y^=p<<8)))<<1)<<1|g>>>31,y=(y^=p)<<1|y>>>31;for(var m=0;m<d;m+=3){for(var v=n[m+1],_=n[m+2],b=n[m];b!=v;b+=_){var C=y^t[b],E=(y>>>4|y<<28)^t[b+1];p=g,g=y,y=p^(s[C>>>24&63]|u[C>>>16&63]|l[C>>>8&63]|f[63&C]|a[E>>>24&63]|o[E>>>16&63]|c[E>>>8&63]|h[63&E])}p=g,g=y,y=p}y=y>>>1|y<<31,y^=p=1431655765&((g=g>>>1|g<<31)>>>1^y),y^=(p=16711935&(y>>>8^(g^=p<<1)))<<8,y^=(p=858993459&(y>>>2^(g^=p)))<<2,y^=p=65535&((g^=p)>>>16^y),y^=p=252645135&((g^=p<<16)>>>4^y),g^=p<<4,r[0]=g,r[1]=y}function d(t){var e,r="DES-"+((t=t||{}).mode||"CBC").toUpperCase(),n=(e=t.decrypt?i.cipher.createDecipher(r,t.key):i.cipher.createCipher(r,t.key)).start;return e.start=function(t,r){var a=null;r instanceof i.util.ByteBuffer&&(a=r,r={}),(r=r||{}).output=a,r.iv=t,n.call(e,r)},e}},function(t,e,r){var i=r(0);if(r(5),r(20),r(10),r(47),r(48),r(4),r(1),void 0===n)var n=i.jsbn.BigInteger;var a=i.asn1;i.pki=i.pki||{},t.exports=i.pki.rsa=i.rsa=i.rsa||{};var s=i.pki,o=[6,4,2,4,2,4,6,2],u={name:"PrivateKeyInfo",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:a.Class.UNIVERSAL,type:a.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},c={name:"RSAPrivateKey",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},l={name:"RSAPublicKey",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},h=i.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:a.Class.UNIVERSAL,type:a.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},f=function(t){var e;if(!(t.algorithm in s.oids)){var r=new Error("Unknown message digest algorithm.");throw r.algorithm=t.algorithm,r}e=s.oids[t.algorithm];var i=a.oidToDer(e).getBytes(),n=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[]),o=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[]);o.value.push(a.create(a.Class.UNIVERSAL,a.Type.OID,!1,i)),o.value.push(a.create(a.Class.UNIVERSAL,a.Type.NULL,!1,""));var u=a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,t.digest().getBytes());return n.value.push(o),n.value.push(u),a.toDer(n).getBytes()},p=function(t,e,r){if(r)return t.modPow(e.e,e.n);if(!e.p||!e.q)return t.modPow(e.d,e.n);var a;e.dP||(e.dP=e.d.mod(e.p.subtract(n.ONE))),e.dQ||(e.dQ=e.d.mod(e.q.subtract(n.ONE))),e.qInv||(e.qInv=e.q.modInverse(e.p));do{a=new n(i.util.bytesToHex(i.random.getBytes(e.n.bitLength()/8)),16)}while(a.compareTo(e.n)>=0||!a.gcd(e.n).equals(n.ONE));for(var s=(t=t.multiply(a.modPow(e.e,e.n)).mod(e.n)).mod(e.p).modPow(e.dP,e.p),o=t.mod(e.q).modPow(e.dQ,e.q);s.compareTo(o)<0;)s=s.add(e.p);var u=s.subtract(o).multiply(e.qInv).mod(e.p).multiply(e.q).add(o);return u=u.multiply(a.modInverse(e.n)).mod(e.n)};function d(t,e,r){var n=i.util.createBuffer(),a=Math.ceil(e.n.bitLength()/8);if(t.length>a-11){var s=new Error("Message is too long for PKCS#1 v1.5 padding.");throw s.length=t.length,s.max=a-11,s}n.putByte(0),n.putByte(r);var o,u=a-3-t.length;if(0===r||1===r){o=0===r?0:255;for(var c=0;c<u;++c)n.putByte(o)}else for(;u>0;){var l=0,h=i.random.getBytes(u);for(c=0;c<u;++c)0===(o=h.charCodeAt(c))?++l:n.putByte(o);u=l}return n.putByte(0),n.putBytes(t),n}function g(t,e,r,n){var a=Math.ceil(e.n.bitLength()/8),s=i.util.createBuffer(t),o=s.getByte(),u=s.getByte();if(0!==o||r&&0!==u&&1!==u||!r&&2!=u||r&&0===u&&void 0===n)throw new Error("Encryption block is invalid.");var c=0;if(0===u){c=a-3-n;for(var l=0;l<c;++l)if(0!==s.getByte())throw new Error("Encryption block is invalid.")}else if(1===u)for(c=0;s.length()>1;){if(255!==s.getByte()){--s.read;break}++c}else if(2===u)for(c=0;s.length()>1;){if(0===s.getByte()){--s.read;break}++c}if(0!==s.getByte()||c!==a-3-s.length())throw new Error("Encryption block is invalid.");return s.getBytes()}function y(t){var e=t.toString(16);e[0]>="8"&&(e="00"+e);var r=i.util.hexToBytes(e);return r.length>1&&(0===r.charCodeAt(0)&&0==(128&r.charCodeAt(1))||255===r.charCodeAt(0)&&128==(128&r.charCodeAt(1)))?r.substr(1):r}function m(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}function v(t){return"undefined"!=typeof window&&"object"==typeof window.crypto&&"object"==typeof window.crypto.subtle&&"function"==typeof window.crypto.subtle[t]}function _(t){return"undefined"!=typeof window&&"object"==typeof window.msCrypto&&"object"==typeof window.msCrypto.subtle&&"function"==typeof window.msCrypto.subtle[t]}function b(t){for(var e=i.util.hexToBytes(t.toString(16)),r=new Uint8Array(e.length),n=0;n<e.length;++n)r[n]=e.charCodeAt(n);return r}s.rsa.encrypt=function(t,e,r){var a,s=r,o=Math.ceil(e.n.bitLength()/8);!1!==r&&!0!==r?(s=2===r,a=d(t,e,r)):(a=i.util.createBuffer()).putBytes(t);for(var u=new n(a.toHex(),16),c=p(u,e,s).toString(16),l=i.util.createBuffer(),h=o-Math.ceil(c.length/2);h>0;)l.putByte(0),--h;return l.putBytes(i.util.hexToBytes(c)),l.getBytes()},s.rsa.decrypt=function(t,e,r,a){var s=Math.ceil(e.n.bitLength()/8);if(t.length!==s){var o=new Error("Encrypted message length is invalid.");throw o.length=t.length,o.expected=s,o}var u=new n(i.util.createBuffer(t).toHex(),16);if(u.compareTo(e.n)>=0)throw new Error("Encrypted message is invalid.");for(var c=p(u,e,r).toString(16),l=i.util.createBuffer(),h=s-Math.ceil(c.length/2);h>0;)l.putByte(0),--h;return l.putBytes(i.util.hexToBytes(c)),!1!==a?g(l.getBytes(),e,r):l.getBytes()},s.rsa.createKeyPairGenerationState=function(t,e,r){"string"==typeof t&&(t=parseInt(t,10)),t=t||2048;var a,s=(r=r||{}).prng||i.random,o={nextBytes:function(t){for(var e=s.getBytesSync(t.length),r=0;r<t.length;++r)t[r]=e.charCodeAt(r)}},u=r.algorithm||"PRIMEINC";if("PRIMEINC"!==u)throw new Error("Invalid key generation algorithm: "+u);return(a={algorithm:u,state:0,bits:t,rng:o,eInt:e||65537,e:new n(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null}).e.fromInt(a.eInt),a},s.rsa.stepKeyPairGenerationState=function(t,e){"algorithm"in t||(t.algorithm="PRIMEINC");var r=new n(null);r.fromInt(30);for(var i,a=0,u=function(t,e){return t|e},c=+new Date,l=0;null===t.keys&&(e<=0||l<e);){if(0===t.state){var h=null===t.p?t.pBits:t.qBits,f=h-1;0===t.pqState?(t.num=new n(h,t.rng),t.num.testBit(f)||t.num.bitwiseTo(n.ONE.shiftLeft(f),u,t.num),t.num.dAddOffset(31-t.num.mod(r).byteValue(),0),a=0,++t.pqState):1===t.pqState?t.num.bitLength()>h?t.pqState=0:t.num.isProbablePrime(m(t.num.bitLength()))?++t.pqState:t.num.dAddOffset(o[a++%8],0):2===t.pqState?t.pqState=0===t.num.subtract(n.ONE).gcd(t.e).compareTo(n.ONE)?3:0:3===t.pqState&&(t.pqState=0,null===t.p?t.p=t.num:t.q=t.num,null!==t.p&&null!==t.q&&++t.state,t.num=null)}else if(1===t.state)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(2===t.state)t.p1=t.p.subtract(n.ONE),t.q1=t.q.subtract(n.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(3===t.state)0===t.phi.gcd(t.e).compareTo(n.ONE)?++t.state:(t.p=null,t.q=null,t.state=0);else if(4===t.state)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(5===t.state){var p=t.e.modInverse(t.phi);t.keys={privateKey:s.rsa.setPrivateKey(t.n,t.e,p,t.p,t.q,p.mod(t.p1),p.mod(t.q1),t.q.modInverse(t.p)),publicKey:s.rsa.setPublicKey(t.n,t.e)}}l+=(i=+new Date)-c,c=i}return null!==t.keys},s.rsa.generateKeyPair=function(t,e,r,o){if(1===arguments.length?"object"==typeof t?(r=t,t=void 0):"function"==typeof t&&(o=t,t=void 0):2===arguments.length?"number"==typeof t?"function"==typeof e?(o=e,e=void 0):"number"!=typeof e&&(r=e,e=void 0):(r=t,o=e,t=void 0,e=void 0):3===arguments.length&&("number"==typeof e?"function"==typeof r&&(o=r,r=void 0):(o=r,r=e,e=void 0)),r=r||{},void 0===t&&(t=r.bits||2048),void 0===e&&(e=r.e||65537),!i.options.usePureJavaScript&&o&&t>=256&&t<=16384&&(65537===e||3===e)){if(v("generateKey")&&v("exportKey"))return window.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:b(e),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(t){return window.crypto.subtle.exportKey("pkcs8",t.privateKey)}).then(void 0,function(t){o(t)}).then(function(t){if(t){var e=s.privateKeyFromAsn1(a.fromDer(i.util.createBuffer(t)));o(null,{privateKey:e,publicKey:s.setRsaPublicKey(e.n,e.e)})}});if(_("generateKey")&&_("exportKey")){var u=window.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:b(e),hash:{name:"SHA-256"}},!0,["sign","verify"]);return u.oncomplete=function(t){var e=t.target.result,r=window.msCrypto.subtle.exportKey("pkcs8",e.privateKey);r.oncomplete=function(t){var e=t.target.result,r=s.privateKeyFromAsn1(a.fromDer(i.util.createBuffer(e)));o(null,{privateKey:r,publicKey:s.setRsaPublicKey(r.n,r.e)})},r.onerror=function(t){o(t)}},void(u.onerror=function(t){o(t)})}}var c=s.rsa.createKeyPairGenerationState(t,e,r);if(!o)return s.rsa.stepKeyPairGenerationState(c,0),c.keys;!function(t,e,r){"function"==typeof e&&(r=e,e={});var a={algorithm:{name:(e=e||{}).algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};"prng"in e&&(a.prng=e.prng);function o(){u(t.pBits,function(e,i){return e?r(e):(t.p=i,null!==t.q?c(e,t.q):void u(t.qBits,c))})}function u(t,e){i.prime.generateProbablePrime(t,a,e)}function c(e,i){if(e)return r(e);if(t.q=i,t.p.compareTo(t.q)<0){var a=t.p;t.p=t.q,t.q=a}if(0!==t.p.subtract(n.ONE).gcd(t.e).compareTo(n.ONE))return t.p=null,void o();if(0!==t.q.subtract(n.ONE).gcd(t.e).compareTo(n.ONE))return t.q=null,void u(t.qBits,c);if(t.p1=t.p.subtract(n.ONE),t.q1=t.q.subtract(n.ONE),t.phi=t.p1.multiply(t.q1),0!==t.phi.gcd(t.e).compareTo(n.ONE))return t.p=t.q=null,void o();if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits)return t.q=null,void u(t.qBits,c);var l=t.e.modInverse(t.phi);t.keys={privateKey:s.rsa.setPrivateKey(t.n,t.e,l,t.p,t.q,l.mod(t.p1),l.mod(t.q1),t.q.modInverse(t.p)),publicKey:s.rsa.setPublicKey(t.n,t.e)},r(null,t.keys)}o()}(c,r,o)},s.setRsaPublicKey=s.rsa.setPublicKey=function(t,e){var r={n:t,e:e,encrypt:function(t,e,n){if("string"==typeof e?e=e.toUpperCase():void 0===e&&(e="RSAES-PKCS1-V1_5"),"RSAES-PKCS1-V1_5"===e)e={encode:function(t,e,r){return d(t,e,2).getBytes()}};else if("RSA-OAEP"===e||"RSAES-OAEP"===e)e={encode:function(t,e){return i.pkcs1.encode_rsa_oaep(e,t,n)}};else if(-1!==["RAW","NONE","NULL",null].indexOf(e))e={encode:function(t){return t}};else if("string"==typeof e)throw new Error('Unsupported encryption scheme: "'+e+'".');var a=e.encode(t,r,!0);return s.rsa.encrypt(a,r,!0)},verify:function(t,e,i){"string"==typeof i?i=i.toUpperCase():void 0===i&&(i="RSASSA-PKCS1-V1_5"),"RSASSA-PKCS1-V1_5"===i?i={verify:function(t,e){return e=g(e,r,!0),t===a.fromDer(e).value[1].value}}:"NONE"!==i&&"NULL"!==i&&null!==i||(i={verify:function(t,e){return t===(e=g(e,r,!0))}});var n=s.rsa.decrypt(e,r,!0,!1);return i.verify(t,n,r.n.bitLength())}};return r},s.setRsaPrivateKey=s.rsa.setPrivateKey=function(t,e,r,n,a,o,u,c){var l={n:t,e:e,d:r,p:n,q:a,dP:o,dQ:u,qInv:c,decrypt:function(t,e,r){"string"==typeof e?e=e.toUpperCase():void 0===e&&(e="RSAES-PKCS1-V1_5");var n=s.rsa.decrypt(t,l,!1,!1);if("RSAES-PKCS1-V1_5"===e)e={decode:g};else if("RSA-OAEP"===e||"RSAES-OAEP"===e)e={decode:function(t,e){return i.pkcs1.decode_rsa_oaep(e,t,r)}};else{if(-1===["RAW","NONE","NULL",null].indexOf(e))throw new Error('Unsupported encryption scheme: "'+e+'".');e={decode:function(t){return t}}}return e.decode(n,l,!1)},sign:function(t,e){var r=!1;"string"==typeof e&&(e=e.toUpperCase()),void 0===e||"RSASSA-PKCS1-V1_5"===e?(e={encode:f},r=1):"NONE"!==e&&"NULL"!==e&&null!==e||(e={encode:function(){return t}},r=1);var i=e.encode(t,l.n.bitLength());return s.rsa.encrypt(i,l,r)}};return l},s.wrapRsaPrivateKey=function(t){return a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,a.integerToDer(0).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(s.oids.rsaEncryption).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.NULL,!1,"")]),a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,a.toDer(t).getBytes())])},s.privateKeyFromAsn1=function(t){var e,r,o,l,h,f,p,d,g={},y=[];if(a.validate(t,u,g,y)&&(t=a.fromDer(i.util.createBuffer(g.privateKey))),g={},y=[],!a.validate(t,c,g,y)){var m=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw m.errors=y,m}return e=i.util.createBuffer(g.privateKeyModulus).toHex(),r=i.util.createBuffer(g.privateKeyPublicExponent).toHex(),o=i.util.createBuffer(g.privateKeyPrivateExponent).toHex(),l=i.util.createBuffer(g.privateKeyPrime1).toHex(),h=i.util.createBuffer(g.privateKeyPrime2).toHex(),f=i.util.createBuffer(g.privateKeyExponent1).toHex(),p=i.util.createBuffer(g.privateKeyExponent2).toHex(),d=i.util.createBuffer(g.privateKeyCoefficient).toHex(),s.setRsaPrivateKey(new n(e,16),new n(r,16),new n(o,16),new n(l,16),new n(h,16),new n(f,16),new n(p,16),new n(d,16))},s.privateKeyToAsn1=s.privateKeyToRSAPrivateKey=function(t){return a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,a.integerToDer(0).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,y(t.n)),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,y(t.e)),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,y(t.d)),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,y(t.p)),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,y(t.q)),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,y(t.dP)),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,y(t.dQ)),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,y(t.qInv))])},s.publicKeyFromAsn1=function(t){var e={},r=[];if(a.validate(t,h,e,r)){var o,u=a.derToOid(e.publicKeyOid);if(u!==s.oids.rsaEncryption)throw(o=new Error("Cannot read public key. Unknown OID.")).oid=u,o;t=e.rsaPublicKey}if(r=[],!a.validate(t,l,e,r))throw(o=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.")).errors=r,o;var c=i.util.createBuffer(e.publicKeyModulus).toHex(),f=i.util.createBuffer(e.publicKeyExponent).toHex();return s.setRsaPublicKey(new n(c,16),new n(f,16))},s.publicKeyToAsn1=s.publicKeyToSubjectPublicKeyInfo=function(t){return a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(s.oids.rsaEncryption).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.NULL,!1,"")]),a.create(a.Class.UNIVERSAL,a.Type.BITSTRING,!1,[s.publicKeyToRSAPublicKey(t)])])},s.publicKeyToRSAPublicKey=function(t){return a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,y(t.n)),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,y(t.e))])}},function(t,e,r){var i,n=r(0);t.exports=n.jsbn=n.jsbn||{};function a(t,e,r){this.data=[],null!=t&&("number"==typeof t?this.fromNumber(t,e,r):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function s(){return new a(null)}function o(t,e,r,i,n,a){for(var s=16383&e,o=e>>14;--a>=0;){var u=16383&this.data[t],c=this.data[t++]>>14,l=o*u+c*s;n=((u=s*u+((16383&l)<<14)+r.data[i]+n)>>28)+(l>>14)+o*c,r.data[i++]=268435455&u}return n}n.jsbn.BigInteger=a,"undefined"==typeof navigator?(a.prototype.am=o,i=28):"Microsoft Internet Explorer"==navigator.appName?(a.prototype.am=function(t,e,r,i,n,a){for(var s=32767&e,o=e>>15;--a>=0;){var u=32767&this.data[t],c=this.data[t++]>>15,l=o*u+c*s;n=((u=s*u+((32767&l)<<15)+r.data[i]+(1073741823&n))>>>30)+(l>>>15)+o*c+(n>>>30),r.data[i++]=1073741823&u}return n},i=30):"Netscape"!=navigator.appName?(a.prototype.am=function(t,e,r,i,n,a){for(;--a>=0;){var s=e*this.data[t++]+r.data[i]+n;n=Math.floor(s/67108864),r.data[i++]=67108863&s}return n},i=26):(a.prototype.am=o,i=28),a.prototype.DB=i,a.prototype.DM=(1<<i)-1,a.prototype.DV=1<<i;a.prototype.FV=Math.pow(2,52),a.prototype.F1=52-i,a.prototype.F2=2*i-52;var u,c,l="0123456789abcdefghijklmnopqrstuvwxyz",h=new Array;for(u="0".charCodeAt(0),c=0;c<=9;++c)h[u++]=c;for(u="a".charCodeAt(0),c=10;c<36;++c)h[u++]=c;for(u="A".charCodeAt(0),c=10;c<36;++c)h[u++]=c;function f(t){return l.charAt(t)}function p(t,e){var r=h[t.charCodeAt(e)];return null==r?-1:r}function d(t){var e=s();return e.fromInt(t),e}function g(t){var e,r=1;return 0!=(e=t>>>16)&&(t=e,r+=16),0!=(e=t>>8)&&(t=e,r+=8),0!=(e=t>>4)&&(t=e,r+=4),0!=(e=t>>2)&&(t=e,r+=2),0!=(e=t>>1)&&(t=e,r+=1),r}function y(t){this.m=t}function m(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function v(t,e){return t&e}function _(t,e){return t|e}function b(t,e){return t^e}function C(t,e){return t&~e}function E(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function S(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function w(){}function A(t){return t}function T(t){this.r2=s(),this.q3=s(),a.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}y.prototype.convert=function(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t},y.prototype.revert=function(t){return t},y.prototype.reduce=function(t){t.divRemTo(this.m,null,t)},y.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r),this.reduce(r)},y.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},m.prototype.convert=function(t){var e=s();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(a.ZERO)>0&&this.m.subTo(e,e),e},m.prototype.revert=function(t){var e=s();return t.copyTo(e),this.reduce(e),e},m.prototype.reduce=function(t){for(;t.t<=this.mt2;)t.data[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=32767&t.data[e],i=r*this.mpl+((r*this.mph+(t.data[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(r=e+this.m.t,t.data[r]+=this.m.am(0,i,t,e,0,this.m.t);t.data[r]>=t.DV;)t.data[r]-=t.DV,t.data[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)},m.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r),this.reduce(r)},m.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)},a.prototype.copyTo=function(t){for(var e=this.t-1;e>=0;--e)t.data[e]=this.data[e];t.t=this.t,t.s=this.s},a.prototype.fromInt=function(t){this.t=1,this.s=t<0?-1:0,t>0?this.data[0]=t:t<-1?this.data[0]=t+this.DV:this.t=0},a.prototype.fromString=function(t,e){var r;if(16==e)r=4;else if(8==e)r=3;else if(256==e)r=8;else if(2==e)r=1;else if(32==e)r=5;else{if(4!=e)return void this.fromRadix(t,e);r=2}this.t=0,this.s=0;for(var i=t.length,n=!1,s=0;--i>=0;){var o=8==r?255&t[i]:p(t,i);o<0?"-"==t.charAt(i)&&(n=!0):(n=!1,0==s?this.data[this.t++]=o:s+r>this.DB?(this.data[this.t-1]|=(o&(1<<this.DB-s)-1)<<s,this.data[this.t++]=o>>this.DB-s):this.data[this.t-1]|=o<<s,(s+=r)>=this.DB&&(s-=this.DB))}8==r&&0!=(128&t[0])&&(this.s=-1,s>0&&(this.data[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),n&&a.ZERO.subTo(this,this)},a.prototype.clamp=function(){for(var t=this.s&this.DM;this.t>0&&this.data[this.t-1]==t;)--this.t},a.prototype.dlShiftTo=function(t,e){var r;for(r=this.t-1;r>=0;--r)e.data[r+t]=this.data[r];for(r=t-1;r>=0;--r)e.data[r]=0;e.t=this.t+t,e.s=this.s},a.prototype.drShiftTo=function(t,e){for(var r=t;r<this.t;++r)e.data[r-t]=this.data[r];e.t=Math.max(this.t-t,0),e.s=this.s},a.prototype.lShiftTo=function(t,e){var r,i=t%this.DB,n=this.DB-i,a=(1<<n)-1,s=Math.floor(t/this.DB),o=this.s<<i&this.DM;for(r=this.t-1;r>=0;--r)e.data[r+s+1]=this.data[r]>>n|o,o=(this.data[r]&a)<<i;for(r=s-1;r>=0;--r)e.data[r]=0;e.data[s]=o,e.t=this.t+s+1,e.s=this.s,e.clamp()},a.prototype.rShiftTo=function(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t)e.t=0;else{var i=t%this.DB,n=this.DB-i,a=(1<<i)-1;e.data[0]=this.data[r]>>i;for(var s=r+1;s<this.t;++s)e.data[s-r-1]|=(this.data[s]&a)<<n,e.data[s-r]=this.data[s]>>i;i>0&&(e.data[this.t-r-1]|=(this.s&a)<<n),e.t=this.t-r,e.clamp()}},a.prototype.subTo=function(t,e){for(var r=0,i=0,n=Math.min(t.t,this.t);r<n;)i+=this.data[r]-t.data[r],e.data[r++]=i&this.DM,i>>=this.DB;if(t.t<this.t){for(i-=t.s;r<this.t;)i+=this.data[r],e.data[r++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;r<t.t;)i-=t.data[r],e.data[r++]=i&this.DM,i>>=this.DB;i-=t.s}e.s=i<0?-1:0,i<-1?e.data[r++]=this.DV+i:i>0&&(e.data[r++]=i),e.t=r,e.clamp()},a.prototype.multiplyTo=function(t,e){var r=this.abs(),i=t.abs(),n=r.t;for(e.t=n+i.t;--n>=0;)e.data[n]=0;for(n=0;n<i.t;++n)e.data[n+r.t]=r.am(0,i.data[n],e,n,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&a.ZERO.subTo(e,e)},a.prototype.squareTo=function(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t.data[r]=0;for(r=0;r<e.t-1;++r){var i=e.am(r,e.data[r],t,2*r,0,1);(t.data[r+e.t]+=e.am(r+1,2*e.data[r],t,2*r+1,i,e.t-r-1))>=e.DV&&(t.data[r+e.t]-=e.DV,t.data[r+e.t+1]=1)}t.t>0&&(t.data[t.t-1]+=e.am(r,e.data[r],t,2*r,0,1)),t.s=0,t.clamp()},a.prototype.divRemTo=function(t,e,r){var i=t.abs();if(!(i.t<=0)){var n=this.abs();if(n.t<i.t)return null!=e&&e.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=s());var o=s(),u=this.s,c=t.s,l=this.DB-g(i.data[i.t-1]);l>0?(i.lShiftTo(l,o),n.lShiftTo(l,r)):(i.copyTo(o),n.copyTo(r));var h=o.t,f=o.data[h-1];if(0!=f){var p=f*(1<<this.F1)+(h>1?o.data[h-2]>>this.F2:0),d=this.FV/p,y=(1<<this.F1)/p,m=1<<this.F2,v=r.t,_=v-h,b=null==e?s():e;for(o.dlShiftTo(_,b),r.compareTo(b)>=0&&(r.data[r.t++]=1,r.subTo(b,r)),a.ONE.dlShiftTo(h,b),b.subTo(o,o);o.t<h;)o.data[o.t++]=0;for(;--_>=0;){var C=r.data[--v]==f?this.DM:Math.floor(r.data[v]*d+(r.data[v-1]+m)*y);if((r.data[v]+=o.am(0,C,r,_,0,h))<C)for(o.dlShiftTo(_,b),r.subTo(b,r);r.data[v]<--C;)r.subTo(b,r)}null!=e&&(r.drShiftTo(h,e),u!=c&&a.ZERO.subTo(e,e)),r.t=h,r.clamp(),l>0&&r.rShiftTo(l,r),u<0&&a.ZERO.subTo(r,r)}}},a.prototype.invDigit=function(){if(this.t<1)return 0;var t=this.data[0];if(0==(1&t))return 0;var e=3&t;return(e=(e=(e=(e=e*(2-(15&t)*e)&15)*(2-(255&t)*e)&255)*(2-((65535&t)*e&65535))&65535)*(2-t*e%this.DV)%this.DV)>0?this.DV-e:-e},a.prototype.isEven=function(){return 0==(this.t>0?1&this.data[0]:this.s)},a.prototype.exp=function(t,e){if(t>4294967295||t<1)return a.ONE;var r=s(),i=s(),n=e.convert(this),o=g(t)-1;for(n.copyTo(r);--o>=0;)if(e.sqrTo(r,i),(t&1<<o)>0)e.mulTo(i,n,r);else{var u=r;r=i,i=u}return e.revert(r)},a.prototype.toString=function(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var r,i=(1<<e)-1,n=!1,a="",s=this.t,o=this.DB-s*this.DB%e;if(s-- >0)for(o<this.DB&&(r=this.data[s]>>o)>0&&(n=!0,a=f(r));s>=0;)o<e?(r=(this.data[s]&(1<<o)-1)<<e-o,r|=this.data[--s]>>(o+=this.DB-e)):(r=this.data[s]>>(o-=e)&i,o<=0&&(o+=this.DB,--s)),r>0&&(n=!0),n&&(a+=f(r));return n?a:"0"},a.prototype.negate=function(){var t=s();return a.ZERO.subTo(this,t),t},a.prototype.abs=function(){return this.s<0?this.negate():this},a.prototype.compareTo=function(t){var e=this.s-t.s;if(0!=e)return e;var r=this.t;if(0!=(e=r-t.t))return this.s<0?-e:e;for(;--r>=0;)if(0!=(e=this.data[r]-t.data[r]))return e;return 0},a.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+g(this.data[this.t-1]^this.s&this.DM)},a.prototype.mod=function(t){var e=s();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(a.ZERO)>0&&t.subTo(e,e),e},a.prototype.modPowInt=function(t,e){var r;return r=t<256||e.isEven()?new y(e):new m(e),this.exp(t,r)},a.ZERO=d(0),a.ONE=d(1),w.prototype.convert=A,w.prototype.revert=A,w.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r)},w.prototype.sqrTo=function(t,e){t.squareTo(e)},T.prototype.convert=function(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=s();return t.copyTo(e),this.reduce(e),e},T.prototype.revert=function(t){return t},T.prototype.reduce=function(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)},T.prototype.mulTo=function(t,e,r){t.multiplyTo(e,r),this.reduce(r)},T.prototype.sqrTo=function(t,e){t.squareTo(e),this.reduce(e)};var k=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],I=(1<<26)/k[k.length-1];a.prototype.chunkSize=function(t){return Math.floor(Math.LN2*this.DB/Math.log(t))},a.prototype.toRadix=function(t){if(null==t&&(t=10),0==this.signum()||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),i=d(r),n=s(),a=s(),o="";for(this.divRemTo(i,n,a);n.signum()>0;)o=(r+a.intValue()).toString(t).substr(1)+o,n.divRemTo(i,n,a);return a.intValue().toString(t)+o},a.prototype.fromRadix=function(t,e){this.fromInt(0),null==e&&(e=10);for(var r=this.chunkSize(e),i=Math.pow(e,r),n=!1,s=0,o=0,u=0;u<t.length;++u){var c=p(t,u);c<0?"-"==t.charAt(u)&&0==this.signum()&&(n=!0):(o=e*o+c,++s>=r&&(this.dMultiply(i),this.dAddOffset(o,0),s=0,o=0))}s>0&&(this.dMultiply(Math.pow(e,s)),this.dAddOffset(o,0)),n&&a.ZERO.subTo(this,this)},a.prototype.fromNumber=function(t,e,r){if("number"==typeof e)if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(a.ONE.shiftLeft(t-1),_,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(a.ONE.shiftLeft(t-1),this);else{var i=new Array,n=7&t;i.length=1+(t>>3),e.nextBytes(i),n>0?i[0]&=(1<<n)-1:i[0]=0,this.fromString(i,256)}},a.prototype.bitwiseTo=function(t,e,r){var i,n,a=Math.min(t.t,this.t);for(i=0;i<a;++i)r.data[i]=e(this.data[i],t.data[i]);if(t.t<this.t){for(n=t.s&this.DM,i=a;i<this.t;++i)r.data[i]=e(this.data[i],n);r.t=this.t}else{for(n=this.s&this.DM,i=a;i<t.t;++i)r.data[i]=e(n,t.data[i]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()},a.prototype.changeBit=function(t,e){var r=a.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r},a.prototype.addTo=function(t,e){for(var r=0,i=0,n=Math.min(t.t,this.t);r<n;)i+=this.data[r]+t.data[r],e.data[r++]=i&this.DM,i>>=this.DB;if(t.t<this.t){for(i+=t.s;r<this.t;)i+=this.data[r],e.data[r++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;r<t.t;)i+=t.data[r],e.data[r++]=i&this.DM,i>>=this.DB;i+=t.s}e.s=i<0?-1:0,i>0?e.data[r++]=i:i<-1&&(e.data[r++]=this.DV+i),e.t=r,e.clamp()},a.prototype.dMultiply=function(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()},a.prototype.dAddOffset=function(t,e){if(0!=t){for(;this.t<=e;)this.data[this.t++]=0;for(this.data[e]+=t;this.data[e]>=this.DV;)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}},a.prototype.multiplyLowerTo=function(t,e,r){var i,n=Math.min(this.t+t.t,e);for(r.s=0,r.t=n;n>0;)r.data[--n]=0;for(i=r.t-this.t;n<i;++n)r.data[n+this.t]=this.am(0,t.data[n],r,n,0,this.t);for(i=Math.min(t.t,e);n<i;++n)this.am(0,t.data[n],r,n,0,e-n);r.clamp()},a.prototype.multiplyUpperTo=function(t,e,r){--e;var i=r.t=this.t+t.t-e;for(r.s=0;--i>=0;)r.data[i]=0;for(i=Math.max(e-this.t,0);i<t.t;++i)r.data[this.t+i-e]=this.am(e-i,t.data[i],r,0,0,this.t+i-e);r.clamp(),r.drShiftTo(1,r)},a.prototype.modInt=function(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(0==e)r=this.data[0]%t;else for(var i=this.t-1;i>=0;--i)r=(e*r+this.data[i])%t;return r},a.prototype.millerRabin=function(t){var e=this.subtract(a.ONE),r=e.getLowestSetBit();if(r<=0)return!1;for(var i,n=e.shiftRight(r),s={nextBytes:function(t){for(var e=0;e<t.length;++e)t[e]=Math.floor(256*Math.random())}},o=0;o<t;++o){do{i=new a(this.bitLength(),s)}while(i.compareTo(a.ONE)<=0||i.compareTo(e)>=0);var u=i.modPow(n,this);if(0!=u.compareTo(a.ONE)&&0!=u.compareTo(e)){for(var c=1;c++<r&&0!=u.compareTo(e);)if(0==(u=u.modPowInt(2,this)).compareTo(a.ONE))return!1;if(0!=u.compareTo(e))return!1}}return!0},a.prototype.clone=function(){var t=s();return this.copyTo(t),t},a.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this.data[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this.data[0];if(0==this.t)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]},a.prototype.byteValue=function(){return 0==this.t?this.s:this.data[0]<<24>>24},a.prototype.shortValue=function(){return 0==this.t?this.s:this.data[0]<<16>>16},a.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this.data[0]<=0?0:1},a.prototype.toByteArray=function(){var t=this.t,e=new Array;e[0]=this.s;var r,i=this.DB-t*this.DB%8,n=0;if(t-- >0)for(i<this.DB&&(r=this.data[t]>>i)!=(this.s&this.DM)>>i&&(e[n++]=r|this.s<<this.DB-i);t>=0;)i<8?(r=(this.data[t]&(1<<i)-1)<<8-i,r|=this.data[--t]>>(i+=this.DB-8)):(r=this.data[t]>>(i-=8)&255,i<=0&&(i+=this.DB,--t)),0!=(128&r)&&(r|=-256),0==n&&(128&this.s)!=(128&r)&&++n,(n>0||r!=this.s)&&(e[n++]=r);return e},a.prototype.equals=function(t){return 0==this.compareTo(t)},a.prototype.min=function(t){return this.compareTo(t)<0?this:t},a.prototype.max=function(t){return this.compareTo(t)>0?this:t},a.prototype.and=function(t){var e=s();return this.bitwiseTo(t,v,e),e},a.prototype.or=function(t){var e=s();return this.bitwiseTo(t,_,e),e},a.prototype.xor=function(t){var e=s();return this.bitwiseTo(t,b,e),e},a.prototype.andNot=function(t){var e=s();return this.bitwiseTo(t,C,e),e},a.prototype.not=function(){for(var t=s(),e=0;e<this.t;++e)t.data[e]=this.DM&~this.data[e];return t.t=this.t,t.s=~this.s,t},a.prototype.shiftLeft=function(t){var e=s();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e},a.prototype.shiftRight=function(t){var e=s();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e},a.prototype.getLowestSetBit=function(){for(var t=0;t<this.t;++t)if(0!=this.data[t])return t*this.DB+E(this.data[t]);return this.s<0?this.t*this.DB:-1},a.prototype.bitCount=function(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=S(this.data[r]^e);return t},a.prototype.testBit=function(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this.data[e]&1<<t%this.DB)},a.prototype.setBit=function(t){return this.changeBit(t,_)},a.prototype.clearBit=function(t){return this.changeBit(t,C)},a.prototype.flipBit=function(t){return this.changeBit(t,b)},a.prototype.add=function(t){var e=s();return this.addTo(t,e),e},a.prototype.subtract=function(t){var e=s();return this.subTo(t,e),e},a.prototype.multiply=function(t){var e=s();return this.multiplyTo(t,e),e},a.prototype.divide=function(t){var e=s();return this.divRemTo(t,e,null),e},a.prototype.remainder=function(t){var e=s();return this.divRemTo(t,null,e),e},a.prototype.divideAndRemainder=function(t){var e=s(),r=s();return this.divRemTo(t,e,r),new Array(e,r)},a.prototype.modPow=function(t,e){var r,i,n=t.bitLength(),a=d(1);if(n<=0)return a;r=n<18?1:n<48?3:n<144?4:n<768?5:6,i=n<8?new y(e):e.isEven()?new T(e):new m(e);var o=new Array,u=3,c=r-1,l=(1<<r)-1;if(o[1]=i.convert(this),r>1){var h=s();for(i.sqrTo(o[1],h);u<=l;)o[u]=s(),i.mulTo(h,o[u-2],o[u]),u+=2}var f,p,v=t.t-1,_=!0,b=s();for(n=g(t.data[v])-1;v>=0;){for(n>=c?f=t.data[v]>>n-c&l:(f=(t.data[v]&(1<<n+1)-1)<<c-n,v>0&&(f|=t.data[v-1]>>this.DB+n-c)),u=r;0==(1&f);)f>>=1,--u;if((n-=u)<0&&(n+=this.DB,--v),_)o[f].copyTo(a),_=!1;else{for(;u>1;)i.sqrTo(a,b),i.sqrTo(b,a),u-=2;u>0?i.sqrTo(a,b):(p=a,a=b,b=p),i.mulTo(b,o[f],a)}for(;v>=0&&0==(t.data[v]&1<<n);)i.sqrTo(a,b),p=a,a=b,b=p,--n<0&&(n=this.DB-1,--v)}return i.revert(a)},a.prototype.modInverse=function(t){var e=t.isEven();if(this.isEven()&&e||0==t.signum())return a.ZERO;for(var r=t.clone(),i=this.clone(),n=d(1),s=d(0),o=d(0),u=d(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),e?(n.isEven()&&s.isEven()||(n.addTo(this,n),s.subTo(t,s)),n.rShiftTo(1,n)):s.isEven()||s.subTo(t,s),s.rShiftTo(1,s);for(;i.isEven();)i.rShiftTo(1,i),e?(o.isEven()&&u.isEven()||(o.addTo(this,o),u.subTo(t,u)),o.rShiftTo(1,o)):u.isEven()||u.subTo(t,u),u.rShiftTo(1,u);r.compareTo(i)>=0?(r.subTo(i,r),e&&n.subTo(o,n),s.subTo(u,s)):(i.subTo(r,i),e&&o.subTo(n,o),u.subTo(s,u))}return 0!=i.compareTo(a.ONE)?a.ZERO:u.compareTo(t)>=0?u.subtract(t):u.signum()<0?(u.addTo(t,u),u.signum()<0?u.add(t):u):u},a.prototype.pow=function(t){return this.exp(t,new w)},a.prototype.gcd=function(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var i=e;e=r,r=i}var n=e.getLowestSetBit(),a=r.getLowestSetBit();if(a<0)return e;for(n<a&&(a=n),a>0&&(e.rShiftTo(a,e),r.rShiftTo(a,r));e.signum()>0;)(n=e.getLowestSetBit())>0&&e.rShiftTo(n,e),(n=r.getLowestSetBit())>0&&r.rShiftTo(n,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return a>0&&r.lShiftTo(a,r),r},a.prototype.isProbablePrime=function(t){var e,r=this.abs();if(1==r.t&&r.data[0]<=k[k.length-1]){for(e=0;e<k.length;++e)if(r.data[0]==k[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<k.length;){for(var i=k[e],n=e+1;n<k.length&&i<I;)i*=k[n++];for(i=r.modInt(i);e<n;)if(i%k[e++]==0)return!1}return r.millerRabin(t)}},function(t,e,r){"use strict";(function(e){!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports={nextTick:function(t,r,i,n){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var a,s,o=arguments.length;switch(o){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick(function(){t.call(null,r)});case 3:return e.nextTick(function(){t.call(null,r,i)});case 4:return e.nextTick(function(){t.call(null,r,i,n)});default:for(a=new Array(o-1),s=0;s<a.length;)a[s++]=arguments[s];return e.nextTick(function(){t.apply(null,a)})}}}:t.exports=e}).call(this,r(7))},function(t,e,r){var i=r(3),n=i.Buffer;function a(t,e){for(var r in t)e[r]=t[r]}function s(t,e,r){return n(t,e,r)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=i:(a(i,e),e.Buffer=s),a(n,s),s.from=function(t,e,r){if("number"==typeof t)throw new TypeError("Argument must not be a number");return n(t,e,r)},s.alloc=function(t,e,r){if("number"!=typeof t)throw new TypeError("Argument must be a number");var i=n(t);return void 0!==e?"string"==typeof r?i.fill(e,r):i.fill(e):i.fill(0),i},s.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n(t)},s.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i.SlowBuffer(t)}},function(t,e,r){t.exports=r(0),r(9),r(75),r(5),r(27),r(52),r(18),r(77),r(15),r(78),r(54),r(79),r(51),r(29),r(13),r(47),r(49),r(80),r(41),r(48),r(45),r(31),r(4),r(46),r(81),r(82),r(40),r(1)},function(t,e,r){(function(t,r){/** @license zlib.js 2012 - imaya [ https://github.com/imaya/zlib.js ] The MIT License */(function(){"use strict";function i(t){throw t}var n=void 0,a=!0,s="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array&&"undefined"!=typeof DataView;function o(t,e){this.index="number"==typeof e?e:0,this.m=0,this.buffer=t instanceof(s?Uint8Array:Array)?t:new(s?Uint8Array:Array)(32768),2*this.buffer.length<=this.index&&i(Error("invalid index")),this.buffer.length<=this.index&&this.f()}o.prototype.f=function(){var t,e=this.buffer,r=e.length,i=new(s?Uint8Array:Array)(r<<1);if(s)i.set(e);else for(t=0;t<r;++t)i[t]=e[t];return this.buffer=i},o.prototype.d=function(t,e,r){var i,n=this.buffer,a=this.index,s=this.m,o=n[a];if(r&&1<e&&(t=8<e?(p[255&t]<<24|p[t>>>8&255]<<16|p[t>>>16&255]<<8|p[t>>>24&255])>>32-e:p[t]>>8-e),8>e+s)o=o<<e|t,s+=e;else for(i=0;i<e;++i)o=o<<1|t>>e-i-1&1,8==++s&&(s=0,n[a++]=p[o],o=0,a===n.length&&(n=this.f()));n[a]=o,this.buffer=n,this.m=s,this.index=a},o.prototype.finish=function(){var t,e=this.buffer,r=this.index;return 0<this.m&&(e[r]<<=8-this.m,e[r]=p[e[r]],r++),s?t=e.subarray(0,r):(e.length=r,t=e),t};var u,c=new(s?Uint8Array:Array)(256);for(u=0;256>u;++u){for(var l=f=u,h=7,f=f>>>1;f;f>>>=1)l<<=1,l|=1&f,--h;c[u]=(l<<h&255)>>>0}var p=c;function d(t,e,r){var i,n="number"==typeof e?e:e=0,a="number"==typeof r?r:t.length;for(i=-1,n=7&a;n--;++e)i=i>>>8^y[255&(i^t[e])];for(n=a>>3;n--;e+=8)i=(i=(i=(i=(i=(i=(i=(i=i>>>8^y[255&(i^t[e])])>>>8^y[255&(i^t[e+1])])>>>8^y[255&(i^t[e+2])])>>>8^y[255&(i^t[e+3])])>>>8^y[255&(i^t[e+4])])>>>8^y[255&(i^t[e+5])])>>>8^y[255&(i^t[e+6])])>>>8^y[255&(i^t[e+7])];return(4294967295^i)>>>0}var g=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],y=s?new Uint32Array(g):g;function m(){}function v(t){this.buffer=new(s?Uint16Array:Array)(2*t),this.length=0}function _(t){var e,r,i,n,a,o,u,c,l,h,f=t.length,p=0,d=Number.POSITIVE_INFINITY;for(c=0;c<f;++c)t[c]>p&&(p=t[c]),t[c]<d&&(d=t[c]);for(e=1<<p,r=new(s?Uint32Array:Array)(e),i=1,n=0,a=2;i<=p;){for(c=0;c<f;++c)if(t[c]===i){for(o=0,u=n,l=0;l<i;++l)o=o<<1|1&u,u>>=1;for(h=i<<16|c,l=o;l<e;l+=a)r[l]=h;++n}++i,n<<=1,a<<=1}return[r,p,d]}function b(t,e){this.k=E,this.F=0,this.input=s&&t instanceof Array?new Uint8Array(t):t,this.b=0,e&&(e.lazy&&(this.F=e.lazy),"number"==typeof e.compressionType&&(this.k=e.compressionType),e.outputBuffer&&(this.a=s&&e.outputBuffer instanceof Array?new Uint8Array(e.outputBuffer):e.outputBuffer),"number"==typeof e.outputIndex&&(this.b=e.outputIndex)),this.a||(this.a=new(s?Uint8Array:Array)(32768))}v.prototype.getParent=function(t){return 2*((t-2)/4|0)},v.prototype.push=function(t,e){var r,i,n,a=this.buffer;for(r=this.length,a[this.length++]=e,a[this.length++]=t;0<r&&(i=this.getParent(r),a[r]>a[i]);)n=a[r],a[r]=a[i],a[i]=n,n=a[r+1],a[r+1]=a[i+1],a[i+1]=n,r=i;return this.length},v.prototype.pop=function(){var t,e,r,i,n,a=this.buffer;for(e=a[0],t=a[1],this.length-=2,a[0]=a[this.length],a[1]=a[this.length+1],n=0;!((i=2*n+2)>=this.length)&&(i+2<this.length&&a[i+2]>a[i]&&(i+=2),a[i]>a[n]);)r=a[n],a[n]=a[i],a[i]=r,r=a[n+1],a[n+1]=a[i+1],a[i+1]=r,n=i;return{index:t,value:e,length:this.length}};var C,E=2,S={NONE:0,L:1,t:E,X:3},w=[];for(C=0;288>C;C++)switch(a){case 143>=C:w.push([C+48,8]);break;case 255>=C:w.push([C-144+400,9]);break;case 279>=C:w.push([C-256+0,7]);break;case 287>=C:w.push([C-280+192,8]);break;default:i("invalid literal: "+C)}b.prototype.h=function(){var t,e,r,u,c=this.input;switch(this.k){case 0:for(r=0,u=c.length;r<u;){var l,h,f,p=e=s?c.subarray(r,r+65535):c.slice(r,r+65535),d=(r+=e.length)===u,g=n,y=n,m=this.a,v=this.b;if(s){for(m=new Uint8Array(this.a.buffer);m.length<=v+p.length+5;)m=new Uint8Array(m.length<<1);m.set(this.a)}if(l=d?1:0,m[v++]=0|l,f=65536+~(h=p.length)&65535,m[v++]=255&h,m[v++]=h>>>8&255,m[v++]=255&f,m[v++]=f>>>8&255,s)m.set(p,v),v+=p.length,m=m.subarray(0,v);else{for(g=0,y=p.length;g<y;++g)m[v++]=p[g];m.length=v}this.b=v,this.a=m}break;case 1:var _=new o(s?new Uint8Array(this.a.buffer):this.a,this.b);_.d(1,1,a),_.d(1,2,a);var b,C,S,A=k(this,c);for(b=0,C=A.length;b<C;b++)if(S=A[b],o.prototype.d.apply(_,w[S]),256<S)_.d(A[++b],A[++b],a),_.d(A[++b],5),_.d(A[++b],A[++b],a);else if(256===S)break;this.a=_.finish(),this.b=this.a.length;break;case E:var T,I,N,U,L,P,D,x,O,M,V,K,F,z,j,G=new o(s?new Uint8Array(this.a.buffer):this.a,this.b),H=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],q=Array(19);for(T=E,G.d(1,1,a),G.d(T,2,a),I=k(this,c),D=R(P=B(this.U,15)),O=R(x=B(this.T,7)),N=286;257<N&&0===P[N-1];N--);for(U=30;1<U&&0===x[U-1];U--);var W,Y,Q,X,Z,J,$=N,tt=U,et=new(s?Uint32Array:Array)($+tt),rt=new(s?Uint32Array:Array)(316),it=new(s?Uint8Array:Array)(19);for(W=Y=0;W<$;W++)et[Y++]=P[W];for(W=0;W<tt;W++)et[Y++]=x[W];if(!s)for(W=0,X=it.length;W<X;++W)it[W]=0;for(W=Z=0,X=et.length;W<X;W+=Y){for(Y=1;W+Y<X&&et[W+Y]===et[W];++Y);if(Q=Y,0===et[W])if(3>Q)for(;0<Q--;)rt[Z++]=0,it[0]++;else for(;0<Q;)(J=138>Q?Q:138)>Q-3&&J<Q&&(J=Q-3),10>=J?(rt[Z++]=17,rt[Z++]=J-3,it[17]++):(rt[Z++]=18,rt[Z++]=J-11,it[18]++),Q-=J;else if(rt[Z++]=et[W],it[et[W]]++,3>--Q)for(;0<Q--;)rt[Z++]=et[W],it[et[W]]++;else for(;0<Q;)(J=6>Q?Q:6)>Q-3&&J<Q&&(J=Q-3),rt[Z++]=16,rt[Z++]=J-3,it[16]++,Q-=J}for(t=s?rt.subarray(0,Z):rt.slice(0,Z),M=B(it,7),z=0;19>z;z++)q[z]=M[H[z]];for(L=19;4<L&&0===q[L-1];L--);for(V=R(M),G.d(N-257,5,a),G.d(U-1,5,a),G.d(L-4,4,a),z=0;z<L;z++)G.d(q[z],3,a);for(z=0,j=t.length;z<j;z++)if(K=t[z],G.d(V[K],M[K],a),16<=K){switch(z++,K){case 16:F=2;break;case 17:F=3;break;case 18:F=7;break;default:i("invalid code: "+K)}G.d(t[z],F,a)}var nt,at,st,ot,ut,ct,lt,ht,ft=[D,P],pt=[O,x];for(ut=ft[0],ct=ft[1],lt=pt[0],ht=pt[1],nt=0,at=I.length;nt<at;++nt)if(st=I[nt],G.d(ut[st],ct[st],a),256<st)G.d(I[++nt],I[++nt],a),ot=I[++nt],G.d(lt[ot],ht[ot],a),G.d(I[++nt],I[++nt],a);else if(256===st)break;this.a=G.finish(),this.b=this.a.length;break;default:i("invalid compression type")}return this.a};var A=function(){function t(t){switch(a){case 3===t:return[257,t-3,0];case 4===t:return[258,t-4,0];case 5===t:return[259,t-5,0];case 6===t:return[260,t-6,0];case 7===t:return[261,t-7,0];case 8===t:return[262,t-8,0];case 9===t:return[263,t-9,0];case 10===t:return[264,t-10,0];case 12>=t:return[265,t-11,1];case 14>=t:return[266,t-13,1];case 16>=t:return[267,t-15,1];case 18>=t:return[268,t-17,1];case 22>=t:return[269,t-19,2];case 26>=t:return[270,t-23,2];case 30>=t:return[271,t-27,2];case 34>=t:return[272,t-31,2];case 42>=t:return[273,t-35,3];case 50>=t:return[274,t-43,3];case 58>=t:return[275,t-51,3];case 66>=t:return[276,t-59,3];case 82>=t:return[277,t-67,4];case 98>=t:return[278,t-83,4];case 114>=t:return[279,t-99,4];case 130>=t:return[280,t-115,4];case 162>=t:return[281,t-131,5];case 194>=t:return[282,t-163,5];case 226>=t:return[283,t-195,5];case 257>=t:return[284,t-227,5];case 258===t:return[285,t-258,0];default:i("invalid length: "+t)}}var e,r,n=[];for(e=3;258>=e;e++)r=t(e),n[e]=r[2]<<24|r[1]<<16|r[0];return n}(),T=s?new Uint32Array(A):A;function k(t,e){function r(t,e){var r,n,s,o,u=t.N,c=[],l=0;switch(r=T[t.length],c[l++]=65535&r,c[l++]=r>>16&255,c[l++]=r>>24,a){case 1===u:n=[0,u-1,0];break;case 2===u:n=[1,u-2,0];break;case 3===u:n=[2,u-3,0];break;case 4===u:n=[3,u-4,0];break;case 6>=u:n=[4,u-5,1];break;case 8>=u:n=[5,u-7,1];break;case 12>=u:n=[6,u-9,2];break;case 16>=u:n=[7,u-13,2];break;case 24>=u:n=[8,u-17,3];break;case 32>=u:n=[9,u-25,3];break;case 48>=u:n=[10,u-33,4];break;case 64>=u:n=[11,u-49,4];break;case 96>=u:n=[12,u-65,5];break;case 128>=u:n=[13,u-97,5];break;case 192>=u:n=[14,u-129,6];break;case 256>=u:n=[15,u-193,6];break;case 384>=u:n=[16,u-257,7];break;case 512>=u:n=[17,u-385,7];break;case 768>=u:n=[18,u-513,8];break;case 1024>=u:n=[19,u-769,8];break;case 1536>=u:n=[20,u-1025,9];break;case 2048>=u:n=[21,u-1537,9];break;case 3072>=u:n=[22,u-2049,10];break;case 4096>=u:n=[23,u-3073,10];break;case 6144>=u:n=[24,u-4097,11];break;case 8192>=u:n=[25,u-6145,11];break;case 12288>=u:n=[26,u-8193,12];break;case 16384>=u:n=[27,u-12289,12];break;case 24576>=u:n=[28,u-16385,13];break;case 32768>=u:n=[29,u-24577,13];break;default:i("invalid distance")}for(r=n,c[l++]=r[0],c[l++]=r[1],c[l++]=r[2],s=0,o=c.length;s<o;++s)m[v++]=c[s];b[c[0]]++,C[c[3]]++,_=t.length+e-1,d=null}var o,u,c,l,h,f,p,d,g,y={},m=s?new Uint16Array(2*e.length):[],v=0,_=0,b=new(s?Uint32Array:Array)(286),C=new(s?Uint32Array:Array)(30),E=t.F;if(!s){for(c=0;285>=c;)b[c++]=0;for(c=0;29>=c;)C[c++]=0}for(b[256]=1,o=0,u=e.length;o<u;++o){for(c=h=0,l=3;c<l&&o+c!==u;++c)h=h<<8|e[o+c];if(y[h]===n&&(y[h]=[]),f=y[h],!(0<_--)){for(;0<f.length&&32768<o-f[0];)f.shift();if(o+3>=u){for(d&&r(d,-1),c=0,l=u-o;c<l;++c)g=e[o+c],m[v++]=g,++b[g];break}0<f.length?(p=I(e,o,f),d?d.length<p.length?(g=e[o-1],m[v++]=g,++b[g],r(p,0)):r(d,-1):p.length<E?d=p:r(p,0)):d?r(d,-1):(g=e[o],m[v++]=g,++b[g])}f.push(o)}return m[v++]=256,b[256]++,t.U=b,t.T=C,s?m.subarray(0,v):m}function I(t,e,r){var i,n,a,s,o,u,c=0,l=t.length;s=0,u=r.length;t:for(;s<u;s++){if(i=r[u-s-1],a=3,3<c){for(o=c;3<o;o--)if(t[i+o-1]!==t[e+o-1])continue t;a=c}for(;258>a&&e+a<l&&t[i+a]===t[e+a];)++a;if(a>c&&(n=i,c=a),258===a)break}return new function(t,e){this.length=t,this.N=e}(c,e-n)}function B(t,e){var r,i,n,a,o,u=t.length,c=new v(572),l=new(s?Uint8Array:Array)(u);if(!s)for(a=0;a<u;a++)l[a]=0;for(a=0;a<u;++a)0<t[a]&&c.push(a,t[a]);if(r=Array(c.length/2),i=new(s?Uint32Array:Array)(c.length/2),1===r.length)return l[c.pop().index]=1,l;for(a=0,o=c.length/2;a<o;++a)r[a]=c.pop(),i[a]=r[a].value;for(n=function(t,e,r){function i(t){var r=d[t][g[t]];r===e?(i(t+1),i(t+1)):--f[r],++g[t]}var n,a,o,u,c,l=new(s?Uint16Array:Array)(r),h=new(s?Uint8Array:Array)(r),f=new(s?Uint8Array:Array)(e),p=Array(r),d=Array(r),g=Array(r),y=(1<<r)-e,m=1<<r-1;for(l[r-1]=e,a=0;a<r;++a)y<m?h[a]=0:(h[a]=1,y-=m),y<<=1,l[r-2-a]=(l[r-1-a]/2|0)+e;for(l[0]=h[0],p[0]=Array(l[0]),d[0]=Array(l[0]),a=1;a<r;++a)l[a]>2*l[a-1]+h[a]&&(l[a]=2*l[a-1]+h[a]),p[a]=Array(l[a]),d[a]=Array(l[a]);for(n=0;n<e;++n)f[n]=r;for(o=0;o<l[r-1];++o)p[r-1][o]=t[o],d[r-1][o]=o;for(n=0;n<r;++n)g[n]=0;for(1===h[r-1]&&(--f[0],++g[r-1]),a=r-2;0<=a;--a){for(u=n=0,c=g[a+1],o=0;o<l[a];o++)(u=p[a+1][c]+p[a+1][c+1])>t[n]?(p[a][o]=u,d[a][o]=e,c+=2):(p[a][o]=t[n],d[a][o]=n,++n);g[a]=0,1===h[a]&&i(a)}return f}(i,i.length,e),a=0,o=r.length;a<o;++a)l[r[a].index]=n[a];return l}function R(t){var e,r,i,n,a=new(s?Uint16Array:Array)(t.length),o=[],u=[],c=0;for(e=0,r=t.length;e<r;e++)o[t[e]]=1+(0|o[t[e]]);for(e=1,r=16;e<=r;e++)u[e]=c,c+=0|o[e],c<<=1;for(e=0,r=t.length;e<r;e++)for(c=u[t[e]],u[t[e]]+=1,i=a[e]=0,n=t[e];i<n;i++)a[e]=a[e]<<1|1&c,c>>>=1;return a}function N(t,e){this.input=t,this.b=this.c=0,this.g={},e&&(e.flags&&(this.g=e.flags),"string"==typeof e.filename&&(this.filename=e.filename),"string"==typeof e.comment&&(this.w=e.comment),e.deflateOptions&&(this.l=e.deflateOptions)),this.l||(this.l={})}N.prototype.h=function(){var t,e,r,i,a,o,u,c,l=new(s?Uint8Array:Array)(32768),h=0,f=this.input,p=this.c,g=this.filename,y=this.w;if(l[h++]=31,l[h++]=139,l[h++]=8,t=0,this.g.fname&&(t|=P),this.g.fcomment&&(t|=D),this.g.fhcrc&&(t|=L),l[h++]=t,e=(Date.now?Date.now():+new Date)/1e3|0,l[h++]=255&e,l[h++]=e>>>8&255,l[h++]=e>>>16&255,l[h++]=e>>>24&255,l[h++]=0,l[h++]=U,this.g.fname!==n){for(u=0,c=g.length;u<c;++u)255<(o=g.charCodeAt(u))&&(l[h++]=o>>>8&255),l[h++]=255&o;l[h++]=0}if(this.g.comment){for(u=0,c=y.length;u<c;++u)255<(o=y.charCodeAt(u))&&(l[h++]=o>>>8&255),l[h++]=255&o;l[h++]=0}return this.g.fhcrc&&(r=65535&d(l,0,h),l[h++]=255&r,l[h++]=r>>>8&255),this.l.outputBuffer=l,this.l.outputIndex=h,l=(a=new b(f,this.l)).h(),h=a.b,s&&(h+8>l.buffer.byteLength?(this.a=new Uint8Array(h+8),this.a.set(new Uint8Array(l.buffer)),l=this.a):l=new Uint8Array(l.buffer)),i=d(f,n,n),l[h++]=255&i,l[h++]=i>>>8&255,l[h++]=i>>>16&255,l[h++]=i>>>24&255,c=f.length,l[h++]=255&c,l[h++]=c>>>8&255,l[h++]=c>>>16&255,l[h++]=c>>>24&255,this.c=p,s&&h<l.length&&(this.a=l=l.subarray(0,h)),l};var U=255,L=2,P=8,D=16;function x(t,e){switch(this.o=[],this.p=32768,this.e=this.j=this.c=this.s=0,this.input=s?new Uint8Array(t):t,this.u=!1,this.q=M,this.K=!1,!e&&(e={})||(e.index&&(this.c=e.index),e.bufferSize&&(this.p=e.bufferSize),e.bufferType&&(this.q=e.bufferType),e.resize&&(this.K=e.resize)),this.q){case O:this.b=32768,this.a=new(s?Uint8Array:Array)(32768+this.p+258);break;case M:this.b=0,this.a=new(s?Uint8Array:Array)(this.p),this.f=this.S,this.z=this.O,this.r=this.Q;break;default:i(Error("invalid inflate mode"))}}var O=0,M=1;x.prototype.i=function(){for(;!this.u;){var t=it(this,3);switch(1&t&&(this.u=a),t>>>=1){case 0:var e=this.input,r=this.c,o=this.a,u=this.b,c=e.length,l=n,h=o.length,f=n;switch(this.e=this.j=0,r+1>=c&&i(Error("invalid uncompressed block header: LEN")),l=e[r++]|e[r++]<<8,r+1>=c&&i(Error("invalid uncompressed block header: NLEN")),l===~(e[r++]|e[r++]<<8)&&i(Error("invalid uncompressed block header: length verify")),r+l>e.length&&i(Error("input buffer is broken")),this.q){case O:for(;u+l>o.length;){if(l-=f=h-u,s)o.set(e.subarray(r,r+f),u),u+=f,r+=f;else for(;f--;)o[u++]=e[r++];this.b=u,o=this.f(),u=this.b}break;case M:for(;u+l>o.length;)o=this.f({B:2});break;default:i(Error("invalid inflate mode"))}if(s)o.set(e.subarray(r,r+l),u),u+=l,r+=l;else for(;l--;)o[u++]=e[r++];this.c=r,this.b=u,this.a=o;break;case 1:this.r(tt,rt);break;case 2:var p,d,g,y,m=it(this,5)+257,v=it(this,5)+1,b=it(this,4)+4,C=new(s?Uint8Array:Array)(z.length),E=n,S=n,w=n,A=n,T=n;for(T=0;T<b;++T)C[z[T]]=it(this,3);if(!s)for(T=b,b=C.length;T<b;++T)C[z[T]]=0;for(p=_(C),E=new(s?Uint8Array:Array)(m+v),T=0,y=m+v;T<y;)switch(S=nt(this,p),S){case 16:for(A=3+it(this,2);A--;)E[T++]=w;break;case 17:for(A=3+it(this,3);A--;)E[T++]=0;w=0;break;case 18:for(A=11+it(this,7);A--;)E[T++]=0;w=0;break;default:w=E[T++]=S}d=_(s?E.subarray(0,m):E.slice(0,m)),g=_(s?E.subarray(m):E.slice(m)),this.r(d,g);break;default:i(Error("unknown BTYPE: "+t))}}return this.z()};var V,K,F=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],z=s?new Uint16Array(F):F,j=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],G=s?new Uint16Array(j):j,H=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],q=s?new Uint8Array(H):H,W=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],Y=s?new Uint16Array(W):W,Q=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],X=s?new Uint8Array(Q):Q,Z=new(s?Uint8Array:Array)(288);for(V=0,K=Z.length;V<K;++V)Z[V]=143>=V?8:255>=V?9:279>=V?7:8;var J,$,tt=_(Z),et=new(s?Uint8Array:Array)(30);for(J=0,$=et.length;J<$;++J)et[J]=5;var rt=_(et);function it(t,e){for(var r,n=t.j,a=t.e,s=t.input,o=t.c,u=s.length;a<e;)o>=u&&i(Error("input buffer is broken")),n|=s[o++]<<a,a+=8;return r=n&(1<<e)-1,t.j=n>>>e,t.e=a-e,t.c=o,r}function nt(t,e){for(var r,n,a=t.j,s=t.e,o=t.input,u=t.c,c=o.length,l=e[0],h=e[1];s<h&&!(u>=c);)a|=o[u++]<<s,s+=8;return(n=(r=l[a&(1<<h)-1])>>>16)>s&&i(Error("invalid code length: "+n)),t.j=a>>n,t.e=s-n,t.c=u,65535&r}function at(t){this.input=t,this.c=0,this.G=[],this.R=!1}function st(t){if("string"==typeof t){var e,r,i=t.split("");for(e=0,r=i.length;e<r;e++)i[e]=(255&i[e].charCodeAt(0))>>>0;t=i}for(var n,a=1,s=0,o=t.length,u=0;0<o;){o-=n=1024<o?1024:o;do{s+=a+=t[u++]}while(--n);a%=65521,s%=65521}return(s<<16|a)>>>0}function ot(t,e){var r,n;switch(this.input=t,this.c=0,!e&&(e={})||(e.index&&(this.c=e.index),e.verify&&(this.V=e.verify)),r=t[this.c++],n=t[this.c++],15&r){case ut:this.method=ut;break;default:i(Error("unsupported compression method"))}0!=((r<<8)+n)%31&&i(Error("invalid fcheck flag:"+((r<<8)+n)%31)),32&n&&i(Error("fdict flag is not supported")),this.J=new x(t,{index:this.c,bufferSize:e.bufferSize,bufferType:e.bufferType,resize:e.resize})}x.prototype.r=function(t,e){var r=this.a,i=this.b;this.A=t;for(var n,a,s,o,u=r.length-258;256!==(n=nt(this,t));)if(256>n)i>=u&&(this.b=i,r=this.f(),i=this.b),r[i++]=n;else for(o=G[a=n-257],0<q[a]&&(o+=it(this,q[a])),n=nt(this,e),s=Y[n],0<X[n]&&(s+=it(this,X[n])),i>=u&&(this.b=i,r=this.f(),i=this.b);o--;)r[i]=r[i++-s];for(;8<=this.e;)this.e-=8,this.c--;this.b=i},x.prototype.Q=function(t,e){var r=this.a,i=this.b;this.A=t;for(var n,a,s,o,u=r.length;256!==(n=nt(this,t));)if(256>n)i>=u&&(u=(r=this.f()).length),r[i++]=n;else for(o=G[a=n-257],0<q[a]&&(o+=it(this,q[a])),n=nt(this,e),s=Y[n],0<X[n]&&(s+=it(this,X[n])),i+o>u&&(u=(r=this.f()).length);o--;)r[i]=r[i++-s];for(;8<=this.e;)this.e-=8,this.c--;this.b=i},x.prototype.f=function(){var t,e,r=new(s?Uint8Array:Array)(this.b-32768),i=this.b-32768,n=this.a;if(s)r.set(n.subarray(32768,r.length));else for(t=0,e=r.length;t<e;++t)r[t]=n[t+32768];if(this.o.push(r),this.s+=r.length,s)n.set(n.subarray(i,i+32768));else for(t=0;32768>t;++t)n[t]=n[i+t];return this.b=32768,n},x.prototype.S=function(t){var e,r,i,n=this.input.length/this.c+1|0,a=this.input,o=this.a;return t&&("number"==typeof t.B&&(n=t.B),"number"==typeof t.M&&(n+=t.M)),2>n?r=(i=(a.length-this.c)/this.A[2]/2*258|0)<o.length?o.length+i:o.length<<1:r=o.length*n,s?(e=new Uint8Array(r)).set(o):e=o,this.a=e},x.prototype.z=function(){var t,e,r,i,n,a=0,o=this.a,u=this.o,c=new(s?Uint8Array:Array)(this.s+(this.b-32768));if(0===u.length)return s?this.a.subarray(32768,this.b):this.a.slice(32768,this.b);for(e=0,r=u.length;e<r;++e)for(i=0,n=(t=u[e]).length;i<n;++i)c[a++]=t[i];for(e=32768,r=this.b;e<r;++e)c[a++]=o[e];return this.o=[],this.buffer=c},x.prototype.O=function(){var t,e=this.b;return s?this.K?(t=new Uint8Array(e)).set(this.a.subarray(0,e)):t=this.a.subarray(0,e):(this.a.length>e&&(this.a.length=e),t=this.a),this.buffer=t},at.prototype.i=function(){for(var t=this.input.length;this.c<t;){var e,r,o=new m,u=n,c=n,l=n,h=n,f=n,p=n,g=n,y=this.input,v=this.c;switch(o.C=y[v++],o.D=y[v++],(31!==o.C||139!==o.D)&&i(Error("invalid file signature:"+o.C+","+o.D)),o.v=y[v++],o.v){case 8:break;default:i(Error("unknown compression method: "+o.v))}if(o.n=y[v++],r=y[v++]|y[v++]<<8|y[v++]<<16|y[v++]<<24,o.$=new Date(1e3*r),o.ba=y[v++],o.aa=y[v++],0<(4&o.n)&&(o.W=y[v++]|y[v++]<<8,v+=o.W),0<(o.n&P)){for(p=[],f=0;0<(h=y[v++]);)p[f++]=String.fromCharCode(h);o.name=p.join("")}if(0<(o.n&D)){for(p=[],f=0;0<(h=y[v++]);)p[f++]=String.fromCharCode(h);o.w=p.join("")}0<(o.n&L)&&(o.P=65535&d(y,0,v),o.P!==(y[v++]|y[v++]<<8)&&i(Error("invalid header crc16"))),u=y[y.length-4]|y[y.length-3]<<8|y[y.length-2]<<16|y[y.length-1]<<24,y.length-v-4-4<512*u&&(l=u),c=new x(y,{index:v,bufferSize:l}),o.data=e=c.i(),v=c.c,o.Y=g=(y[v++]|y[v++]<<8|y[v++]<<16|y[v++]<<24)>>>0,d(e,n,n)!==g&&i(Error("invalid CRC-32 checksum: 0x"+d(e,n,n).toString(16)+" / 0x"+g.toString(16))),o.Z=u=(y[v++]|y[v++]<<8|y[v++]<<16|y[v++]<<24)>>>0,(4294967295&e.length)!==u&&i(Error("invalid input size: "+(4294967295&e.length)+" / "+u)),this.G.push(o),this.c=v}this.R=a;var _,b,C,E=this.G,S=0,w=0;for(_=0,b=E.length;_<b;++_)w+=E[_].data.length;if(s)for(C=new Uint8Array(w),_=0;_<b;++_)C.set(E[_].data,S),S+=E[_].data.length;else{for(C=[],_=0;_<b;++_)C[_]=E[_].data;C=Array.prototype.concat.apply([],C)}return C},ot.prototype.i=function(){var t,e=this.input;return t=this.J.i(),this.c=this.J.c,this.V&&((e[this.c++]<<24|e[this.c++]<<16|e[this.c++]<<8|e[this.c++])>>>0!==st(t)&&i(Error("invalid adler-32 checksum"))),t};var ut=8;function ct(t,e){this.input=t,this.a=new(s?Uint8Array:Array)(32768),this.k=lt.t;var r,i={};for(r in!e&&(e={})||"number"!=typeof e.compressionType||(this.k=e.compressionType),e)i[r]=e[r];i.outputBuffer=this.a,this.I=new b(this.input,i)}var lt=S;function ht(t,e){var r;return r=new ct(t).h(),e||(e={}),e.H?r:gt(r)}function ft(t,e){var r;return t.subarray=t.slice,r=new ot(t).i(),e||(e={}),e.noBuffer?r:gt(r)}function pt(t,e){var r;return t.subarray=t.slice,r=new N(t).h(),e||(e={}),e.H?r:gt(r)}function dt(t,e){var r;return t.subarray=t.slice,r=new at(t).i(),e||(e={}),e.H?r:gt(r)}function gt(t){var e,i,n=new r(t.length);for(e=0,i=t.length;e<i;++e)n[e]=t[e];return n}ct.prototype.h=function(){var t,e,r,n,a,o,u,c=0;switch(u=this.a,t=ut){case ut:e=Math.LOG2E*Math.log(32768)-8;break;default:i(Error("invalid compression method"))}switch(r=e<<4|t,u[c++]=r,t){case ut:switch(this.k){case lt.NONE:a=0;break;case lt.L:a=1;break;case lt.t:a=2;break;default:i(Error("unsupported compression type"))}break;default:i(Error("invalid compression method"))}return n=a<<6|0,u[c++]=n|31-(256*r+n)%31,o=st(this.input),this.I.b=c,c=(u=this.I.h()).length,s&&((u=new Uint8Array(u.buffer)).length<=c+4&&(this.a=new Uint8Array(u.length+4),this.a.set(u),u=this.a),u=u.subarray(0,c+4)),u[c++]=o>>24&255,u[c++]=o>>16&255,u[c++]=o>>8&255,u[c++]=255&o,u},e.deflate=function(e,r,i){t.nextTick(function(){var t,n;try{n=ht(e,i)}catch(e){t=e}r(t,n)})},e.deflateSync=ht,e.inflate=function(e,r,i){t.nextTick(function(){var t,n;try{n=ft(e,i)}catch(e){t=e}r(t,n)})},e.inflateSync=ft,e.gzip=function(e,r,i){t.nextTick(function(){var t,n;try{n=pt(e,i)}catch(e){t=e}r(t,n)})},e.gzipSync=pt,e.gunzip=function(e,r,i){t.nextTick(function(){var t,n;try{n=dt(e,i)}catch(e){t=e}r(t,n)})},e.gunzipSync=dt}).call(this)}).call(this,r(7),r(3).Buffer)},function(t,e,r){(function(e){var r;t.exports=function t(e,i,n){function a(o,u){if(!i[o]){if(!e[o]){var c="function"==typeof r&&r;if(!u&&c)return r(o,!0);if(s)return s(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var h=i[o]={exports:{}};e[o][0].call(h.exports,function(t){var r=e[o][1][t];return a(r||t)},h,h.exports,t,e,i,n)}return i[o].exports}for(var s="function"==typeof r&&r,o=0;o<n.length;o++)a(n[o]);return a}({1:[function(t,e,r){(function(){var r,i,n,a,s,o,u,c=function(t,e){return function(){return t.apply(e,arguments)}},l={}.hasOwnProperty;s=t("./core/events"),u=t("./sources/node/http"),o=t("./sources/node/file"),i=t("./sources/buffer"),a=t("./demuxer"),n=t("./decoder"),r=function(t){function e(t){this.source=t,this._decode=c(this._decode,this),this.findDecoder=c(this.findDecoder,this),this.probe=c(this.probe,this),this.buffered=0,this.duration=null,this.format=null,this.metadata=null,this.active=!1,this.demuxer=null,this.decoder=null,this.source.once("data",this.probe),this.source.on("error",function(t){return function(e){return t.emit("error",e),t.stop()}}(this)),this.source.on("progress",function(t){return function(e){return t.buffered=e,t.emit("buffer",t.buffered)}}(this))}return function(t,e){for(var r in e)l.call(e,r)&&(t[r]=e[r]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(e,t),e.fromURL=function(t,r){return new e(new u(t,r))},e.fromFile=function(t){return new e(new o(t))},e.fromBuffer=function(t){return new e(new i(t))},e.prototype.start=function(t){if(!this.active)return null!=t&&(this.shouldDecode=t),null==this.shouldDecode&&(this.shouldDecode=!0),this.active=!0,this.source.start(),this.decoder&&this.shouldDecode?this._decode():void 0},e.prototype.stop=function(){if(this.active)return this.active=!1,this.source.pause()},e.prototype.get=function(t,e){if("format"===t||"duration"===t||"metadata"===t)return null!=this[t]?e(this[t]):(this.once(t,function(t){return function(r){return t.stop(),e(r)}}(this)),this.start())},e.prototype.decodePacket=function(){return this.decoder.decode()},e.prototype.decodeToBuffer=function(t){var e,r,i;return i=0,e=[],this.on("data",r=function(t){return i+=t.length,e.push(t)}),this.once("end",function(){var n,a,s,o,u;for(n=new Float32Array(i),s=0,o=0,u=e.length;o<u;o++)a=e[o],n.set(a,s),s+=a.length;return this.off("data",r),t(n)}),this.start()},e.prototype.probe=function(t){var e;if(this.active)return(e=a.find(t))?(this.demuxer=new e(this.source,t),this.demuxer.on("format",this.findDecoder),this.demuxer.on("duration",function(t){return function(e){return t.duration=e,t.emit("duration",t.duration)}}(this)),this.demuxer.on("metadata",function(t){return function(e){return t.metadata=e,t.emit("metadata",t.metadata)}}(this)),this.demuxer.on("error",function(t){return function(e){return t.emit("error",e),t.stop()}}(this))):this.emit("error","A demuxer for this container was not found.")},e.prototype.findDecoder=function(t){var e,r;if(this.format=t,this.active)return this.emit("format",this.format),(e=n.find(this.format.formatID))?(this.decoder=new e(this.demuxer,this.format),this.format.floatingPoint?this.decoder.on("data",function(t){return function(e){return t.emit("data",e)}}(this)):(r=Math.pow(2,this.format.bitsPerChannel-1),this.decoder.on("data",function(t){return function(e){var i,n,a,s,o;for(i=new Float32Array(e.length),n=s=0,o=e.length;s<o;n=++s)a=e[n],i[n]=a/r;return t.emit("data",i)}}(this))),this.decoder.on("error",function(t){return function(e){return t.emit("error",e),t.stop()}}(this)),this.decoder.on("end",function(t){return function(){return t.emit("end")}}(this)),this.emit("decodeStart"),this.shouldDecode?this._decode():void 0):this.emit("error","A decoder for "+this.format.formatID+" was not found.")},e.prototype._decode=function(){for(;this.decoder.decode()&&this.active;);if(this.active)return this.decoder.once("data",this._decode)},e.prototype.destroy=function(){var t,e,r;return this.stop(),null!=(t=this.demuxer)&&t.off(),null!=(e=this.decoder)&&e.off(),null!=(r=this.source)&&r.off(),this.off()},e}(s),e.exports=r}).call(this)},{"./core/events":8,"./decoder":11,"./demuxer":14,"./sources/buffer":31,"./sources/node/file":29,"./sources/node/http":30}],2:[function(t,e,r){(function(){var e,i,n;for(e in n=t("./aurora_base"))i=n[e],r[e]=i;t("./demuxers/caf"),t("./demuxers/m4a"),t("./demuxers/aiff"),t("./demuxers/wave"),t("./demuxers/au"),t("./decoders/lpcm"),t("./decoders/xlaw")}).call(this)},{"./aurora_base":3,"./decoders/lpcm":12,"./decoders/xlaw":13,"./demuxers/aiff":15,"./demuxers/au":16,"./demuxers/caf":17,"./demuxers/m4a":18,"./demuxers/wave":19}],3:[function(t,e,r){(function(){r.Base=t("./core/base"),r.Buffer=t("./core/buffer"),r.BufferList=t("./core/bufferlist"),r.Stream=t("./core/stream"),r.Bitstream=t("./core/bitstream"),r.EventEmitter=t("./core/events"),r.UnderflowError=t("./core/underflow"),r.HTTPSource=t("./sources/node/http"),r.FileSource=t("./sources/node/file"),r.BufferSource=t("./sources/buffer"),r.Demuxer=t("./demuxer"),r.Decoder=t("./decoder"),r.AudioDevice=t("./device"),r.Asset=t("./asset"),r.Player=t("./player"),r.Filter=t("./filter"),r.VolumeFilter=t("./filters/volume"),r.BalanceFilter=t("./filters/balance")}).call(this)},{"./asset":1,"./core/base":4,"./core/bitstream":5,"./core/buffer":6,"./core/bufferlist":7,"./core/events":8,"./core/stream":9,"./core/underflow":10,"./decoder":11,"./demuxer":14,"./device":20,"./filter":24,"./filters/balance":25,"./filters/volume":26,"./player":27,"./sources/buffer":31,"./sources/node/file":29,"./sources/node/http":30}],4:[function(t,e,r){(function(){var t,r={}.hasOwnProperty,i=[].indexOf||function(t){for(var e=0,r=this.length;e<r;e++)if(e in this&&this[e]===t)return e;return-1};t=function(){var t;function e(){}return t=/\b_super\b/,e.extend=function(e){var n,a,s,o,u,c;if(n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return function(t,e){for(var i in e)r.call(e,i)&&(t[i]=e[i]);function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(e,t),e}(this),"function"==typeof e)for(s in o=Object.keys(n.prototype),e.call(n,n),e={},u=n.prototype)a=u[s],i.call(o,s)<0&&(e[s]=a);for(s in c=n.__super__,e)"function"==typeof(a=e[s])&&t.test(a)?function(t,e){n.prototype[t]=function(){var r,i;return i=this._super,this._super=c[t],r=e.apply(this,arguments),this._super=i,r}}(s,a):n.prototype[s]=a;return n},e}(),e.exports=t}).call(this)},{}],5:[function(t,e,r){(function(){var t;t=function(){function t(t){this.stream=t,this.bitPosition=0}return t.prototype.copy=function(){var e;return(e=new t(this.stream.copy())).bitPosition=this.bitPosition,e},t.prototype.offset=function(){return 8*this.stream.offset+this.bitPosition},t.prototype.available=function(t){return this.stream.available((t+8-this.bitPosition)/8)},t.prototype.advance=function(t){var e;return e=this.bitPosition+t,this.stream.advance(e>>3),this.bitPosition=7&e},t.prototype.rewind=function(t){var e;return e=this.bitPosition-t,this.stream.rewind(Math.abs(e>>3)),this.bitPosition=7&e},t.prototype.seek=function(t){var e;return e=this.offset(),t>e?this.advance(t-e):t<e?this.rewind(e-t):void 0},t.prototype.align=function(){if(0!==this.bitPosition)return this.bitPosition=0,this.stream.advance(1)},t.prototype.read=function(t,e){var r,i,n,a,s,o,u;if(0===t)return 0;if((u=t+this.bitPosition)<=8)r=(this.stream.peekUInt8()<<this.bitPosition&255)>>>8-t;else if(u<=16)r=(this.stream.peekUInt16()<<this.bitPosition&65535)>>>16-t;else if(u<=24)r=(this.stream.peekUInt24()<<this.bitPosition&16777215)>>>24-t;else if(u<=32)r=this.stream.peekUInt32()<<this.bitPosition>>>32-t;else{if(!(u<=40))throw new Error("Too many bits!");i=4294967296*this.stream.peekUInt8(0),n=this.stream.peekUInt8(1)<<24>>>0,a=this.stream.peekUInt8(2)<<16,s=this.stream.peekUInt8(3)<<8,o=this.stream.peekUInt8(4),r=i+n+a+s+o,r%=Math.pow(2,40-this.bitPosition),r=Math.floor(r/Math.pow(2,40-this.bitPosition-t))}return e&&(u<32?r>>>t-1&&(r=-1*((1<<t>>>0)-r)):r/Math.pow(2,t-1)|0&&(r=-1*(Math.pow(2,t)-r))),this.advance(t),r},t.prototype.peek=function(t,e){var r,i,n,a,s,o,u;if(0===t)return 0;if((u=t+this.bitPosition)<=8)r=(this.stream.peekUInt8()<<this.bitPosition&255)>>>8-t;else if(u<=16)r=(this.stream.peekUInt16()<<this.bitPosition&65535)>>>16-t;else if(u<=24)r=(this.stream.peekUInt24()<<this.bitPosition&16777215)>>>24-t;else if(u<=32)r=this.stream.peekUInt32()<<this.bitPosition>>>32-t;else{if(!(u<=40))throw new Error("Too many bits!");i=4294967296*this.stream.peekUInt8(0),n=this.stream.peekUInt8(1)<<24>>>0,a=this.stream.peekUInt8(2)<<16,s=this.stream.peekUInt8(3)<<8,o=this.stream.peekUInt8(4),r=i+n+a+s+o,r%=Math.pow(2,40-this.bitPosition),r=Math.floor(r/Math.pow(2,40-this.bitPosition-t))}return e&&(u<32?r>>>t-1&&(r=-1*((1<<t>>>0)-r)):r/Math.pow(2,t-1)|0&&(r=-1*(Math.pow(2,t)-r))),r},t.prototype.readLSB=function(t,e){var r,i;if(0===t)return 0;if(t>40)throw new Error("Too many bits!");return i=t+this.bitPosition,r=this.stream.peekUInt8(0)>>>this.bitPosition,i>8&&(r|=this.stream.peekUInt8(1)<<8-this.bitPosition),i>16&&(r|=this.stream.peekUInt8(2)<<16-this.bitPosition),i>24&&(r+=this.stream.peekUInt8(3)<<24-this.bitPosition>>>0),i>32&&(r+=this.stream.peekUInt8(4)*Math.pow(2,32-this.bitPosition)),i>=32?r%=Math.pow(2,t):r&=(1<<t)-1,e&&(i<32?r>>>t-1&&(r=-1*((1<<t>>>0)-r)):r/Math.pow(2,t-1)|0&&(r=-1*(Math.pow(2,t)-r))),this.advance(t),r},t.prototype.peekLSB=function(t,e){var r,i;if(0===t)return 0;if(t>40)throw new Error("Too many bits!");return i=t+this.bitPosition,r=this.stream.peekUInt8(0)>>>this.bitPosition,i>8&&(r|=this.stream.peekUInt8(1)<<8-this.bitPosition),i>16&&(r|=this.stream.peekUInt8(2)<<16-this.bitPosition),i>24&&(r+=this.stream.peekUInt8(3)<<24-this.bitPosition>>>0),i>32&&(r+=this.stream.peekUInt8(4)*Math.pow(2,32-this.bitPosition)),i>=32?r%=Math.pow(2,t):r&=(1<<t)-1,e&&(i<32?r>>>t-1&&(r=-1*((1<<t>>>0)-r)):r/Math.pow(2,t-1)|0&&(r=-1*(Math.pow(2,t)-r))),r},t}(),e.exports=t}).call(this)},{}],6:[function(t,r,i){(function(t){(function(){var e;e=function(){var e,r;function i(e){var r;if(e instanceof Uint8Array)this.data=e;else if(e instanceof ArrayBuffer||Array.isArray(e)||"number"==typeof e||(null!=(r=t.Buffer)?r.isBuffer(e):void 0))this.data=new Uint8Array(e);else if(e.buffer instanceof ArrayBuffer)this.data=new Uint8Array(e.buffer,e.byteOffset,e.length*e.BYTES_PER_ELEMENT);else{if(!(e instanceof i))throw new Error("Constructing buffer with unknown type.");this.data=e.data}this.length=this.data.length,this.next=null,this.prev=null}return i.allocate=function(t){return new i(t)},i.prototype.copy=function(){return new i(new Uint8Array(this.data))},i.prototype.slice=function(t,e){return null==e&&(e=this.length),0===t&&e>=this.length?new i(this.data):new i(this.data.subarray(t,t+e))},e=t.BlobBuilder||t.MozBlobBuilder||t.WebKitBlobBuilder,r=t.URL||t.webkitURL||t.mozURL,i.makeBlob=function(t,r){var i;null==r&&(r="application/octet-stream");try{return new Blob([t],{type:r})}catch(t){}return null!=e?((i=new e).append(t),i.getBlob(r)):null},i.makeBlobURL=function(t,e){return null!=r?r.createObjectURL(this.makeBlob(t,e)):void 0},i.revokeBlobURL=function(t){return null!=r?r.revokeObjectURL(t):void 0},i.prototype.toBlob=function(){return i.makeBlob(this.data.buffer)},i.prototype.toBlobURL=function(){return i.makeBlobURL(this.data.buffer)},i}(),r.exports=e}).call(this)}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],7:[function(t,e,r){(function(){var t;t=function(){function t(){this.first=null,this.last=null,this.numBuffers=0,this.availableBytes=0,this.availableBuffers=0}return t.prototype.copy=function(){var e;return(e=new t).first=this.first,e.last=this.last,e.numBuffers=this.numBuffers,e.availableBytes=this.availableBytes,e.availableBuffers=this.availableBuffers,e},t.prototype.append=function(t){var e;return t.prev=this.last,null!=(e=this.last)&&(e.next=t),this.last=t,null==this.first&&(this.first=t),this.availableBytes+=t.length,this.availableBuffers++,this.numBuffers++},t.prototype.advance=function(){return!!this.first&&(this.availableBytes-=this.first.length,this.availableBuffers--,this.first=this.first.next,null!=this.first)},t.prototype.rewind=function(){var t;return!(this.first&&!this.first.prev)&&(this.first=(null!=(t=this.first)?t.prev:void 0)||this.last,this.first&&(this.availableBytes+=this.first.length,this.availableBuffers++),null!=this.first)},t.prototype.reset=function(){var t;for(t=[];this.rewind(););return t},t}(),e.exports=t}).call(this)},{}],8:[function(t,e,r){(function(){var r,i,n={}.hasOwnProperty,a=[].slice;r=t("./base"),i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return function(t,e){for(var r in e)n.call(e,r)&&(t[r]=e[r]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(e,t),e.prototype.on=function(t,e){var r;return null==this.events&&(this.events={}),null==(r=this.events)[t]&&(r[t]=[]),this.events[t].push(e)},e.prototype.off=function(t,e){var r,i;if(null!=this.events)if(null!=(i=this.events)?i[t]:void 0){if(null==e)return this.events[t];if(~(r=this.events[t].indexOf(e)))return this.events[t].splice(r,1)}else if(null==t)return{}},e.prototype.once=function(t,e){var r;return this.on(t,r=function(){return this.off(t,r),e.apply(this,arguments)})},e.prototype.emit=function(){var t,e,r,i,n,s;if(e=arguments[0],t=2<=arguments.length?a.call(arguments,1):[],null!=(n=this.events)?n[e]:void 0)for(s=this.events[e].slice(),r=0,i=s.length;r<i;r++)s[r].apply(this,t)},e}(r),e.exports=i}).call(this)},{"./base":4}],9:[function(t,e,r){(function(){var r,i,n,a;i=t("./bufferlist"),r=t("./buffer"),a=t("./underflow"),n=function(){var t,e,n,s,o,u,c,l,h,f,p,d,g;function y(t){this.list=t,this.localOffset=0,this.offset=0}return t=new ArrayBuffer(16),g=new Uint8Array(t),h=new Int8Array(t),p=new Uint16Array(t),c=new Int16Array(t),d=new Uint32Array(t),l=new Int32Array(t),n=new Float32Array(t),"undefined"!=typeof Float64Array&&null!==Float64Array&&(s=new Float64Array(t)),f=13330===new Uint16Array(new Uint8Array([18,52]).buffer)[0],y.fromBuffer=function(t){var e;return(e=new i).append(t),new y(e)},y.prototype.copy=function(){var t;return(t=new y(this.list.copy())).localOffset=this.localOffset,t.offset=this.offset,t},y.prototype.available=function(t){return t<=this.list.availableBytes-this.localOffset},y.prototype.remainingBytes=function(){return this.list.availableBytes-this.localOffset},y.prototype.advance=function(t){if(!this.available(t))throw new a;for(this.localOffset+=t,this.offset+=t;this.list.first&&this.localOffset>=this.list.first.length;)this.localOffset-=this.list.first.length,this.list.advance();return this},y.prototype.rewind=function(t){if(t>this.offset)throw new a;for(this.list.first||(this.list.rewind(),this.localOffset=this.list.first.length),this.localOffset-=t,this.offset-=t;this.list.first.prev&&this.localOffset<0;)this.list.rewind(),this.localOffset+=this.list.first.length;return this},y.prototype.seek=function(t){return t>this.offset?this.advance(t-this.offset):t<this.offset?this.rewind(this.offset-t):void 0},y.prototype.readUInt8=function(){var t;if(!this.available(1))throw new a;return t=this.list.first.data[this.localOffset],this.localOffset+=1,this.offset+=1,this.localOffset===this.list.first.length&&(this.localOffset=0,this.list.advance()),t},y.prototype.peekUInt8=function(t){var e;if(null==t&&(t=0),!this.available(t+1))throw new a;for(t=this.localOffset+t,e=this.list.first;e;){if(e.length>t)return e.data[t];t-=e.length,e=e.next}return 0},y.prototype.read=function(t,e){var r,i,n;if(null==e&&(e=!1),e===f)for(r=i=0;i<t;r=i+=1)g[r]=this.readUInt8();else for(r=n=t-1;n>=0;r=n+=-1)g[r]=this.readUInt8()},y.prototype.peek=function(t,e,r){var i,n,a;if(null==r&&(r=!1),r===f)for(i=n=0;n<t;i=n+=1)g[i]=this.peekUInt8(e+i);else for(i=a=0;a<t;i=a+=1)g[t-i-1]=this.peekUInt8(e+i)},y.prototype.readInt8=function(){return this.read(1),h[0]},y.prototype.peekInt8=function(t){return null==t&&(t=0),this.peek(1,t),h[0]},y.prototype.readUInt16=function(t){return this.read(2,t),p[0]},y.prototype.peekUInt16=function(t,e){return null==t&&(t=0),this.peek(2,t,e),p[0]},y.prototype.readInt16=function(t){return this.read(2,t),c[0]},y.prototype.peekInt16=function(t,e){return null==t&&(t=0),this.peek(2,t,e),c[0]},y.prototype.readUInt24=function(t){return t?this.readUInt16(!0)+(this.readUInt8()<<16):(this.readUInt16()<<8)+this.readUInt8()},y.prototype.peekUInt24=function(t,e){return null==t&&(t=0),e?this.peekUInt16(t,!0)+(this.peekUInt8(t+2)<<16):(this.peekUInt16(t)<<8)+this.peekUInt8(t+2)},y.prototype.readInt24=function(t){return t?this.readUInt16(!0)+(this.readInt8()<<16):(this.readInt16()<<8)+this.readUInt8()},y.prototype.peekInt24=function(t,e){return null==t&&(t=0),e?this.peekUInt16(t,!0)+(this.peekInt8(t+2)<<16):(this.peekInt16(t)<<8)+this.peekUInt8(t+2)},y.prototype.readUInt32=function(t){return this.read(4,t),d[0]},y.prototype.peekUInt32=function(t,e){return null==t&&(t=0),this.peek(4,t,e),d[0]},y.prototype.readInt32=function(t){return this.read(4,t),l[0]},y.prototype.peekInt32=function(t,e){return null==t&&(t=0),this.peek(4,t,e),l[0]},y.prototype.readFloat32=function(t){return this.read(4,t),n[0]},y.prototype.peekFloat32=function(t,e){return null==t&&(t=0),this.peek(4,t,e),n[0]},y.prototype.readFloat64=function(t){return this.read(8,t),s?s[0]:o()},o=function(){var t,e,r,i,n,a;return i=d[0],(r=d[1])&&2147483648!==r?(a=1-2*(r>>>31),e=1048575&r,2047==(t=r>>>20&2047)?e?NaN:a*(1/0):(t-=1023,n=(1048576|e)*Math.pow(2,t-20),n+=i*Math.pow(2,t-52),a*n)):0},y.prototype.peekFloat64=function(t,e){return null==t&&(t=0),this.peek(8,t,e),s?s[0]:o()},y.prototype.readFloat80=function(t){return this.read(10,t),u()},u=function(){var t,e,r,i,n,a,s;return i=d[0],n=d[1],t=g[9],e=g[8],s=1-2*(t>>>7),0==(r=(127&t)<<8|e)&&0===n&&0===i?0:32767===r?0===n&&0===i?s*(1/0):NaN:(r-=16383,a=n*Math.pow(2,r-31),a+=i*Math.pow(2,r-63),s*a)},y.prototype.peekFloat80=function(t,e){return null==t&&(t=0),this.peek(10,t,e),u()},y.prototype.readBuffer=function(t){var e,i,n,a;for(i=r.allocate(t),n=i.data,e=a=0;a<t;e=a+=1)n[e]=this.readUInt8();return i},y.prototype.peekBuffer=function(t,e){var i,n,a,s;for(null==t&&(t=0),n=r.allocate(e),a=n.data,i=s=0;s<e;i=s+=1)a[i]=this.peekUInt8(t+i);return n},y.prototype.readSingleBuffer=function(t){var e;return e=this.list.first.slice(this.localOffset,t),this.advance(e.length),e},y.prototype.peekSingleBuffer=function(t,e){return this.list.first.slice(this.localOffset+t,e)},y.prototype.readString=function(t,r){return null==r&&(r="ascii"),e.call(this,0,t,r,!0)},y.prototype.peekString=function(t,r,i){return null==t&&(t=0),null==i&&(i="ascii"),e.call(this,t,r,i,!1)},e=function(t,e,r,i){var n,a,s,o,u,c,l,h,f,p,d,g,y;switch(r=r.toLowerCase(),f=null===e?0:-1,null==e&&(e=1/0),l=t+e,d="",r){case"ascii":case"latin1":for(;t<l&&(c=this.peekUInt8(t++))!==f;)d+=String.fromCharCode(c);break;case"utf8":case"utf-8":for(;t<l&&(n=this.peekUInt8(t++))!==f;)0==(128&n)?d+=String.fromCharCode(n):192==(224&n)?(a=63&this.peekUInt8(t++),d+=String.fromCharCode((31&n)<<6|a)):224==(240&n)?(a=63&this.peekUInt8(t++),s=63&this.peekUInt8(t++),d+=String.fromCharCode((15&n)<<12|a<<6|s)):240==(248&n)&&(a=63&this.peekUInt8(t++),s=63&this.peekUInt8(t++),o=63&this.peekUInt8(t++),p=((15&n)<<18|a<<12|s<<6|o)-65536,d+=String.fromCharCode(55296+(p>>10),56320+(1023&p)));break;case"utf16-be":case"utf16be":case"utf16le":case"utf16-le":case"utf16bom":case"utf16-bom":switch(r){case"utf16be":case"utf16-be":h=!1;break;case"utf16le":case"utf16-le":h=!0;break;case"utf16bom":case"utf16-bom":if(e<2||(u=this.peekUInt16(t))===f)return i&&this.advance(t+=2),d;h=65534===u,t+=2}for(;t<l&&(g=this.peekUInt16(t,h))!==f;)if(t+=2,g<55296||g>57343)d+=String.fromCharCode(g);else{if(g>56319)throw new Error("Invalid utf16 sequence.");if((y=this.peekUInt16(t,h))<56320||y>57343)throw new Error("Invalid utf16 sequence.");d+=String.fromCharCode(g,y),t+=2}g===f&&(t+=2);break;default:throw new Error("Unknown encoding: "+r)}return i&&this.advance(t),d},y}(),e.exports=n}).call(this)},{"./buffer":6,"./bufferlist":7,"./underflow":10}],10:[function(t,e,r){(function(){var t,r={}.hasOwnProperty;t=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.name="UnderflowError",this.stack=(new Error).stack}return function(t,e){for(var i in e)r.call(e,i)&&(t[i]=e[i]);function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype}(e,t),e}(Error),e.exports=t}).call(this)},{}],11:[function(t,e,r){(function(){var r,i,n,a,s,o,u={}.hasOwnProperty;a=t("./core/events"),i=t("./core/bufferlist"),s=t("./core/stream"),r=t("./core/bitstream"),o=t("./core/underflow"),n=function(t){var e;function n(t,e){var n;this.demuxer=t,this.format=e,n=new i,this.stream=new s(n),this.bitstream=new r(this.stream),this.receivedFinalBuffer=!1,this.waiting=!1,this.demuxer.on("cookie",function(t){return function(e){var r;try{return t.setCookie(e)}catch(e){return r=e,t.emit("error",r)}}}(this)),this.demuxer.on("data",function(t){return function(e){if(n.append(e),t.waiting)return t.decode()}}(this)),this.demuxer.on("end",function(t){return function(){if(t.receivedFinalBuffer=!0,t.waiting)return t.decode()}}(this)),this.init()}return function(t,e){for(var r in e)u.call(e,r)&&(t[r]=e[r]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(n,t),n.prototype.init=function(){},n.prototype.setCookie=function(t){},n.prototype.readChunk=function(){},n.prototype.decode=function(){var t,e,r;this.waiting=!this.receivedFinalBuffer,e=this.bitstream.offset();try{r=this.readChunk()}catch(e){if(!((t=e)instanceof o))return this.emit("error",t),!1}return r?(this.emit("data",r),this.receivedFinalBuffer&&this.emit("end"),!0):(this.receivedFinalBuffer?this.emit("end"):(this.bitstream.seek(e),this.waiting=!0),!1)},n.prototype.seek=function(t){var e;return e=this.demuxer.seek(t),this.stream.seek(e.offset),e.timestamp},e={},n.register=function(t,r){return e[t]=r},n.find=function(t){return e[t]||null},n}(a),e.exports=n}).call(this)},{"./core/bitstream":5,"./core/bufferlist":7,"./core/events":8,"./core/stream":9,"./core/underflow":10}],12:[function(t,e,r){(function(){var e,r=function(t,e){return function(){return t.apply(e,arguments)}},i={}.hasOwnProperty;!function(t){function n(){return this.readChunk=r(this.readChunk,this),n.__super__.constructor.apply(this,arguments)}(function(t,e){for(var r in e)i.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype})(n,t),e.register("lpcm",n),n.prototype.readChunk=function(){var t,e,r,i,n,a,s,o,u,c,l,h;if(a=this.stream,r=this.format.littleEndian,t=Math.min(4096,a.remainingBytes()),n=t/(this.format.bitsPerChannel/8)|0,t<this.format.bitsPerChannel/8)return null;if(this.format.floatingPoint)switch(this.format.bitsPerChannel){case 32:for(i=new Float32Array(n),e=s=0;s<n;e=s+=1)i[e]=a.readFloat32(r);break;case 64:for(i=new Float64Array(n),e=o=0;o<n;e=o+=1)i[e]=a.readFloat64(r);break;default:throw new Error("Unsupported bit depth.")}else switch(this.format.bitsPerChannel){case 8:for(i=new Int8Array(n),e=u=0;u<n;e=u+=1)i[e]=a.readInt8();break;case 16:for(i=new Int16Array(n),e=c=0;c<n;e=c+=1)i[e]=a.readInt16(r);break;case 24:for(i=new Int32Array(n),e=l=0;l<n;e=l+=1)i[e]=a.readInt24(r);break;case 32:for(i=new Int32Array(n),e=h=0;h<n;e=h+=1)i[e]=a.readInt32(r);break;default:throw new Error("Unsupported bit depth.")}return i}}(e=t("../decoder"))}).call(this)},{"../decoder":11}],13:[function(t,e,r){(function(){var e,r=function(t,e){return function(){return t.apply(e,arguments)}},i={}.hasOwnProperty;!function(t){function n(){return this.readChunk=r(this.readChunk,this),n.__super__.constructor.apply(this,arguments)}(function(t,e){for(var r in e)i.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype})(n,t),e.register("ulaw",n),e.register("alaw",n),n.prototype.init=function(){var t,e,r,i,n,a,s;if(this.format.bitsPerChannel=16,this.table=i=new Int16Array(256),"ulaw"===this.format.formatID)for(t=a=0;a<256;t=++a)r=132+((15&(n=~t))<<3),r<<=(112&n)>>>4,i[t]=128&n?132-r:r-132;else for(t=s=0;s<256;t=++s)r=15&(n=85^t),r=(e=(112&n)>>>4)?r+r+1+32<<e+2:r+r+1<<3,i[t]=128&n?r:-r},n.prototype.readChunk=function(){var t,e,r,i,n,a;if(i=this.stream,n=this.table,0!==(r=Math.min(4096,this.stream.remainingBytes()))){for(e=new Int16Array(r),t=a=0;a<r;t=a+=1)e[t]=n[i.readUInt8()];return e}}}(e=t("../decoder"))}).call(this)},{"../decoder":11}],14:[function(t,e,r){(function(){var r,i,n,a,s={}.hasOwnProperty;n=t("./core/events"),r=t("./core/bufferlist"),a=t("./core/stream"),i=function(t){var e;function i(t,e){var i,n;(i=new r).append(e),this.stream=new a(i),n=!1,t.on("data",function(t){return function(e){var r;n=!0,i.append(e);try{return t.readChunk(e)}catch(e){return r=e,t.emit("error",r)}}}(this)),t.on("error",function(t){return function(e){return t.emit("error",e)}}(this)),t.on("end",function(t){return function(){return n||t.readChunk(e),t.emit("end")}}(this)),this.seekPoints=[],this.init()}return function(t,e){for(var r in e)s.call(e,r)&&(t[r]=e[r]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(i,t),i.probe=function(t){return!1},i.prototype.init=function(){},i.prototype.readChunk=function(t){},i.prototype.addSeekPoint=function(t,e){var r;return r=this.searchTimestamp(e),this.seekPoints.splice(r,0,{offset:t,timestamp:e})},i.prototype.searchTimestamp=function(t,e){var r,i,n,a;if(i=0,(r=this.seekPoints.length)>0&&this.seekPoints[r-1].timestamp<t)return r;for(;i<r;)n=i+r>>1,(a=this.seekPoints[n].timestamp)<t?i=n+1:a>=t&&(r=n);return r>this.seekPoints.length&&(r=this.seekPoints.length),r},i.prototype.seek=function(t){var e;return this.format&&this.format.framesPerPacket>0&&this.format.bytesPerPacket>0?{timestamp:t,offset:this.format.bytesPerPacket*t/this.format.framesPerPacket}:(e=this.searchTimestamp(t),this.seekPoints[e])},e=[],i.register=function(t){return e.push(t)},i.find=function(t){var r,i,n,s,o;for(n=a.fromBuffer(t),s=0,o=e.length;s<o;s++){r=e[s],i=n.offset;try{if(r.probe(n))return r}catch(t){}n.seek(i)}return null},i}(n),e.exports=i}).call(this)},{"./core/bufferlist":7,"./core/events":8,"./core/stream":9}],15:[function(t,e,r){(function(){var e,r={}.hasOwnProperty;!function(t){function i(){return i.__super__.constructor.apply(this,arguments)}(function(t,e){for(var i in e)r.call(e,i)&&(t[i]=e[i]);function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype})(i,t),e.register(i),i.probe=function(t){var e;return"FORM"===t.peekString(0,4)&&("AIFF"===(e=t.peekString(8,4))||"AIFC"===e)},i.prototype.readChunk=function(){var t,e,r,i;if(!this.readStart&&this.stream.available(12)){if("FORM"!==this.stream.readString(4))return this.emit("error","Invalid AIFF.");if(this.fileSize=this.stream.readUInt32(),this.fileType=this.stream.readString(4),this.readStart=!0,"AIFF"!==(i=this.fileType)&&"AIFC"!==i)return this.emit("error","Invalid AIFF.")}for(;this.stream.available(1);){switch(!this.readHeaders&&this.stream.available(8)&&(this.type=this.stream.readString(4),this.len=this.stream.readUInt32()),this.type){case"COMM":if(!this.stream.available(this.len))return;this.format={formatID:"lpcm",channelsPerFrame:this.stream.readUInt16(),sampleCount:this.stream.readUInt32(),bitsPerChannel:this.stream.readUInt16(),sampleRate:this.stream.readFloat80(),framesPerPacket:1,littleEndian:!1,floatingPoint:!1},this.format.bytesPerPacket=this.format.bitsPerChannel/8*this.format.channelsPerFrame,"AIFC"===this.fileType&&(e=this.stream.readString(4),this.format.littleEndian="sowt"===e&&this.format.bitsPerChannel>8,this.format.floatingPoint="fl32"===e||"fl64"===e,"twos"!==e&&"sowt"!==e&&"fl32"!==e&&"fl64"!==e&&"NONE"!==e||(e="lpcm"),this.format.formatID=e,this.len-=4),this.stream.advance(this.len-18),this.emit("format",this.format),this.emit("duration",this.format.sampleCount/this.format.sampleRate*1e3|0);break;case"SSND":this.readSSNDHeader&&this.stream.available(4)||(r=this.stream.readUInt32(),this.stream.advance(4),this.stream.advance(r),this.readSSNDHeader=!0),t=this.stream.readSingleBuffer(this.len),this.len-=t.length,this.readHeaders=this.len>0,this.emit("data",t);break;default:if(!this.stream.available(this.len))return;this.stream.advance(this.len)}"SSND"!==this.type&&(this.readHeaders=!1)}}}(e=t("../demuxer"))}).call(this)},{"../demuxer":14}],16:[function(t,e,r){(function(){var e,r={}.hasOwnProperty;!function(t){var i,n;function a(){return a.__super__.constructor.apply(this,arguments)}(function(t,e){for(var i in e)r.call(e,i)&&(t[i]=e[i]);function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype})(a,t),e.register(a),a.probe=function(t){return".snd"===t.peekString(0,4)},(i=[8,8,16,24,32,32,64])[26]=8,n={1:"ulaw",27:"alaw"},a.prototype.readChunk=function(){var t,e,r;if(!this.readHeader&&this.stream.available(24)){if(".snd"!==this.stream.readString(4))return this.emit("error","Invalid AU file.");if(this.stream.readUInt32(),e=this.stream.readUInt32(),r=this.stream.readUInt32(),this.format={formatID:n[r]||"lpcm",littleEndian:!1,floatingPoint:6===r||7===r,bitsPerChannel:i[r-1],sampleRate:this.stream.readUInt32(),channelsPerFrame:this.stream.readUInt32(),framesPerPacket:1},null==this.format.bitsPerChannel)return this.emit("error","Unsupported encoding in AU file.");this.format.bytesPerPacket=this.format.bitsPerChannel/8*this.format.channelsPerFrame,4294967295!==e&&(t=this.format.bitsPerChannel/8,this.emit("duration",e/t/this.format.channelsPerFrame/this.format.sampleRate*1e3|0)),this.emit("format",this.format),this.readHeader=!0}if(this.readHeader)for(;this.stream.available(1);)this.emit("data",this.stream.readSingleBuffer(this.stream.remainingBytes()))}}(e=t("../demuxer"))}).call(this)},{"../demuxer":14}],17:[function(t,e,r){(function(){var e,r,i={}.hasOwnProperty;e=t("../demuxer"),r=t("./m4a"),function(t){function n(){return n.__super__.constructor.apply(this,arguments)}(function(t,e){for(var r in e)i.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype})(n,t),e.register(n),n.probe=function(t){return"caff"===t.peekString(0,4)},n.prototype.readChunk=function(){var t,e,i,n,a,s,o,u,c,l,h,f,p;if(!this.format&&this.stream.available(64)){if("caff"!==this.stream.readString(4))return this.emit("error","Invalid CAF, does not begin with 'caff'");if(this.stream.advance(4),"desc"!==this.stream.readString(4))return this.emit("error","Invalid CAF, 'caff' is not followed by 'desc'");if(0!==this.stream.readUInt32()||32!==this.stream.readUInt32())return this.emit("error","Invalid 'desc' size, should be 32");this.format={},this.format.sampleRate=this.stream.readFloat64(),this.format.formatID=this.stream.readString(4),a=this.stream.readUInt32(),"lpcm"===this.format.formatID&&(this.format.floatingPoint=Boolean(1&a),this.format.littleEndian=Boolean(2&a)),this.format.bytesPerPacket=this.stream.readUInt32(),this.format.framesPerPacket=this.stream.readUInt32(),this.format.channelsPerFrame=this.stream.readUInt32(),this.format.bitsPerChannel=this.stream.readUInt32(),this.emit("format",this.format)}for(;this.stream.available(1);){if(!this.headerCache&&(this.headerCache={type:this.stream.readString(4),oversize:0!==this.stream.readUInt32(),size:this.stream.readUInt32()},this.headerCache.oversize))return this.emit("error","Holy Shit, an oversized file, not supported in JS");switch(this.headerCache.type){case"kuki":this.stream.available(this.headerCache.size)&&("aac "===this.format.formatID?(u=this.stream.offset+this.headerCache.size,(i=r.readEsds(this.stream))&&this.emit("cookie",i),this.stream.seek(u)):(t=this.stream.readBuffer(this.headerCache.size),this.emit("cookie",t)),this.headerCache=null);break;case"pakt":if(this.stream.available(this.headerCache.size)){if(0!==this.stream.readUInt32())return this.emit("error","Sizes greater than 32 bits are not supported.");if(this.numPackets=this.stream.readUInt32(),0!==this.stream.readUInt32())return this.emit("error","Sizes greater than 32 bits are not supported.");for(this.numFrames=this.stream.readUInt32(),this.primingFrames=this.stream.readUInt32(),this.remainderFrames=this.stream.readUInt32(),this.emit("duration",this.numFrames/this.format.sampleRate*1e3|0),this.sentDuration=!0,e=0,c=0,h=0,p=this.numPackets;h<p;h+=1)this.addSeekPoint(e,c),e+=this.format.bytesPerPacket||r.readDescrLen(this.stream),c+=this.format.framesPerPacket||r.readDescrLen(this.stream);this.headerCache=null}break;case"info":for(n=this.stream.readUInt32(),o={},f=0;0<=n?f<n:f>n;0<=n?++f:--f)s=this.stream.readString(null),l=this.stream.readString(null),o[s]=l;this.emit("metadata",o),this.headerCache=null;break;case"data":this.sentFirstDataChunk||(this.stream.advance(4),this.headerCache.size-=4,0===this.format.bytesPerPacket||this.sentDuration||(this.numFrames=this.headerCache.size/this.format.bytesPerPacket,this.emit("duration",this.numFrames/this.format.sampleRate*1e3|0)),this.sentFirstDataChunk=!0),t=this.stream.readSingleBuffer(this.headerCache.size),this.headerCache.size-=t.length,this.emit("data",t),this.headerCache.size<=0&&(this.headerCache=null);break;default:this.stream.available(this.headerCache.size)&&(this.stream.advance(this.headerCache.size),this.headerCache=null)}}}}(e)}).call(this)},{"../demuxer":14,"./m4a":18}],18:[function(t,e,r){(function(){var r,i,n={}.hasOwnProperty,a=[].indexOf||function(t){for(var e=0,r=this.length;e<r;e++)if(e in this&&this[e]===t)return e;return-1};r=t("../demuxer"),i=function(t){var e,i,s,o,u,c,l,h,f,p,d;function g(){return g.__super__.constructor.apply(this,arguments)}return function(t,e){for(var r in e)n.call(e,r)&&(t[r]=e[r]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(g,t),r.register(g),i=["M4A ","M4P ","M4B ","M4V ","isom","mp42","qt  "],g.probe=function(t){var e;return"ftyp"===t.peekString(4,4)&&(e=t.peekString(8,4),a.call(i,e)>=0)},g.prototype.init=function(){return this.atoms=[],this.offsets=[],this.track=null,this.tracks=[]},u={},l={},o=function(t,e){var r,i,n,a,s;for(r=[],s=t.split(".").slice(0,-1),n=0,a=s.length;n<a;n++)i=s[n],r.push(i),l[r.join(".")]=!0;return null==u[t]&&(u[t]={}),u[t].fn=e},s=function(t,e){return null==u[t]&&(u[t]={}),u[t].after=e},g.prototype.readChunk=function(){var t,e;for(this.break=!1;this.stream.available(1)&&!this.break;){if(!this.readHeaders){if(!this.stream.available(8))return;if(this.len=this.stream.readUInt32()-8,this.type=this.stream.readString(4),0===this.len)continue;this.atoms.push(this.type),this.offsets.push(this.stream.offset+this.len),this.readHeaders=!0}if(e=this.atoms.join("."),null!=(t=u[e])?t.fn:void 0){if(!this.stream.available(this.len)&&"mdat"!==e)return;t.fn.call(this),e in l&&(this.readHeaders=!1)}else if(e in l)this.readHeaders=!1;else{if(!this.stream.available(this.len))return;this.stream.advance(this.len)}for(;this.stream.offset>=this.offsets[this.offsets.length-1];)(null!=(t=u[this.atoms.join(".")])?t.after:void 0)&&t.after.call(this),this.atoms.pop(),this.offsets.pop(),this.readHeaders=!1}},o("ftyp",function(){var t;return t=this.stream.readString(4),a.call(i,t)<0?this.emit("error","Not a valid M4A file."):this.stream.advance(this.len-4)}),o("moov.trak",function(){return this.track={},this.tracks.push(this.track)}),o("moov.trak.tkhd",function(){return this.stream.advance(4),this.stream.advance(8),this.track.id=this.stream.readUInt32(),this.stream.advance(this.len-16)}),o("moov.trak.mdia.hdlr",function(){return this.stream.advance(4),this.stream.advance(4),this.track.type=this.stream.readString(4),this.stream.advance(12),this.stream.advance(this.len-24)}),o("moov.trak.mdia.mdhd",function(){return this.stream.advance(4),this.stream.advance(8),this.track.timeScale=this.stream.readUInt32(),this.track.duration=this.stream.readUInt32(),this.stream.advance(4)}),e={ulaw:8,alaw:8,in24:24,in32:32,fl32:32,fl64:64},o("moov.trak.mdia.minf.stbl.stsd",function(){var t,r,i,n,a;return this.stream.advance(4),r=this.stream.readUInt32(),"soun"!==this.track.type?this.stream.advance(this.len-8):1!==r?this.emit("error","Only expecting one entry in sample description atom!"):(this.stream.advance(4),(t=this.track.format={}).formatID=this.stream.readString(4),this.stream.advance(6),this.stream.advance(2),i=this.stream.readUInt16(),this.stream.advance(6),t.channelsPerFrame=this.stream.readUInt16(),t.bitsPerChannel=this.stream.readUInt16(),this.stream.advance(4),t.sampleRate=this.stream.readUInt16(),this.stream.advance(2),1===i?(t.framesPerPacket=this.stream.readUInt32(),this.stream.advance(4),t.bytesPerFrame=this.stream.readUInt32(),this.stream.advance(4)):0!==i&&this.emit("error","Unknown version in stsd atom"),null!=e[t.formatID]&&(t.bitsPerChannel=e[t.formatID]),t.floatingPoint="fl32"===(n=t.formatID)||"fl64"===n,t.littleEndian="sowt"===t.formatID&&t.bitsPerChannel>8,"twos"===(a=t.formatID)||"sowt"===a||"in24"===a||"in32"===a||"fl32"===a||"fl64"===a||"raw "===a||"NONE"===a?t.formatID="lpcm":void 0)}),o("moov.trak.mdia.minf.stbl.stsd.alac",function(){return this.stream.advance(4),this.track.cookie=this.stream.readBuffer(this.len-4)}),o("moov.trak.mdia.minf.stbl.stsd.esds",function(){var t;return t=this.stream.offset+this.len,this.track.cookie=g.readEsds(this.stream),this.stream.seek(t)}),o("moov.trak.mdia.minf.stbl.stsd.wave.enda",function(){return this.track.format.littleEndian=!!this.stream.readUInt16()}),g.readDescrLen=function(t){var e,r,i;for(i=0,r=4;r--&&(e=t.readUInt8(),i=i<<7|127&e,128&e););return i},g.readEsds=function(t){var e,r,i;return t.advance(4),i=t.readUInt8(),r=g.readDescrLen(t),3===i?(t.advance(2),128&(e=t.readUInt8())&&t.advance(2),64&e&&t.advance(t.readUInt8()),32&e&&t.advance(2)):t.advance(2),i=t.readUInt8(),r=g.readDescrLen(t),4===i&&(t.readUInt8(),t.advance(1),t.advance(3),t.advance(4),t.advance(4),i=t.readUInt8(),r=g.readDescrLen(t),5===i)?t.readBuffer(r):null},o("moov.trak.mdia.minf.stbl.stts",function(){var t,e,r;for(this.stream.advance(4),t=this.stream.readUInt32(),this.track.stts=[],e=r=0;r<t;e=r+=1)this.track.stts[e]={count:this.stream.readUInt32(),duration:this.stream.readUInt32()};return this.setupSeekPoints()}),o("moov.trak.mdia.minf.stbl.stsc",function(){var t,e,r;for(this.stream.advance(4),t=this.stream.readUInt32(),this.track.stsc=[],e=r=0;r<t;e=r+=1)this.track.stsc[e]={first:this.stream.readUInt32(),count:this.stream.readUInt32(),id:this.stream.readUInt32()};return this.setupSeekPoints()}),o("moov.trak.mdia.minf.stbl.stsz",function(){var t,e,r;if(this.stream.advance(4),this.track.sampleSize=this.stream.readUInt32(),t=this.stream.readUInt32(),0===this.track.sampleSize&&t>0)for(this.track.sampleSizes=[],e=r=0;r<t;e=r+=1)this.track.sampleSizes[e]=this.stream.readUInt32();return this.setupSeekPoints()}),o("moov.trak.mdia.minf.stbl.stco",function(){var t,e,r;for(this.stream.advance(4),t=this.stream.readUInt32(),this.track.chunkOffsets=[],e=r=0;r<t;e=r+=1)this.track.chunkOffsets[e]=this.stream.readUInt32();return this.setupSeekPoints()}),o("moov.trak.tref.chap",function(){var t,e,r;for(t=this.len>>2,this.track.chapterTracks=[],e=r=0;r<t;e=r+=1)this.track.chapterTracks[e]=this.stream.readUInt32()}),g.prototype.setupSeekPoints=function(){var t,e,r,i,n,a,s,o,u,c,l,h,f,p,d;if(null!=this.track.chunkOffsets&&null!=this.track.stsc&&null!=this.track.sampleSize&&null!=this.track.stts){for(a=0,s=0,s=0,o=0,i=0,e=0,u=0,this.track.seekPoints=[],f=this.track.chunkOffsets,d=[],t=c=0,h=f.length;c<h;t=++c){for(r=f[t],l=0,p=this.track.stsc[a].count;l<p;l+=1)this.track.seekPoints.push({offset:e,position:r,timestamp:u}),n=this.track.sampleSize||this.track.sampleSizes[i++],e+=n,r+=n,u+=this.track.stts[s].duration,s+1<this.track.stts.length&&++o===this.track.stts[s].count&&(o=0,s++);a+1<this.track.stsc.length&&t+1===this.track.stsc[a+1].first?d.push(a++):d.push(void 0)}return d}},s("moov",function(){var t,e,r,i;for(null!=this.mdatOffset&&this.stream.seek(this.mdatOffset-8),i=this.tracks,e=0,r=i.length;e<r;e++)if("soun"===(t=i[e]).type){this.track=t;break}return"soun"!==this.track.type?(this.track=null,this.emit("error","No audio tracks in m4a file.")):(this.emit("format",this.track.format),this.emit("duration",this.track.duration/this.track.timeScale*1e3|0),this.track.cookie&&this.emit("cookie",this.track.cookie),this.seekPoints=this.track.seekPoints)}),o("mdat",function(){var t,e,r,i,n,a,s,o;if(!this.startedData){if(null==this.mdatOffset&&(this.mdatOffset=this.stream.offset),0===this.tracks.length)return t=Math.min(this.stream.remainingBytes(),this.len),this.stream.advance(t),void(this.len-=t);this.chunkIndex=0,this.stscIndex=0,this.sampleIndex=0,this.tailOffset=0,this.tailSamples=0,this.startedData=!0}if(!this.readChapters){if(this.readChapters=this.parseChapters(),this.break=!this.readChapters)return;this.stream.seek(this.mdatOffset)}if(n=this.track.chunkOffsets[this.chunkIndex]+this.tailOffset,r=0,this.stream.available(n-this.stream.offset)){for(this.stream.seek(n);this.chunkIndex<this.track.chunkOffsets.length;){for(i=this.track.stsc[this.stscIndex].count-this.tailSamples,e=0,a=o=0;o<i&&(s=this.track.sampleSize||this.track.sampleSizes[this.sampleIndex],this.stream.available(r+s));a=o+=1)r+=s,e+=s,this.sampleIndex++;if(a<i){this.tailOffset+=e,this.tailSamples+=a;break}if(this.chunkIndex++,this.tailOffset=0,this.tailSamples=0,this.stscIndex+1<this.track.stsc.length&&this.chunkIndex+1===this.track.stsc[this.stscIndex+1].first&&this.stscIndex++,n+r!==this.track.chunkOffsets[this.chunkIndex])break}return r>0?(this.emit("data",this.stream.readBuffer(r)),this.break=this.chunkIndex===this.track.chunkOffsets.length):this.break=!0}this.break=!0}),g.prototype.parseChapters=function(){var t,e,r,i,n,a,s,o,u,c,l,h,f;if(!((null!=(c=this.track.chapterTracks)?c.length:void 0)>0))return!0;for(e=this.track.chapterTracks[0],l=this.tracks,o=0,u=l.length;o<u&&(s=l[o]).id!==e;o++);for(s.id!==e&&this.emit("error","Chapter track does not exist."),null==this.chapters&&(this.chapters=[]);this.chapters.length<s.seekPoints.length;){if(n=s.seekPoints[this.chapters.length],!this.stream.available(n.position-this.stream.offset+32))return!1;if(this.stream.seek(n.position),r=this.stream.readUInt16(),a=null,!this.stream.available(r))return!1;r>2&&(65279!==(t=this.stream.peekUInt16())&&65534!==t||(a=this.stream.readString(r,"utf16-bom"))),null==a&&(a=this.stream.readString(r,"utf8")),i=null!=(h=null!=(f=s.seekPoints[this.chapters.length+1])?f.timestamp:void 0)?h:s.duration,this.chapters.push({title:a,timestamp:n.timestamp/s.timeScale*1e3|0,duration:(i-n.timestamp)/s.timeScale*1e3|0})}return this.emit("chapters",this.chapters),!0},o("moov.udta.meta",function(){return this.metadata={},this.stream.advance(4)}),s("moov.udta.meta",function(){return this.emit("metadata",this.metadata)}),(p=function(t,e,r){return o("moov.udta.meta.ilst."+t+".data",function(){return this.stream.advance(8),this.len-=8,r.call(this,e)})})("©alb","album",d=function(t){return this.metadata[t]=this.stream.readString(this.len,"utf8")}),p("©arg","arranger",d),p("©art","artist",d),p("©ART","artist",d),p("aART","albumArtist",d),p("catg","category",d),p("©com","composer",d),p("©cpy","copyright",d),p("cprt","copyright",d),p("©cmt","comments",d),p("©day","releaseDate",d),p("desc","description",d),p("©gen","genre",d),p("©grp","grouping",d),p("©isr","ISRC",d),p("keyw","keywords",d),p("©lab","recordLabel",d),p("ldes","longDescription",d),p("©lyr","lyrics",d),p("©nam","title",d),p("©phg","recordingCopyright",d),p("©prd","producer",d),p("©prf","performers",d),p("purd","purchaseDate",d),p("purl","podcastURL",d),p("©swf","songwriter",d),p("©too","encoder",d),p("©wrt","composer",d),p("covr","coverArt",function(t){return this.metadata[t]=this.stream.readBuffer(this.len)}),f=["Blues","Classic Rock","Country","Dance","Disco","Funk","Grunge","Hip-Hop","Jazz","Metal","New Age","Oldies","Other","Pop","R&B","Rap","Reggae","Rock","Techno","Industrial","Alternative","Ska","Death Metal","Pranks","Soundtrack","Euro-Techno","Ambient","Trip-Hop","Vocal","Jazz+Funk","Fusion","Trance","Classical","Instrumental","Acid","House","Game","Sound Clip","Gospel","Noise","AlternRock","Bass","Soul","Punk","Space","Meditative","Instrumental Pop","Instrumental Rock","Ethnic","Gothic","Darkwave","Techno-Industrial","Electronic","Pop-Folk","Eurodance","Dream","Southern Rock","Comedy","Cult","Gangsta","Top 40","Christian Rap","Pop/Funk","Jungle","Native American","Cabaret","New Wave","Psychadelic","Rave","Showtunes","Trailer","Lo-Fi","Tribal","Acid Punk","Acid Jazz","Polka","Retro","Musical","Rock & Roll","Hard Rock","Folk","Folk/Rock","National Folk","Swing","Fast Fusion","Bebob","Latin","Revival","Celtic","Bluegrass","Avantgarde","Gothic Rock","Progressive Rock","Psychedelic Rock","Symphonic Rock","Slow Rock","Big Band","Chorus","Easy Listening","Acoustic","Humour","Speech","Chanson","Opera","Chamber Music","Sonata","Symphony","Booty Bass","Primus","Porn Groove","Satire","Slow Jam","Club","Tango","Samba","Folklore","Ballad","Power Ballad","Rhythmic Soul","Freestyle","Duet","Punk Rock","Drum Solo","A Capella","Euro-House","Dance Hall"],p("gnre","genre",function(t){return this.metadata[t]=f[this.stream.readUInt16()-1]}),p("tmpo","tempo",function(t){return this.metadata[t]=this.stream.readUInt16()}),p("rtng","rating",function(t){var e;return e=this.stream.readUInt8(),this.metadata[t]=2===e?"Clean":0!==e?"Explicit":"None"}),p("disk","diskNumber",h=function(t){return this.stream.advance(2),this.metadata[t]=this.stream.readUInt16()+" of "+this.stream.readUInt16(),this.stream.advance(this.len-6)}),p("trkn","trackNumber",h),p("cpil","compilation",c=function(t){return this.metadata[t]=1===this.stream.readUInt8()}),p("pcst","podcast",c),p("pgap","gapless",c),g}(r),e.exports=i}).call(this)},{"../demuxer":14}],19:[function(t,e,r){(function(){var e,r={}.hasOwnProperty;!function(t){var i;function n(){return n.__super__.constructor.apply(this,arguments)}(function(t,e){for(var i in e)r.call(e,i)&&(t[i]=e[i]);function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype})(n,t),e.register(n),n.probe=function(t){return"RIFF"===t.peekString(0,4)&&"WAVE"===t.peekString(8,4)},i={1:"lpcm",3:"lpcm",6:"alaw",7:"ulaw"},n.prototype.readChunk=function(){var t,e,r;if(!this.readStart&&this.stream.available(12)){if("RIFF"!==this.stream.readString(4))return this.emit("error","Invalid WAV file.");if(this.fileSize=this.stream.readUInt32(!0),this.readStart=!0,"WAVE"!==this.stream.readString(4))return this.emit("error","Invalid WAV file.")}for(;this.stream.available(1);){switch(!this.readHeaders&&this.stream.available(8)&&(this.type=this.stream.readString(4),this.len=this.stream.readUInt32(!0)),this.type){case"fmt ":if(!((r=this.stream.readUInt16(!0))in i))return this.emit("error","Unsupported format in WAV file.");this.format={formatID:i[r],floatingPoint:3===r,littleEndian:"lpcm"===i[r],channelsPerFrame:this.stream.readUInt16(!0),sampleRate:this.stream.readUInt32(!0),framesPerPacket:1},this.stream.advance(4),this.stream.advance(2),this.format.bitsPerChannel=this.stream.readUInt16(!0),this.format.bytesPerPacket=this.format.bitsPerChannel/8*this.format.channelsPerFrame,this.emit("format",this.format),this.stream.advance(this.len-16);break;case"data":this.sentDuration||(e=this.format.bitsPerChannel/8,this.emit("duration",this.len/e/this.format.channelsPerFrame/this.format.sampleRate*1e3|0),this.sentDuration=!0),t=this.stream.readSingleBuffer(this.len),this.len-=t.length,this.readHeaders=this.len>0,this.emit("data",t);break;default:if(!this.stream.available(this.len))return;this.stream.advance(this.len)}"data"!==this.type&&(this.readHeaders=!1)}}}(e=t("../demuxer"))}).call(this)},{"../demuxer":14}],20:[function(t,e,r){(function(){var r,i,n=function(t,e){return function(){return t.apply(e,arguments)}},a={}.hasOwnProperty;i=t("./core/events"),r=function(t){var e;function r(t,e){this.sampleRate=t,this.channels=e,this.updateTime=n(this.updateTime,this),this.playing=!1,this.currentTime=0,this._lastTime=0}return function(t,e){for(var r in e)a.call(e,r)&&(t[r]=e[r]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(r,t),r.prototype.start=function(){if(!this.playing){if(this.playing=!0,null==this.device&&(this.device=r.create(this.sampleRate,this.channels)),!this.device)throw new Error("No supported audio device found.");return this._lastTime=this.device.getDeviceTime(),this._timer=setInterval(this.updateTime,200),this.device.on("refill",this.refill=function(t){return function(e){return t.emit("refill",e)}}(this))}},r.prototype.stop=function(){if(this.playing)return this.playing=!1,this.device.off("refill",this.refill),clearInterval(this._timer)},r.prototype.destroy=function(){var t;return this.stop(),null!=(t=this.device)?t.destroy():void 0},r.prototype.seek=function(t){return this.currentTime=t,this.playing&&(this._lastTime=this.device.getDeviceTime()),this.emit("timeUpdate",this.currentTime)},r.prototype.updateTime=function(){var t;return t=this.device.getDeviceTime(),this.currentTime+=(t-this._lastTime)/this.device.sampleRate*1e3|0,this._lastTime=t,this.emit("timeUpdate",this.currentTime)},e=[],r.register=function(t){return e.push(t)},r.create=function(t,r){var i,n,a;for(n=0,a=e.length;n<a;n++)if((i=e[n]).supported)return new i(t,r);return null},r}(i),e.exports=r}).call(this)},{"./core/events":8}],21:[function(t,e,r){(function(){var e,r,i,n=function(t,e){return function(){return t.apply(e,arguments)}},a={}.hasOwnProperty;i=t("../core/events"),r=t("../device"),e=t("../core/buffer"),function(t){var i,s;function o(t,e){this.sampleRate=t,this.channels=e,this.refill=n(this.refill,this),this.audio=new Audio,this.audio.mozSetup(this.channels,this.sampleRate),this.writePosition=0,this.prebufferSize=this.sampleRate/2,this.tail=null,this.timer=i(this.refill,100)}(function(t,e){for(var r in e)a.call(e,r)&&(t[r]=e[r]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype})(o,t),r.register(o),o.supported="undefined"!=typeof Audio&&null!==Audio&&"mozWriteAudio"in new Audio,o.prototype.refill=function(){var t,e,r,i;this.tail&&(i=this.audio.mozWriteAudio(this.tail),this.writePosition+=i,this.writePosition<this.tail.length?this.tail=this.tail.subarray(i):this.tail=null),r=this.audio.mozCurrentSampleOffset(),(t=r+this.prebufferSize-this.writePosition)>0&&(e=new Float32Array(t),this.emit("refill",e),(i=this.audio.mozWriteAudio(e))<e.length&&(this.tail=e.subarray(i)),this.writePosition+=i)},o.prototype.destroy=function(){return s(this.timer)},o.prototype.getDeviceTime=function(){return this.audio.mozCurrentSampleOffset()/this.channels},i=function(t,r){var i,n;return null==(i=e.makeBlobURL("setInterval(function() { postMessage('ping'); }, "+r+");"))?setInterval(t,r):((n=new Worker(i)).onmessage=t,n.url=i,n)},s=function(t){return t.terminate?(t.terminate(),URL.revokeObjectURL(t.url)):clearInterval(t)}}(i)}).call(this)},{"../core/buffer":6,"../core/events":8,"../device":20}],22:[function(t,e,r){function i(t,e,r,i){this.fromSampleRate=+t,this.toSampleRate=+e,this.channels=0|r,this.inputBufferLength=i,this.initialize()}i.prototype.initialize=function(){if(!(this.fromSampleRate>0&&this.toSampleRate>0&&this.channels>0))throw new Error("Invalid settings specified for the resampler.");if(this.fromSampleRate==this.toSampleRate)this.resampler=this.bypassResampler,this.ratioWeight=1;else{this.ratioWeight=this.fromSampleRate/this.toSampleRate,this.fromSampleRate<this.toSampleRate?(this.compileLinearInterpolationFunction(),this.lastWeight=1):(this.compileMultiTapFunction(),this.tailExists=!1,this.lastWeight=0);var t=Math.ceil(this.inputBufferLength*this.toSampleRate/this.fromSampleRate/this.channels*1.01)*this.channels+this.channels;this.outputBuffer=new Float32Array(t),this.lastOutput=new Float32Array(this.channels)}},i.prototype.compileLinearInterpolationFunction=function(){for(var t="var outputOffset = 0;    var bufferLength = buffer.length;    if (bufferLength > 0) {      var weight = this.lastWeight;      var firstWeight = 0;      var secondWeight = 0;      var sourceOffset = 0;      var outputOffset = 0;      var outputBuffer = this.outputBuffer;      for (; weight < 1; weight += "+this.ratioWeight+") {        secondWeight = weight % 1;        firstWeight = 1 - secondWeight;",e=0;e<this.channels;++e)t+="outputBuffer[outputOffset++] = (this.lastOutput["+e+"] * firstWeight) + (buffer["+e+"] * secondWeight);";t+="}      weight -= 1;      for (bufferLength -= "+this.channels+", sourceOffset = Math.floor(weight) * "+this.channels+"; sourceOffset < bufferLength;) {        secondWeight = weight % 1;        firstWeight = 1 - secondWeight;";for(var e=0;e<this.channels;++e)t+="outputBuffer[outputOffset++] = (buffer[sourceOffset"+(e>0?" + "+e:"")+"] * firstWeight) + (buffer[sourceOffset + "+(this.channels+e)+"] * secondWeight);";t+="weight += "+this.ratioWeight+";        sourceOffset = Math.floor(weight) * "+this.channels+";      }";for(var e=0;e<this.channels;++e)t+="this.lastOutput["+e+"] = buffer[sourceOffset++];";t+="this.lastWeight = weight % 1;    }    return this.outputBuffer;",this.resampler=Function("buffer",t)},i.prototype.compileMultiTapFunction=function(){for(var t="var outputOffset = 0;    var bufferLength = buffer.length;    if (bufferLength > 0) {      var weight = 0;",e=0;e<this.channels;++e)t+="var output"+e+" = 0;";for(t+="var actualPosition = 0;      var amountToNext = 0;      var alreadyProcessedTail = !this.tailExists;      this.tailExists = false;      var outputBuffer = this.outputBuffer;      var currentPosition = 0;      do {        if (alreadyProcessedTail) {          weight = "+this.ratioWeight+";",e=0;e<this.channels;++e)t+="output"+e+" = 0;";for(t+="}        else {          weight = this.lastWeight;",e=0;e<this.channels;++e)t+="output"+e+" = this.lastOutput["+e+"];";for(t+="alreadyProcessedTail = true;        }        while (weight > 0 && actualPosition < bufferLength) {          amountToNext = 1 + actualPosition - currentPosition;          if (weight >= amountToNext) {",e=0;e<this.channels;++e)t+="output"+e+" += buffer[actualPosition++] * amountToNext;";for(t+="currentPosition = actualPosition;            weight -= amountToNext;          }          else {",e=0;e<this.channels;++e)t+="output"+e+" += buffer[actualPosition"+(e>0?" + "+e:"")+"] * weight;";for(t+="currentPosition += weight;            weight = 0;            break;          }        }        if (weight <= 0) {",e=0;e<this.channels;++e)t+="outputBuffer[outputOffset++] = output"+e+" / "+this.ratioWeight+";";for(t+="}        else {          this.lastWeight = weight;",e=0;e<this.channels;++e)t+="this.lastOutput["+e+"] = output"+e+";";t+="this.tailExists = true;          break;        }      } while (actualPosition < bufferLength);    }    return this.outputBuffer;",this.resampler=Function("buffer",t)},i.prototype.bypassResampler=function(t){return t},e.exports=i},{}],23:[function(t,r,i){(function(e){(function(){var r,i,n,a=function(t,e){return function(){return t.apply(e,arguments)}},s={}.hasOwnProperty;i=t("../core/events"),r=t("../device"),n=t("./resampler"),function(t){var i,o,u;function c(t,e){this.sampleRate=t,this.channels=e,this.refill=a(this.refill,this),this.context=null!=u?u:u=new i,this.deviceSampleRate=this.context.sampleRate,this.bufferSize=Math.ceil(4096/(this.deviceSampleRate/this.sampleRate)*this.channels),this.bufferSize+=this.bufferSize%this.channels,this.deviceSampleRate!==this.sampleRate&&(this.resampler=new n(this.sampleRate,this.deviceSampleRate,this.channels,this.bufferSize)),this.node=this.context[o](4096,this.channels,this.channels),this.node.onaudioprocess=this.refill,this.node.connect(this.context.destination)}(function(t,e){for(var r in e)s.call(e,r)&&(t[r]=e[r]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype})(c,t),r.register(c),i=e.AudioContext||e.webkitAudioContext,c.supported=i&&("function"==typeof i.prototype[o="createScriptProcessor"]||"function"==typeof i.prototype[o="createJavaScriptNode"]),u=null,c.prototype.refill=function(t){var e,r,i,n,a,s,o,u,c,l;for(s=t.outputBuffer,e=s.numberOfChannels,r=new Array(e),n=o=0;o<e;n=o+=1)r[n]=s.getChannelData(n);for(i=new Float32Array(this.bufferSize),this.emit("refill",i),this.resampler&&(i=this.resampler.resampler(i)),n=u=0,l=s.length;u<l;n=u+=1)for(a=c=0;c<e;a=c+=1)r[a][n]=i[n*e+a]},c.prototype.destroy=function(){return this.node.disconnect(0)},c.prototype.getDeviceTime=function(){return this.context.currentTime*this.sampleRate}}(i)}).call(this)}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../core/events":8,"../device":20,"./resampler":22}],24:[function(t,e,r){(function(){var t;t=function(){function t(t,e){t&&e&&Object.defineProperty(this,"value",{get:function(){return t[e]}})}return t.prototype.process=function(t){},t}(),e.exports=t}).call(this)},{}],25:[function(t,e,r){(function(){var r,i,n={}.hasOwnProperty;i=t("../filter"),r=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return function(t,e){for(var r in e)n.call(e,r)&&(t[r]=e[r]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(e,t),e.prototype.process=function(t){var e,r,i,n;if(0!==this.value)for(r=Math.max(-50,Math.min(50,this.value)),e=i=0,n=t.length;i<n;e=i+=2)t[e]*=Math.min(1,(50-r)/50),t[e+1]*=Math.min(1,(50+r)/50)},e}(i),e.exports=r}).call(this)},{"../filter":24}],26:[function(t,e,r){(function(){var r,i,n={}.hasOwnProperty;r=t("../filter"),i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return function(t,e){for(var r in e)n.call(e,r)&&(t[r]=e[r]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(e,t),e.prototype.process=function(t){var e,r,i,n;if(!(this.value>=100))for(r=Math.max(0,Math.min(100,this.value))/100,e=i=0,n=t.length;i<n;e=i+=1)t[e]*=r},e}(r),e.exports=i}).call(this)},{"../filter":24}],27:[function(t,e,r){(function(){var r,i,n,a,s,o,u,c=function(t,e){return function(){return t.apply(e,arguments)}},l={}.hasOwnProperty;a=t("./core/events"),r=t("./asset"),u=t("./filters/volume"),n=t("./filters/balance"),o=t("./queue"),i=t("./device"),s=function(t){function e(t){this.asset=t,this.startPlaying=c(this.startPlaying,this),this.playing=!1,this.buffered=0,this.currentTime=0,this.duration=0,this.volume=100,this.pan=0,this.metadata={},this.filters=[new u(this,"volume"),new n(this,"pan")],this.asset.on("buffer",function(t){return function(e){return t.buffered=e,t.emit("buffer",t.buffered)}}(this)),this.asset.on("decodeStart",function(t){return function(){return t.queue=new o(t.asset),t.queue.once("ready",t.startPlaying)}}(this)),this.asset.on("format",function(t){return function(e){return t.format=e,t.emit("format",t.format)}}(this)),this.asset.on("metadata",function(t){return function(e){return t.metadata=e,t.emit("metadata",t.metadata)}}(this)),this.asset.on("duration",function(t){return function(e){return t.duration=e,t.emit("duration",t.duration)}}(this)),this.asset.on("error",function(t){return function(e){return t.emit("error",e)}}(this))}return function(t,e){for(var r in e)l.call(e,r)&&(t[r]=e[r]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(e,t),e.fromURL=function(t,i){return new e(r.fromURL(t,i))},e.fromFile=function(t){return new e(r.fromFile(t))},e.fromBuffer=function(t){return new e(r.fromBuffer(t))},e.prototype.preload=function(){if(this.asset)return this.startedPreloading=!0,this.asset.start(!1)},e.prototype.play=function(){var t;if(!this.playing)return this.startedPreloading||this.preload(),this.playing=!0,null!=(t=this.device)?t.start():void 0},e.prototype.pause=function(){var t;if(this.playing)return this.playing=!1,null!=(t=this.device)?t.stop():void 0},e.prototype.togglePlayback=function(){return this.playing?this.pause():this.play()},e.prototype.stop=function(){var t;return this.pause(),this.asset.stop(),null!=(t=this.device)?t.destroy():void 0},e.prototype.seek=function(t){var e;return null!=(e=this.device)&&e.stop(),this.queue.once("ready",function(t){return function(){var e,r;if(null!=(e=t.device)&&e.seek(t.currentTime),t.playing)return null!=(r=t.device)?r.start():void 0}}(this)),t=t/1e3*this.format.sampleRate,t=this.asset.decoder.seek(t),this.currentTime=t/this.format.sampleRate*1e3|0,this.queue.reset(),this.currentTime},e.prototype.startPlaying=function(){var t,e;return t=this.queue.read(),e=0,this.device=new i(this.format.sampleRate,this.format.channelsPerFrame),this.device.on("timeUpdate",function(t){return function(e){return t.currentTime=e,t.emit("progress",t.currentTime)}}(this)),this.refill=function(r){return function(i){var n,a,s,o,u,c;if(r.playing){for(t||(t=r.queue.read(),e=0),n=0;t&&n<i.length;){for(a=Math.min(t.length-e,i.length-n),s=0;s<a;s+=1)i[n++]=t[e++];e===t.length&&(t=r.queue.read(),e=0)}for(c=r.filters,o=0,u=c.length;o<u;o++)c[o].process(i);t||(r.queue.ended?(r.currentTime=r.duration,r.emit("progress",r.currentTime),r.emit("end"),r.stop()):r.device.stop())}}}(this),this.device.on("refill",this.refill),this.playing&&this.device.start(),this.emit("ready")},e.prototype.destroy=function(){var t,e;return this.stop(),null!=(t=this.device)&&t.off(),null!=(e=this.asset)&&e.destroy(),this.off()},e}(a),e.exports=s}).call(this)},{"./asset":1,"./core/events":8,"./device":20,"./filters/balance":25,"./filters/volume":26,"./queue":28}],28:[function(t,e,r){(function(){var r,i,n=function(t,e){return function(){return t.apply(e,arguments)}},a={}.hasOwnProperty;r=t("./core/events"),i=function(t){function e(t){this.asset=t,this.write=n(this.write,this),this.readyMark=64,this.finished=!1,this.buffering=!0,this.ended=!1,this.buffers=[],this.asset.on("data",this.write),this.asset.on("end",function(t){return function(){return t.ended=!0}}(this)),this.asset.decodePacket()}return function(t,e){for(var r in e)a.call(e,r)&&(t[r]=e[r]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(e,t),e.prototype.write=function(t){if(t&&this.buffers.push(t),this.buffering)return this.buffers.length>=this.readyMark||this.ended?(this.buffering=!1,this.emit("ready")):this.asset.decodePacket()},e.prototype.read=function(){return 0===this.buffers.length?null:(this.asset.decodePacket(),this.buffers.shift())},e.prototype.reset=function(){return this.buffers.length=0,this.buffering=!0,this.asset.decodePacket()},e}(r),e.exports=i}).call(this)},{"./core/events":8}],29:[function(t,e,r){var i,n,a,s={}.hasOwnProperty;n=t("../../core/events"),i=t("../../core/buffer"),a=function(t){function e(t){if(this.file=t,"undefined"==typeof FileReader||null===FileReader)return this.emit("error","This browser does not have FileReader support.");this.offset=0,this.length=this.file.size,this.chunkSize=1<<20,this.file[this.slice="slice"]||this.file[this.slice="webkitSlice"]||this.file[this.slice="mozSlice"]}return function(t,e){for(var r in e)s.call(e,r)&&(t[r]=e[r]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(e,t),e.prototype.start=function(){return this.reader&&!this.active?this.loop():(this.reader=new FileReader,this.active=!0,this.reader.onload=function(t){return function(e){var r;if(r=new i(new Uint8Array(e.target.result)),t.offset+=r.length,t.emit("data",r),t.active=!1,t.offset<t.length)return t.loop()}}(this),this.reader.onloadend=function(t){return function(){if(t.offset===t.length)return t.emit("end"),t.reader=null}}(this),this.reader.onerror=function(t){return function(e){return t.emit("error",e)}}(this),this.reader.onprogress=function(t){return function(e){return t.emit("progress",(t.offset+e.loaded)/t.length*100)}}(this),this.loop())},e.prototype.loop=function(){var t,e;return this.active=!0,e=Math.min(this.offset+this.chunkSize,this.length),t=this.file[this.slice](this.offset,e),this.reader.readAsArrayBuffer(t)},e.prototype.pause=function(){var t;this.active=!1;try{return null!=(t=this.reader)?t.abort():void 0}catch(t){}},e.prototype.reset=function(){return this.pause(),this.offset=0},e}(n),e.exports=a},{"../../core/buffer":6,"../../core/events":8}],30:[function(t,e,r){var i,n,a,s={}.hasOwnProperty;n=t("../../core/events"),i=t("../../core/buffer"),a=function(t){function e(t,e){this.url=t,this.opts=null!=e?e:{},this.chunkSize=1<<20,this.inflight=!1,this.opts.length&&(this.length=this.opts.length),this.reset()}return function(t,e){for(var r in e)s.call(e,r)&&(t[r]=e[r]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(e,t),e.prototype.start=function(){return this.length&&!this.inflight?this.loop():(this.inflight=!0,this.xhr=new XMLHttpRequest,this.xhr.onload=function(t){return function(e){return t.length=parseInt(t.xhr.getResponseHeader("Content-Length")),t.inflight=!1,t.loop()}}(this),this.xhr.onerror=function(t){return function(e){return t.pause(),t.emit("error",e)}}(this),this.xhr.onabort=function(t){return function(e){return t.inflight=!1}}(this),this.xhr.open("HEAD",this.url,!0),this.xhr.send(null))},e.prototype.loop=function(){var t;return this.inflight||!this.length?this.emit("error","Something is wrong in HTTPSource.loop"):(this.inflight=!0,this.xhr=new XMLHttpRequest,this.xhr.onload=function(t){return function(e){var r,n,a,s,o,u;if(t.xhr.response)r=new Uint8Array(t.xhr.response);else for(s=t.xhr.responseText,r=new Uint8Array(s.length),a=o=0,u=s.length;0<=u?o<u:o>u;a=0<=u?++o:--o)r[a]=255&s.charCodeAt(a);if(n=new i(r),t.offset+=n.length,t.emit("data",n),t.offset>=t.length&&t.emit("end"),t.inflight=!1,!(t.offset>=t.length))return t.loop()}}(this),this.xhr.onprogress=function(t){return function(e){return t.emit("progress",(t.offset+e.loaded)/t.length*100)}}(this),this.xhr.onerror=function(t){return function(e){return t.emit("error",e),t.pause()}}(this),this.xhr.onabort=function(t){return function(e){return t.inflight=!1}}(this),this.xhr.open("GET",this.url,!0),this.xhr.responseType="arraybuffer",t=Math.min(this.offset+this.chunkSize,this.length-1),this.xhr.setRequestHeader("If-None-Match","webkit-no-cache"),this.xhr.setRequestHeader("Range","bytes="+this.offset+"-"+t),this.xhr.overrideMimeType("text/plain; charset=x-user-defined"),this.xhr.send(null))},e.prototype.pause=function(){var t;return this.inflight=!1,null!=(t=this.xhr)?t.abort():void 0},e.prototype.reset=function(){return this.pause(),this.offset=0},e}(n),e.exports=a},{"../../core/buffer":6,"../../core/events":8}],31:[function(t,r,i){(function(e){(function(){var i,n,a,s,o=function(t,e){return function(){return t.apply(e,arguments)}},u={}.hasOwnProperty;s=t("../core/events"),n=t("../core/bufferlist"),i=t("../core/buffer"),a=function(t){var r,a;function s(t){this.loop=o(this.loop,this),t instanceof n?this.list=t:(this.list=new n,this.list.append(new i(t))),this.paused=!0}return function(t,e){for(var r in e)u.call(e,r)&&(t[r]=e[r]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(s,t),a=e.setImmediate||function(t){return e.setTimeout(t,0)},r=e.clearImmediate||function(t){return e.clearTimeout(t)},s.prototype.start=function(){return this.paused=!1,this._timer=a(this.loop)},s.prototype.loop=function(){return this.emit("progress",(this.list.numBuffers-this.list.availableBuffers+1)/this.list.numBuffers*100|0),this.emit("data",this.list.first),this.list.advance()?a(this.loop):this.emit("end")},s.prototype.pause=function(){return r(this._timer),this.paused=!0},s.prototype.reset=function(){return this.pause(),this.list.rewind()},s}(s),r.exports=a}).call(this)}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../core/buffer":6,"../core/bufferlist":7,"../core/events":8}],32:[function(t,e,r){var i,n,a;for(i in a=t("./src/aurora"))n=a[i],r[i]=n;t("./src/devices/webaudio"),t("./src/devices/mozilla")},{"./src/aurora":2,"./src/devices/mozilla":21,"./src/devices/webaudio":23}]},{},[32])(32)}).call(this,r(8))},function(t,e,r){var i=r(103),n=r(104),a=r(105);t.exports=function(t,e){return i(t)||n(t,e)||a()}},function(t,e,r){var i=r(0);r(1),t.exports=i.cipher=i.cipher||{},i.cipher.algorithms=i.cipher.algorithms||{},i.cipher.createCipher=function(t,e){var r=t;if("string"==typeof r&&(r=i.cipher.getAlgorithm(r))&&(r=r()),!r)throw new Error("Unsupported algorithm: "+t);return new i.cipher.BlockCipher({algorithm:r,key:e,decrypt:!1})},i.cipher.createDecipher=function(t,e){var r=t;if("string"==typeof r&&(r=i.cipher.getAlgorithm(r))&&(r=r()),!r)throw new Error("Unsupported algorithm: "+t);return new i.cipher.BlockCipher({algorithm:r,key:e,decrypt:!0})},i.cipher.registerAlgorithm=function(t,e){t=t.toUpperCase(),i.cipher.algorithms[t]=e},i.cipher.getAlgorithm=function(t){return(t=t.toUpperCase())in i.cipher.algorithms?i.cipher.algorithms[t]:null};var n=i.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};n.prototype.start=function(t){t=t||{};var e={};for(var r in t)e[r]=t[r];e.decrypt=this._decrypt,this._finish=!1,this._input=i.util.createBuffer(),this.output=t.output||i.util.createBuffer(),this.mode.start(e)},n.prototype.update=function(t){for(t&&this._input.putBuffer(t);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()},n.prototype.finish=function(t){!t||"ECB"!==this.mode.name&&"CBC"!==this.mode.name||(this.mode.pad=function(e){return t(this.blockSize,e,!1)},this.mode.unpad=function(e){return t(this.blockSize,e,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e))&&(this._finish=!0,this.update(),!(this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e))&&!(this.mode.afterFinish&&!this.mode.afterFinish(this.output,e)))}},function(t,e,r){var i=r(0);r(6),r(1);var n=t.exports=i.md5=i.md5||{};i.md.md5=i.md.algorithms.md5=n,n.create=function(){c||function(){a=String.fromCharCode(128),a+=i.util.fillString(String.fromCharCode(0),64),s=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],o=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],u=new Array(64);for(var t=0;t<64;++t)u[t]=Math.floor(4294967296*Math.abs(Math.sin(t+1)));c=!0}();var t=null,e=i.util.createBuffer(),r=new Array(16),n={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var r=n.messageLengthSize/4,a=0;a<r;++a)n.fullMessageLength.push(0);return e=i.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},n}};return n.start(),n.update=function(a,s){"utf8"===s&&(a=i.util.encodeUtf8(a));var o=a.length;n.messageLength+=o,o=[o/4294967296>>>0,o>>>0];for(var u=n.fullMessageLength.length-1;u>=0;--u)n.fullMessageLength[u]+=o[1],o[1]=o[0]+(n.fullMessageLength[u]/4294967296>>>0),n.fullMessageLength[u]=n.fullMessageLength[u]>>>0,o[0]=o[1]/4294967296>>>0;return e.putBytes(a),l(t,r,e),(e.read>2048||0===e.length())&&e.compact(),n},n.digest=function(){var s=i.util.createBuffer();s.putBytes(e.bytes());var o=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize&n.blockLength-1;s.putBytes(a.substr(0,n.blockLength-o));for(var u,c=0,h=n.fullMessageLength.length-1;h>=0;--h)c=(u=8*n.fullMessageLength[h]+c)/4294967296>>>0,s.putInt32Le(u>>>0);var f={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3};l(f,r,s);var p=i.util.createBuffer();return p.putInt32Le(f.h0),p.putInt32Le(f.h1),p.putInt32Le(f.h2),p.putInt32Le(f.h3),p},n};var a=null,s=null,o=null,u=null,c=!1;function l(t,e,r){for(var i,n,a,c,l,h,f,p=r.length();p>=64;){for(n=t.h0,a=t.h1,c=t.h2,l=t.h3,f=0;f<16;++f)e[f]=r.getInt32Le(),i=n+(l^a&(c^l))+u[f]+e[f],n=l,l=c,c=a,a+=i<<(h=o[f])|i>>>32-h;for(;f<32;++f)i=n+(c^l&(a^c))+u[f]+e[s[f]],n=l,l=c,c=a,a+=i<<(h=o[f])|i>>>32-h;for(;f<48;++f)i=n+(a^c^l)+u[f]+e[s[f]],n=l,l=c,c=a,a+=i<<(h=o[f])|i>>>32-h;for(;f<64;++f)i=n+(c^(a|~l))+u[f]+e[s[f]],n=l,l=c,c=a,a+=i<<(h=o[f])|i>>>32-h;t.h0=t.h0+n|0,t.h1=t.h1+a|0,t.h2=t.h2+c|0,t.h3=t.h3+l|0,p-=64}}},function(t,e,r){(function(e){var i=r(0);r(15),r(6),r(1);var n,a=i.pkcs5=i.pkcs5||{};i.util.isNodejs&&!i.options.usePureJavaScript&&(n=r(43)),t.exports=i.pbkdf2=a.pbkdf2=function(t,r,a,s,o,u){if("function"==typeof o&&(u=o,o=null),i.util.isNodejs&&!i.options.usePureJavaScript&&n.pbkdf2&&(null===o||"object"!=typeof o)&&(n.pbkdf2Sync.length>4||!o||"sha1"===o))return"string"!=typeof o&&(o="sha1"),t=new e(t,"binary"),r=new e(r,"binary"),u?4===n.pbkdf2Sync.length?n.pbkdf2(t,r,a,s,function(t,e){if(t)return u(t);u(null,e.toString("binary"))}):n.pbkdf2(t,r,a,s,o,function(t,e){if(t)return u(t);u(null,e.toString("binary"))}):4===n.pbkdf2Sync.length?n.pbkdf2Sync(t,r,a,s).toString("binary"):n.pbkdf2Sync(t,r,a,s,o).toString("binary");if(void 0!==o&&null!==o||(o="sha1"),"string"==typeof o){if(!(o in i.md.algorithms))throw new Error("Unknown hash algorithm: "+o);o=i.md[o].create()}var c=o.digestLength;if(s>4294967295*c){var l=new Error("Derived key is too long.");if(u)return u(l);throw l}var h=Math.ceil(s/c),f=s-(h-1)*c,p=i.hmac.create();p.start(o,t);var d,g,y,m="";if(!u){for(var v=1;v<=h;++v){p.start(null,null),p.update(r),p.update(i.util.int32ToBytes(v)),d=y=p.digest().getBytes();for(var _=2;_<=a;++_)p.start(null,null),p.update(y),g=p.digest().getBytes(),d=i.util.xorBytes(d,g,c),y=g;m+=v<h?d:d.substr(0,f)}return m}v=1;function b(){if(v>h)return u(null,m);p.start(null,null),p.update(r),p.update(i.util.int32ToBytes(v)),d=y=p.digest().getBytes(),_=2,C()}function C(){if(_<=a)return p.start(null,null),p.update(y),g=p.digest().getBytes(),d=i.util.xorBytes(d,g,c),y=g,++_,i.util.setImmediate(C);m+=v<h?d:d.substr(0,f),++v,b()}b()}}).call(this,r(3).Buffer)},function(t,e,r){var i=r(0);r(9),r(5),r(18),r(6),r(76),r(10),r(13),r(31),r(19),r(1);var n=i.asn1,a=t.exports=i.pki=i.pki||{},s=a.oids,o={};o.CN=s.commonName,o.commonName="CN",o.C=s.countryName,o.countryName="C",o.L=s.localityName,o.localityName="L",o.ST=s.stateOrProvinceName,o.stateOrProvinceName="ST",o.O=s.organizationName,o.organizationName="O",o.OU=s.organizationalUnitName,o.organizationalUnitName="OU",o.E=s.emailAddress,o.emailAddress="E";var u=i.pki.rsa.publicKeyValidator,c={name:"Certificate",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:n.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:n.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:n.Class.UNIVERSAL,type:n.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:n.Class.UNIVERSAL,type:n.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:n.Class.UNIVERSAL,type:n.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:n.Class.UNIVERSAL,type:n.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},u,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:n.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:n.Class.UNIVERSAL,type:n.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:n.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:n.Class.UNIVERSAL,type:n.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:n.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:n.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:n.Class.UNIVERSAL,type:n.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},l={name:"rsapss",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:n.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:n.Class.UNIVERSAL,type:n.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:n.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:n.Class.UNIVERSAL,type:n.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:n.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:n.Class.UNIVERSAL,type:n.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:n.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:n.Class.UNIVERSAL,type:n.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},h={name:"CertificationRequestInfo",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},u,{name:"CertificationRequestInfo.attributes",tagClass:n.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:n.Class.UNIVERSAL,type:n.Type.SET,constructed:!0}]}]}]},f={name:"CertificationRequest",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[h,{name:"CertificationRequest.signatureAlgorithm",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:n.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:n.Class.UNIVERSAL,type:n.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};function p(t,e){"string"==typeof e&&(e={shortName:e});for(var r,i=null,n=0;null===i&&n<t.attributes.length;++n)r=t.attributes[n],e.type&&e.type===r.type?i=r:e.name&&e.name===r.name?i=r:e.shortName&&e.shortName===r.shortName&&(i=r);return i}a.RDNAttributesAsArray=function(t,e){for(var r,i,a,u=[],c=0;c<t.value.length;++c){r=t.value[c];for(var l=0;l<r.value.length;++l)a={},i=r.value[l],a.type=n.derToOid(i.value[0].value),a.value=i.value[1].value,a.valueTagClass=i.value[1].type,a.type in s&&(a.name=s[a.type],a.name in o&&(a.shortName=o[a.name])),e&&(e.update(a.type),e.update(a.value)),u.push(a)}return u},a.CRIAttributesAsArray=function(t){for(var e=[],r=0;r<t.length;++r)for(var i=t[r],u=n.derToOid(i.value[0].value),c=i.value[1].value,l=0;l<c.length;++l){var h={};if(h.type=u,h.value=c[l].value,h.valueTagClass=c[l].type,h.type in s&&(h.name=s[h.type],h.name in o&&(h.shortName=o[h.name])),h.type===s.extensionRequest){h.extensions=[];for(var f=0;f<h.value.length;++f)h.extensions.push(a.certificateExtensionFromAsn1(h.value[f]))}e.push(h)}return e};var d=function(t,e,r){var i={};if(t!==s["RSASSA-PSS"])return i;r&&(i={hash:{algorithmOid:s.sha1},mgf:{algorithmOid:s.mgf1,hash:{algorithmOid:s.sha1}},saltLength:20});var a={},o=[];if(!n.validate(e,l,a,o)){var u=new Error("Cannot read RSASSA-PSS parameter block.");throw u.errors=o,u}return void 0!==a.hashOid&&(i.hash=i.hash||{},i.hash.algorithmOid=n.derToOid(a.hashOid)),void 0!==a.maskGenOid&&(i.mgf=i.mgf||{},i.mgf.algorithmOid=n.derToOid(a.maskGenOid),i.mgf.hash=i.mgf.hash||{},i.mgf.hash.algorithmOid=n.derToOid(a.maskGenHashOid)),void 0!==a.saltLength&&(i.saltLength=a.saltLength.charCodeAt(0)),i};function g(t){for(var e,r,a=n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[]),s=t.attributes,o=0;o<s.length;++o){var u=(e=s[o]).value,c=n.Type.PRINTABLESTRING;"valueTagClass"in e&&(c=e.valueTagClass)===n.Type.UTF8&&(u=i.util.encodeUtf8(u)),r=n.create(n.Class.UNIVERSAL,n.Type.SET,!0,[n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(e.type).getBytes()),n.create(n.Class.UNIVERSAL,c,!1,u)])]),a.value.push(r)}return a}function y(t){for(var e,r=0;r<t.length;++r){if(void 0===(e=t[r]).name&&(e.type&&e.type in a.oids?e.name=a.oids[e.type]:e.shortName&&e.shortName in o&&(e.name=a.oids[o[e.shortName]])),void 0===e.type){if(!(e.name&&e.name in a.oids))throw(u=new Error("Attribute type not specified.")).attribute=e,u;e.type=a.oids[e.name]}if(void 0===e.shortName&&e.name&&e.name in o&&(e.shortName=o[e.name]),e.type===s.extensionRequest&&(e.valueConstructed=!0,e.valueTagClass=n.Type.SEQUENCE,!e.value&&e.extensions)){e.value=[];for(var i=0;i<e.extensions.length;++i)e.value.push(a.certificateExtensionToAsn1(m(e.extensions[i])))}var u;if(void 0===e.value)throw(u=new Error("Attribute value not specified.")).attribute=e,u}}function m(t,e){if(e=e||{},void 0===t.name&&t.id&&t.id in a.oids&&(t.name=a.oids[t.id]),void 0===t.id){if(!(t.name&&t.name in a.oids))throw(C=new Error("Extension ID not specified.")).extension=t,C;t.id=a.oids[t.name]}if(void 0!==t.value)return t;if("keyUsage"===t.name){var r=0,o=0,u=0;t.digitalSignature&&(o|=128,r=7),t.nonRepudiation&&(o|=64,r=6),t.keyEncipherment&&(o|=32,r=5),t.dataEncipherment&&(o|=16,r=4),t.keyAgreement&&(o|=8,r=3),t.keyCertSign&&(o|=4,r=2),t.cRLSign&&(o|=2,r=1),t.encipherOnly&&(o|=1,r=0),t.decipherOnly&&(u|=128,r=7);var c=String.fromCharCode(r);0!==u?c+=String.fromCharCode(o)+String.fromCharCode(u):0!==o&&(c+=String.fromCharCode(o)),t.value=n.create(n.Class.UNIVERSAL,n.Type.BITSTRING,!1,c)}else if("basicConstraints"===t.name)t.value=n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[]),t.cA&&t.value.value.push(n.create(n.Class.UNIVERSAL,n.Type.BOOLEAN,!1,String.fromCharCode(255))),"pathLenConstraint"in t&&t.value.value.push(n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,n.integerToDer(t.pathLenConstraint).getBytes()));else if("extKeyUsage"===t.name){t.value=n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[]);var l=t.value.value;for(var h in t)!0===t[h]&&(h in s?l.push(n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(s[h]).getBytes())):-1!==h.indexOf(".")&&l.push(n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(h).getBytes())))}else if("nsCertType"===t.name){r=0,o=0;t.client&&(o|=128,r=7),t.server&&(o|=64,r=6),t.email&&(o|=32,r=5),t.objsign&&(o|=16,r=4),t.reserved&&(o|=8,r=3),t.sslCA&&(o|=4,r=2),t.emailCA&&(o|=2,r=1),t.objCA&&(o|=1,r=0);c=String.fromCharCode(r);0!==o&&(c+=String.fromCharCode(o)),t.value=n.create(n.Class.UNIVERSAL,n.Type.BITSTRING,!1,c)}else if("subjectAltName"===t.name||"issuerAltName"===t.name){t.value=n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[]);for(var f=0;f<t.altNames.length;++f){c=(v=t.altNames[f]).value;if(7===v.type&&v.ip){if(null===(c=i.util.bytesFromIP(v.ip)))throw(C=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.')).extension=t,C}else 8===v.type&&(c=v.oid?n.oidToDer(n.oidToDer(v.oid)):n.oidToDer(c));t.value.value.push(n.create(n.Class.CONTEXT_SPECIFIC,v.type,!1,c))}}else if("subjectKeyIdentifier"===t.name&&e.cert){var p=e.cert.generateSubjectKeyIdentifier();t.subjectKeyIdentifier=p.toHex(),t.value=n.create(n.Class.UNIVERSAL,n.Type.OCTETSTRING,!1,p.getBytes())}else if("authorityKeyIdentifier"===t.name&&e.cert){t.value=n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[]);l=t.value.value;if(t.keyIdentifier){var d=!0===t.keyIdentifier?e.cert.generateSubjectKeyIdentifier().getBytes():t.keyIdentifier;l.push(n.create(n.Class.CONTEXT_SPECIFIC,0,!1,d))}if(t.authorityCertIssuer){var y=[n.create(n.Class.CONTEXT_SPECIFIC,4,!0,[g(!0===t.authorityCertIssuer?e.cert.issuer:t.authorityCertIssuer)])];l.push(n.create(n.Class.CONTEXT_SPECIFIC,1,!0,y))}if(t.serialNumber){var m=i.util.hexToBytes(!0===t.serialNumber?e.cert.serialNumber:t.serialNumber);l.push(n.create(n.Class.CONTEXT_SPECIFIC,2,!1,m))}}else if("cRLDistributionPoints"===t.name){t.value=n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[]);l=t.value.value;var v,_=n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[]),b=n.create(n.Class.CONTEXT_SPECIFIC,0,!0,[]);for(f=0;f<t.altNames.length;++f){c=(v=t.altNames[f]).value;if(7===v.type&&v.ip){if(null===(c=i.util.bytesFromIP(v.ip)))throw(C=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.')).extension=t,C}else 8===v.type&&(c=v.oid?n.oidToDer(n.oidToDer(v.oid)):n.oidToDer(c));b.value.push(n.create(n.Class.CONTEXT_SPECIFIC,v.type,!1,c))}_.value.push(n.create(n.Class.CONTEXT_SPECIFIC,0,!0,[b])),l.push(_)}var C;if(void 0===t.value)throw(C=new Error("Extension value not specified.")).extension=t,C;return t}function v(t,e){switch(t){case s["RSASSA-PSS"]:var r=[];return void 0!==e.hash.algorithmOid&&r.push(n.create(n.Class.CONTEXT_SPECIFIC,0,!0,[n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(e.hash.algorithmOid).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.NULL,!1,"")])])),void 0!==e.mgf.algorithmOid&&r.push(n.create(n.Class.CONTEXT_SPECIFIC,1,!0,[n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(e.mgf.algorithmOid).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(e.mgf.hash.algorithmOid).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.NULL,!1,"")])])])),void 0!==e.saltLength&&r.push(n.create(n.Class.CONTEXT_SPECIFIC,2,!0,[n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,n.integerToDer(e.saltLength).getBytes())])),n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,r);default:return n.create(n.Class.UNIVERSAL,n.Type.NULL,!1,"")}}a.certificateFromPem=function(t,e,r){var s=i.pem.decode(t)[0];if("CERTIFICATE"!==s.type&&"X509 CERTIFICATE"!==s.type&&"TRUSTED CERTIFICATE"!==s.type){var o=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw o.headerType=s.type,o}if(s.procType&&"ENCRYPTED"===s.procType.type)throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var u=n.fromDer(s.body,r);return a.certificateFromAsn1(u,e)},a.certificateToPem=function(t,e){var r={type:"CERTIFICATE",body:n.toDer(a.certificateToAsn1(t)).getBytes()};return i.pem.encode(r,{maxline:e})},a.publicKeyFromPem=function(t){var e=i.pem.decode(t)[0];if("PUBLIC KEY"!==e.type&&"RSA PUBLIC KEY"!==e.type){var r=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw r.headerType=e.type,r}if(e.procType&&"ENCRYPTED"===e.procType.type)throw new Error("Could not convert public key from PEM; PEM is encrypted.");var s=n.fromDer(e.body);return a.publicKeyFromAsn1(s)},a.publicKeyToPem=function(t,e){var r={type:"PUBLIC KEY",body:n.toDer(a.publicKeyToAsn1(t)).getBytes()};return i.pem.encode(r,{maxline:e})},a.publicKeyToRSAPublicKeyPem=function(t,e){var r={type:"RSA PUBLIC KEY",body:n.toDer(a.publicKeyToRSAPublicKey(t)).getBytes()};return i.pem.encode(r,{maxline:e})},a.getPublicKeyFingerprint=function(t,e){var r,s=(e=e||{}).md||i.md.sha1.create();switch(e.type||"RSAPublicKey"){case"RSAPublicKey":r=n.toDer(a.publicKeyToRSAPublicKey(t)).getBytes();break;case"SubjectPublicKeyInfo":r=n.toDer(a.publicKeyToAsn1(t)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+e.type+'".')}s.start(),s.update(r);var o=s.digest();if("hex"===e.encoding){var u=o.toHex();return e.delimiter?u.match(/.{2}/g).join(e.delimiter):u}if("binary"===e.encoding)return o.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".');return o},a.certificationRequestFromPem=function(t,e,r){var s=i.pem.decode(t)[0];if("CERTIFICATE REQUEST"!==s.type){var o=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw o.headerType=s.type,o}if(s.procType&&"ENCRYPTED"===s.procType.type)throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var u=n.fromDer(s.body,r);return a.certificationRequestFromAsn1(u,e)},a.certificationRequestToPem=function(t,e){var r={type:"CERTIFICATE REQUEST",body:n.toDer(a.certificationRequestToAsn1(t)).getBytes()};return i.pem.encode(r,{maxline:e})},a.createCertificate=function(){var t={version:2,serialNumber:"00",signatureOid:null,signature:null,siginfo:{}};return t.siginfo.algorithmOid=null,t.validity={},t.validity.notBefore=new Date,t.validity.notAfter=new Date,t.issuer={},t.issuer.getField=function(e){return p(t.issuer,e)},t.issuer.addField=function(e){y([e]),t.issuer.attributes.push(e)},t.issuer.attributes=[],t.issuer.hash=null,t.subject={},t.subject.getField=function(e){return p(t.subject,e)},t.subject.addField=function(e){y([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.extensions=[],t.publicKey=null,t.md=null,t.setSubject=function(e,r){y(e),t.subject.attributes=e,delete t.subject.uniqueId,r&&(t.subject.uniqueId=r),t.subject.hash=null},t.setIssuer=function(e,r){y(e),t.issuer.attributes=e,delete t.issuer.uniqueId,r&&(t.issuer.uniqueId=r),t.issuer.hash=null},t.setExtensions=function(e){for(var r=0;r<e.length;++r)m(e[r],{cert:t});t.extensions=e},t.getExtension=function(e){"string"==typeof e&&(e={name:e});for(var r,i=null,n=0;null===i&&n<t.extensions.length;++n)r=t.extensions[n],e.id&&r.id===e.id?i=r:e.name&&r.name===e.name&&(i=r);return i},t.sign=function(e,r){t.md=r||i.md.sha1.create();var o=s[t.md.algorithm+"WithRSAEncryption"];if(!o){var u=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw u.algorithm=t.md.algorithm,u}t.signatureOid=t.siginfo.algorithmOid=o,t.tbsCertificate=a.getTBSCertificate(t);var c=n.toDer(t.tbsCertificate);t.md.update(c.getBytes()),t.signature=e.sign(t.md)},t.verify=function(e){var r=!1;if(!t.issued(e)){var o=e.issuer,u=t.subject;throw(g=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.")).expectedIssuer=o.attributes,g.actualIssuer=u.attributes,g}var c=e.md;if(null===c){if(e.signatureOid in s)switch(s[e.signatureOid]){case"sha1WithRSAEncryption":c=i.md.sha1.create();break;case"md5WithRSAEncryption":c=i.md.md5.create();break;case"sha256WithRSAEncryption":c=i.md.sha256.create();break;case"sha384WithRSAEncryption":c=i.md.sha384.create();break;case"sha512WithRSAEncryption":c=i.md.sha512.create();break;case"RSASSA-PSS":c=i.md.sha256.create()}if(null===c)throw(g=new Error("Could not compute certificate digest. Unknown signature OID.")).signatureOid=e.signatureOid,g;var l=e.tbsCertificate||a.getTBSCertificate(e),h=n.toDer(l);c.update(h.getBytes())}if(null!==c){var f;switch(e.signatureOid){case s.sha1WithRSAEncryption:f=void 0;break;case s["RSASSA-PSS"]:var p,d,g;if(void 0===(p=s[e.signatureParameters.mgf.hash.algorithmOid])||void 0===i.md[p])throw(g=new Error("Unsupported MGF hash function.")).oid=e.signatureParameters.mgf.hash.algorithmOid,g.name=p,g;if(void 0===(d=s[e.signatureParameters.mgf.algorithmOid])||void 0===i.mgf[d])throw(g=new Error("Unsupported MGF function.")).oid=e.signatureParameters.mgf.algorithmOid,g.name=d,g;if(d=i.mgf[d].create(i.md[p].create()),void 0===(p=s[e.signatureParameters.hash.algorithmOid])||void 0===i.md[p])throw{message:"Unsupported RSASSA-PSS hash function.",oid:e.signatureParameters.hash.algorithmOid,name:p};f=i.pss.create(i.md[p].create(),d,e.signatureParameters.saltLength)}r=t.publicKey.verify(c.digest().getBytes(),e.signature,f)}return r},t.isIssuer=function(e){var r=!1,i=t.issuer,n=e.subject;if(i.hash&&n.hash)r=i.hash===n.hash;else if(i.attributes.length===n.attributes.length){var a,s;r=!0;for(var o=0;r&&o<i.attributes.length;++o)a=i.attributes[o],s=n.attributes[o],a.type===s.type&&a.value===s.value||(r=!1)}return r},t.issued=function(e){return e.isIssuer(t)},t.generateSubjectKeyIdentifier=function(){return a.getPublicKeyFingerprint(t.publicKey,{type:"RSAPublicKey"})},t.verifySubjectKeyIdentifier=function(){for(var e=s.subjectKeyIdentifier,r=0;r<t.extensions.length;++r){var n=t.extensions[r];if(n.id===e){var a=t.generateSubjectKeyIdentifier().getBytes();return i.util.hexToBytes(n.subjectKeyIdentifier)===a}}return!1},t},a.certificateFromAsn1=function(t,e){var r={},o=[];if(!n.validate(t,c,r,o))throw(f=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.")).errors=o,f;if(n.derToOid(r.publicKeyOid)!==a.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var u=a.createCertificate();u.version=r.certVersion?r.certVersion.charCodeAt(0):0;var l=i.util.createBuffer(r.certSerialNumber);u.serialNumber=l.toHex(),u.signatureOid=i.asn1.derToOid(r.certSignatureOid),u.signatureParameters=d(u.signatureOid,r.certSignatureParams,!0),u.siginfo.algorithmOid=i.asn1.derToOid(r.certinfoSignatureOid),u.siginfo.parameters=d(u.siginfo.algorithmOid,r.certinfoSignatureParams,!1),u.signature=r.certSignature;var h=[];if(void 0!==r.certValidity1UTCTime&&h.push(n.utcTimeToDate(r.certValidity1UTCTime)),void 0!==r.certValidity2GeneralizedTime&&h.push(n.generalizedTimeToDate(r.certValidity2GeneralizedTime)),void 0!==r.certValidity3UTCTime&&h.push(n.utcTimeToDate(r.certValidity3UTCTime)),void 0!==r.certValidity4GeneralizedTime&&h.push(n.generalizedTimeToDate(r.certValidity4GeneralizedTime)),h.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(h.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(u.validity.notBefore=h[0],u.validity.notAfter=h[1],u.tbsCertificate=r.tbsCertificate,e){var f;if(u.md=null,u.signatureOid in s)switch(s[u.signatureOid]){case"sha1WithRSAEncryption":u.md=i.md.sha1.create();break;case"md5WithRSAEncryption":u.md=i.md.md5.create();break;case"sha256WithRSAEncryption":u.md=i.md.sha256.create();break;case"sha384WithRSAEncryption":u.md=i.md.sha384.create();break;case"sha512WithRSAEncryption":u.md=i.md.sha512.create();break;case"RSASSA-PSS":u.md=i.md.sha256.create()}if(null===u.md)throw(f=new Error("Could not compute certificate digest. Unknown signature OID.")).signatureOid=u.signatureOid,f;var g=n.toDer(u.tbsCertificate);u.md.update(g.getBytes())}var m=i.md.sha1.create();u.issuer.getField=function(t){return p(u.issuer,t)},u.issuer.addField=function(t){y([t]),u.issuer.attributes.push(t)},u.issuer.attributes=a.RDNAttributesAsArray(r.certIssuer,m),r.certIssuerUniqueId&&(u.issuer.uniqueId=r.certIssuerUniqueId),u.issuer.hash=m.digest().toHex();var v=i.md.sha1.create();return u.subject.getField=function(t){return p(u.subject,t)},u.subject.addField=function(t){y([t]),u.subject.attributes.push(t)},u.subject.attributes=a.RDNAttributesAsArray(r.certSubject,v),r.certSubjectUniqueId&&(u.subject.uniqueId=r.certSubjectUniqueId),u.subject.hash=v.digest().toHex(),r.certExtensions?u.extensions=a.certificateExtensionsFromAsn1(r.certExtensions):u.extensions=[],u.publicKey=a.publicKeyFromAsn1(r.subjectPublicKeyInfo),u},a.certificateExtensionsFromAsn1=function(t){for(var e=[],r=0;r<t.value.length;++r)for(var i=t.value[r],n=0;n<i.value.length;++n)e.push(a.certificateExtensionFromAsn1(i.value[n]));return e},a.certificateExtensionFromAsn1=function(t){var e={};if(e.id=n.derToOid(t.value[0].value),e.critical=!1,t.value[1].type===n.Type.BOOLEAN?(e.critical=0!==t.value[1].value.charCodeAt(0),e.value=t.value[2].value):e.value=t.value[1].value,e.id in s)if(e.name=s[e.id],"keyUsage"===e.name){var r=0,a=0;(u=n.fromDer(e.value)).value.length>1&&(r=u.value.charCodeAt(1),a=u.value.length>2?u.value.charCodeAt(2):0),e.digitalSignature=128==(128&r),e.nonRepudiation=64==(64&r),e.keyEncipherment=32==(32&r),e.dataEncipherment=16==(16&r),e.keyAgreement=8==(8&r),e.keyCertSign=4==(4&r),e.cRLSign=2==(2&r),e.encipherOnly=1==(1&r),e.decipherOnly=128==(128&a)}else if("basicConstraints"===e.name){(u=n.fromDer(e.value)).value.length>0&&u.value[0].type===n.Type.BOOLEAN?e.cA=0!==u.value[0].value.charCodeAt(0):e.cA=!1;var o=null;u.value.length>0&&u.value[0].type===n.Type.INTEGER?o=u.value[0].value:u.value.length>1&&(o=u.value[1].value),null!==o&&(e.pathLenConstraint=n.derToInteger(o))}else if("extKeyUsage"===e.name)for(var u=n.fromDer(e.value),c=0;c<u.value.length;++c){var l=n.derToOid(u.value[c].value);l in s?e[s[l]]=!0:e[l]=!0}else if("nsCertType"===e.name){r=0;(u=n.fromDer(e.value)).value.length>1&&(r=u.value.charCodeAt(1)),e.client=128==(128&r),e.server=64==(64&r),e.email=32==(32&r),e.objsign=16==(16&r),e.reserved=8==(8&r),e.sslCA=4==(4&r),e.emailCA=2==(2&r),e.objCA=1==(1&r)}else if("subjectAltName"===e.name||"issuerAltName"===e.name){var h;e.altNames=[];u=n.fromDer(e.value);for(var f=0;f<u.value.length;++f){var p={type:(h=u.value[f]).type,value:h.value};switch(e.altNames.push(p),h.type){case 1:case 2:case 6:break;case 7:p.ip=i.util.bytesToIP(h.value);break;case 8:p.oid=n.derToOid(h.value)}}}else if("subjectKeyIdentifier"===e.name){u=n.fromDer(e.value);e.subjectKeyIdentifier=i.util.bytesToHex(u.value)}return e},a.certificationRequestFromAsn1=function(t,e){var r={},o=[];if(!n.validate(t,f,r,o))throw(c=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.")).errors=o,c;if(n.derToOid(r.publicKeyOid)!==a.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var u=a.createCertificationRequest();if(u.version=r.csrVersion?r.csrVersion.charCodeAt(0):0,u.signatureOid=i.asn1.derToOid(r.csrSignatureOid),u.signatureParameters=d(u.signatureOid,r.csrSignatureParams,!0),u.siginfo.algorithmOid=i.asn1.derToOid(r.csrSignatureOid),u.siginfo.parameters=d(u.siginfo.algorithmOid,r.csrSignatureParams,!1),u.signature=r.csrSignature,u.certificationRequestInfo=r.certificationRequestInfo,e){var c;if(u.md=null,u.signatureOid in s)switch(s[u.signatureOid]){case"sha1WithRSAEncryption":u.md=i.md.sha1.create();break;case"md5WithRSAEncryption":u.md=i.md.md5.create();break;case"sha256WithRSAEncryption":u.md=i.md.sha256.create();break;case"sha384WithRSAEncryption":u.md=i.md.sha384.create();break;case"sha512WithRSAEncryption":u.md=i.md.sha512.create();break;case"RSASSA-PSS":u.md=i.md.sha256.create()}if(null===u.md)throw(c=new Error("Could not compute certification request digest. Unknown signature OID.")).signatureOid=u.signatureOid,c;var l=n.toDer(u.certificationRequestInfo);u.md.update(l.getBytes())}var h=i.md.sha1.create();return u.subject.getField=function(t){return p(u.subject,t)},u.subject.addField=function(t){y([t]),u.subject.attributes.push(t)},u.subject.attributes=a.RDNAttributesAsArray(r.certificationRequestInfoSubject,h),u.subject.hash=h.digest().toHex(),u.publicKey=a.publicKeyFromAsn1(r.subjectPublicKeyInfo),u.getAttribute=function(t){return p(u,t)},u.addAttribute=function(t){y([t]),u.attributes.push(t)},u.attributes=a.CRIAttributesAsArray(r.certificationRequestInfoAttributes||[]),u},a.createCertificationRequest=function(){var t={version:0,signatureOid:null,signature:null,siginfo:{}};return t.siginfo.algorithmOid=null,t.subject={},t.subject.getField=function(e){return p(t.subject,e)},t.subject.addField=function(e){y([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.publicKey=null,t.attributes=[],t.getAttribute=function(e){return p(t,e)},t.addAttribute=function(e){y([e]),t.attributes.push(e)},t.md=null,t.setSubject=function(e){y(e),t.subject.attributes=e,t.subject.hash=null},t.setAttributes=function(e){y(e),t.attributes=e},t.sign=function(e,r){t.md=r||i.md.sha1.create();var o=s[t.md.algorithm+"WithRSAEncryption"];if(!o){var u=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw u.algorithm=t.md.algorithm,u}t.signatureOid=t.siginfo.algorithmOid=o,t.certificationRequestInfo=a.getCertificationRequestInfo(t);var c=n.toDer(t.certificationRequestInfo);t.md.update(c.getBytes()),t.signature=e.sign(t.md)},t.verify=function(){var e=!1,r=t.md;if(null===r){if(t.signatureOid in s)switch(s[t.signatureOid]){case"sha1WithRSAEncryption":r=i.md.sha1.create();break;case"md5WithRSAEncryption":r=i.md.md5.create();break;case"sha256WithRSAEncryption":r=i.md.sha256.create();break;case"sha384WithRSAEncryption":r=i.md.sha384.create();break;case"sha512WithRSAEncryption":r=i.md.sha512.create();break;case"RSASSA-PSS":r=i.md.sha256.create()}if(null===r)throw(f=new Error("Could not compute certification request digest. Unknown signature OID.")).signatureOid=t.signatureOid,f;var o=t.certificationRequestInfo||a.getCertificationRequestInfo(t),u=n.toDer(o);r.update(u.getBytes())}if(null!==r){var c;switch(t.signatureOid){case s.sha1WithRSAEncryption:break;case s["RSASSA-PSS"]:var l,h,f;if(void 0===(l=s[t.signatureParameters.mgf.hash.algorithmOid])||void 0===i.md[l])throw(f=new Error("Unsupported MGF hash function.")).oid=t.signatureParameters.mgf.hash.algorithmOid,f.name=l,f;if(void 0===(h=s[t.signatureParameters.mgf.algorithmOid])||void 0===i.mgf[h])throw(f=new Error("Unsupported MGF function.")).oid=t.signatureParameters.mgf.algorithmOid,f.name=h,f;if(h=i.mgf[h].create(i.md[l].create()),void 0===(l=s[t.signatureParameters.hash.algorithmOid])||void 0===i.md[l])throw(f=new Error("Unsupported RSASSA-PSS hash function.")).oid=t.signatureParameters.hash.algorithmOid,f.name=l,f;c=i.pss.create(i.md[l].create(),h,t.signatureParameters.saltLength)}e=t.publicKey.verify(r.digest().getBytes(),t.signature,c)}return e},t},a.getTBSCertificate=function(t){var e=n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.CONTEXT_SPECIFIC,0,!0,[n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,n.integerToDer(t.version).getBytes())]),n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,i.util.hexToBytes(t.serialNumber)),n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(t.siginfo.algorithmOid).getBytes()),v(t.siginfo.algorithmOid,t.siginfo.parameters)]),g(t.issuer),n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.UTCTIME,!1,n.dateToUtcTime(t.validity.notBefore)),n.create(n.Class.UNIVERSAL,n.Type.UTCTIME,!1,n.dateToUtcTime(t.validity.notAfter))]),g(t.subject),a.publicKeyToAsn1(t.publicKey)]);return t.issuer.uniqueId&&e.value.push(n.create(n.Class.CONTEXT_SPECIFIC,1,!0,[n.create(n.Class.UNIVERSAL,n.Type.BITSTRING,!1,String.fromCharCode(0)+t.issuer.uniqueId)])),t.subject.uniqueId&&e.value.push(n.create(n.Class.CONTEXT_SPECIFIC,2,!0,[n.create(n.Class.UNIVERSAL,n.Type.BITSTRING,!1,String.fromCharCode(0)+t.subject.uniqueId)])),t.extensions.length>0&&e.value.push(a.certificateExtensionsToAsn1(t.extensions)),e},a.getCertificationRequestInfo=function(t){return n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,n.integerToDer(t.version).getBytes()),g(t.subject),a.publicKeyToAsn1(t.publicKey),function(t){var e=n.create(n.Class.CONTEXT_SPECIFIC,0,!0,[]);if(0===t.attributes.length)return e;for(var r=t.attributes,a=0;a<r.length;++a){var s=r[a],o=s.value,u=n.Type.UTF8;"valueTagClass"in s&&(u=s.valueTagClass),u===n.Type.UTF8&&(o=i.util.encodeUtf8(o));var c=!1;"valueConstructed"in s&&(c=s.valueConstructed);var l=n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(s.type).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.SET,!0,[n.create(n.Class.UNIVERSAL,u,c,o)])]);e.value.push(l)}return e}(t)])},a.distinguishedNameToAsn1=function(t){return g(t)},a.certificateToAsn1=function(t){var e=t.tbsCertificate||a.getTBSCertificate(t);return n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[e,n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(t.signatureOid).getBytes()),v(t.signatureOid,t.signatureParameters)]),n.create(n.Class.UNIVERSAL,n.Type.BITSTRING,!1,String.fromCharCode(0)+t.signature)])},a.certificateExtensionsToAsn1=function(t){var e=n.create(n.Class.CONTEXT_SPECIFIC,3,!0,[]),r=n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[]);e.value.push(r);for(var i=0;i<t.length;++i)r.value.push(a.certificateExtensionToAsn1(t[i]));return e},a.certificateExtensionToAsn1=function(t){var e=n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[]);e.value.push(n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(t.id).getBytes())),t.critical&&e.value.push(n.create(n.Class.UNIVERSAL,n.Type.BOOLEAN,!1,String.fromCharCode(255)));var r=t.value;return"string"!=typeof t.value&&(r=n.toDer(r).getBytes()),e.value.push(n.create(n.Class.UNIVERSAL,n.Type.OCTETSTRING,!1,r)),e},a.certificationRequestToAsn1=function(t){var e=t.certificationRequestInfo||a.getCertificationRequestInfo(t);return n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[e,n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(t.signatureOid).getBytes()),v(t.signatureOid,t.signatureParameters)]),n.create(n.Class.UNIVERSAL,n.Type.BITSTRING,!1,String.fromCharCode(0)+t.signature)])},a.createCaStore=function(t){var e={certs:{}};function r(t){return s(t),e.certs[t.hash]||null}function s(t){if(!t.hash){var e=i.md.sha1.create();t.attributes=a.RDNAttributesAsArray(g(t),e),t.hash=e.digest().toHex()}}if(e.getIssuer=function(t){return r(t.issuer)},e.addCertificate=function(t){if("string"==typeof t&&(t=i.pki.certificateFromPem(t)),s(t.subject),!e.hasCertificate(t))if(t.subject.hash in e.certs){var r=e.certs[t.subject.hash];i.util.isArray(r)||(r=[r]),r.push(t),e.certs[t.subject.hash]=r}else e.certs[t.subject.hash]=t},e.hasCertificate=function(t){"string"==typeof t&&(t=i.pki.certificateFromPem(t));var e=r(t.subject);if(!e)return!1;i.util.isArray(e)||(e=[e]);for(var s=n.toDer(a.certificateToAsn1(t)).getBytes(),o=0;o<e.length;++o){if(s===n.toDer(a.certificateToAsn1(e[o])).getBytes())return!0}return!1},e.listAllCertificates=function(){var t=[];for(var r in e.certs)if(e.certs.hasOwnProperty(r)){var n=e.certs[r];if(i.util.isArray(n))for(var a=0;a<n.length;++a)t.push(n[a]);else t.push(n)}return t},e.removeCertificate=function(t){var o;if("string"==typeof t&&(t=i.pki.certificateFromPem(t)),s(t.subject),!e.hasCertificate(t))return null;var u=r(t.subject);if(!i.util.isArray(u))return o=e.certs[t.subject.hash],delete e.certs[t.subject.hash],o;for(var c=n.toDer(a.certificateToAsn1(t)).getBytes(),l=0;l<u.length;++l){c===n.toDer(a.certificateToAsn1(u[l])).getBytes()&&(o=u[l],u.splice(l,1))}return 0===u.length&&delete e.certs[t.subject.hash],o},t)for(var o=0;o<t.length;++o){var u=t[o];e.addCertificate(u)}return e},a.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"},a.verifyCertificateChain=function(t,e,r){var n=(e=e.slice(0)).slice(0),s=new Date,o=!0,u=null,c=0;do{var l=e.shift(),h=null,f=!1;if((s<l.validity.notBefore||s>l.validity.notAfter)&&(u={message:"Certificate is not valid yet or has expired.",error:a.certificateError.certificate_expired,notBefore:l.validity.notBefore,notAfter:l.validity.notAfter,now:s}),null===u){if(null===(h=e[0]||t.getIssuer(l))&&l.isIssuer(l)&&(f=!0,h=l),h){var p=h;i.util.isArray(p)||(p=[p]);for(var d=!1;!d&&p.length>0;){h=p.shift();try{d=h.verify(l)}catch(t){}}d||(u={message:"Certificate signature is invalid.",error:a.certificateError.bad_certificate})}null!==u||h&&!f||t.hasCertificate(l)||(u={message:"Certificate is not trusted.",error:a.certificateError.unknown_ca})}if(null===u&&h&&!l.isIssuer(h)&&(u={message:"Certificate issuer is invalid.",error:a.certificateError.bad_certificate}),null===u)for(var g={keyUsage:!0,basicConstraints:!0},y=0;null===u&&y<l.extensions.length;++y){var m=l.extensions[y];!m.critical||m.name in g||(u={message:"Certificate has an unsupported critical extension.",error:a.certificateError.unsupported_certificate})}if(null===u&&(!o||0===e.length&&(!h||f))){var v=l.getExtension("basicConstraints"),_=l.getExtension("keyUsage");if(null!==_&&(_.keyCertSign&&null!==v||(u={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:a.certificateError.bad_certificate})),null!==u||null===v||v.cA||(u={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:a.certificateError.bad_certificate}),null===u&&null!==_&&"pathLenConstraint"in v)c-1>v.pathLenConstraint&&(u={message:"Certificate basicConstraints pathLenConstraint violated.",error:a.certificateError.bad_certificate})}var b=null===u||u.error,C=r?r(b,c,n):b;if(!0!==C)throw!0===b&&(u={message:"The application rejected the certificate.",error:a.certificateError.bad_certificate}),(C||0===C)&&("object"!=typeof C||i.util.isArray(C)?"string"==typeof C&&(u.error=C):(C.message&&(u.message=C.message),C.error&&(u.error=C.error))),u;u=null,o=!1,++c}while(e.length>0);return!0}},function(t,e,r){var i=r(0);r(4),r(1),(t.exports=i.pss=i.pss||{}).create=function(t){3===arguments.length&&(t={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var e,r=t.md,n=t.mgf,a=r.digestLength,s=t.salt||null;if("string"==typeof s&&(s=i.util.createBuffer(s)),"saltLength"in t)e=t.saltLength;else{if(null===s)throw new Error("Salt length not specified or specific salt not given.");e=s.length()}if(null!==s&&s.length()!==e)throw new Error("Given salt length does not match length of given salt.");var o=t.prng||i.random,u={encode:function(t,u){var c,l,h=u-1,f=Math.ceil(h/8),p=t.digest().getBytes();if(f<a+e+2)throw new Error("Message is too long to encrypt.");l=null===s?o.getBytesSync(e):s.bytes();var d=new i.util.ByteBuffer;d.fillWithByte(0,8),d.putBytes(p),d.putBytes(l),r.start(),r.update(d.getBytes());var g=r.digest().getBytes(),y=new i.util.ByteBuffer;y.fillWithByte(0,f-e-a-2),y.putByte(1),y.putBytes(l);var m=y.getBytes(),v=f-a-1,_=n.generate(g,v),b="";for(c=0;c<v;c++)b+=String.fromCharCode(m.charCodeAt(c)^_.charCodeAt(c));var C=65280>>8*f-h&255;return(b=String.fromCharCode(b.charCodeAt(0)&~C)+b.substr(1))+g+String.fromCharCode(188)},verify:function(t,s,o){var u,c=o-1,l=Math.ceil(c/8);if(s=s.substr(-l),l<a+e+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(188!==s.charCodeAt(l-1))throw new Error("Encoded message does not end in 0xBC.");var h=l-a-1,f=s.substr(0,h),p=s.substr(h,a),d=65280>>8*l-c&255;if(0!=(f.charCodeAt(0)&d))throw new Error("Bits beyond keysize not zero as expected.");var g=n.generate(p,h),y="";for(u=0;u<h;u++)y+=String.fromCharCode(f.charCodeAt(u)^g.charCodeAt(u));y=String.fromCharCode(y.charCodeAt(0)&~d)+y.substr(1);var m=l-a-e-2;for(u=0;u<m;u++)if(0!==y.charCodeAt(u))throw new Error("Leftmost octets not zero as expected");if(1!==y.charCodeAt(m))throw new Error("Inconsistent PSS signature, 0x01 marker not found");var v=y.substr(-e),_=new i.util.ByteBuffer;return _.fillWithByte(0,8),_.putBytes(t),_.putBytes(v),r.start(),r.update(_.getBytes()),p===r.digest().getBytes()}};return u}},function(t,e,r){(function(t){e.MAGICNUMBER=407708164,e.MAGICNUMBER_BUFFER=new t(4),e.MAGICNUMBER_BUFFER.writeUInt32LE(e.MAGICNUMBER,0,!1),e.EOS=0,e.EOS_BUFFER=new t(4),e.EOS_BUFFER.writeUInt32LE(e.EOS,0,!1),e.VERSION=1,e.MAGICNUMBER_SKIPPABLE=407710288,e.blockMaxSizes=[null,null,null,null,65536,262144,1<<20,4<<20],e.extension=".lz4",e.STATES={MAGIC:0,DESCRIPTOR:1,SIZE:2,DICTID:3,DESCRIPTOR_CHECKSUM:4,DATABLOCK_SIZE:5,DATABLOCK_DATA:6,DATABLOCK_CHECKSUM:7,DATABLOCK_UNCOMPRESS:8,DATABLOCK_COMPRESS:9,CHECKSUM:10,CHECKSUM_UPDATE:11,EOS:90,SKIP_SIZE:101,SKIP_DATA:102},e.SIZES={MAGIC:4,DESCRIPTOR:2,SIZE:8,DICTID:4,DESCRIPTOR_CHECKSUM:1,DATABLOCK_SIZE:4,DATABLOCK_CHECKSUM:4,CHECKSUM:4,EOS:4,SKIP_SIZE:4},e.utils=r(83)}).call(this,r(3).Buffer)},function(t,e,r){r(88).UINT32;Math.imul||(Math.imul=function(t,e){var r=65535&t,i=65535&e;return r*i+((t>>>16)*i+r*(e>>>16)<<16)|0}),e.uncompress=function(t,e,r,i){for(var n=r=r||0,a=i=i||t.length-r,s=0;n<a;){var o=t[n++],u=o>>4;if(u>0){for(var c=u+240;255===c;)u+=c=t[n++];for(var l=n+u;n<l;)e[s++]=t[n++];if(n===a)return s}var h=t[n++]|t[n++]<<8;if(0===h||h>s)return-(n-2);var f=15&o;for(c=f+240;255===c;)f+=c=t[n++];var p=s-h;for(l=s+f+4;s<l;)e[s++]=e[p++]}return s};var i=2113929216,n=4,a=8*n-16,s=8+n,o=6,u=4,c=(1<<u)-1,l=(1<<8-u)-1,h=2654435761;function f(t,r,f,p,d,g){var y=d,m=g-d,v=0;if(t.length>=i)throw new Error("input too large");if(t.length>s){var _=e.compressBound(t.length);if(m<_)throw Error("output too small: "+m+" < "+_);for(var b=3+(1<<o),C=t.length-s;f+n<C;){var E=t[f+1]<<8|t[f],S=t[f+3]<<8|t[f+2],w=Math.imul(E|S<<16,h)>>>a,A=p[w]-1;if(p[w]=f+1,A<0||f-A>>>16>0||(t[A+3]<<8|t[A+2])!=S||(t[A+1]<<8|t[A])!=E)f+=b++>>o;else{b=3+(1<<o);var T=f-v,k=f-A;A+=n;for(var I=f+=n;f<C&&t[f]==t[A];)f++,A++;var B=(I=f-I)<c?I:c;if(T>=l){r[y++]=(l<<u)+B;for(var R=T-l;R>254;R-=255)r[y++]=255;r[y++]=R}else r[y++]=(T<<u)+B;for(var N=0;N<T;N++)r[y++]=t[v+N];if(r[y++]=k,r[y++]=k>>8,I>=c){for(I-=c;I>=255;)I-=255,r[y++]=255;r[y++]=I}v=f}}}if(0==v)return 0;if((T=t.length-v)>=l){r[y++]=l<<u;for(var U=T-l;U>254;U-=255)r[y++]=255;r[y++]=U}else r[y++]=T<<u;for(f=v;f<t.length;)r[y++]=t[f++];return y}e.compressBound=function(t){return t>i?0:t+t/255+16|0},e.compress=function(t,e,r,i){for(var n=new Array(65536),a=0;a<65536;a++)n[a]=0;return f(t,e,0,n,r||0,i||e.length)},e.compressHC=e.compress,e.compressDependent=f},function(t,e){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function n(t){return"object"==typeof t&&null!==t}function a(t){return void 0===t}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(t){if(!function(t){return"number"==typeof t}(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},r.prototype.emit=function(t){var e,r,s,o,u,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||n(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var l=new Error('Uncaught, unspecified "error" event. ('+e+")");throw l.context=e,l}if(a(r=this._events[t]))return!1;if(i(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),r.apply(this,o)}else if(n(r))for(o=Array.prototype.slice.call(arguments,1),s=(c=r.slice()).length,u=0;u<s;u++)c[u].apply(this,o);return!0},r.prototype.addListener=function(t,e){var s;if(!i(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?n(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,n(this._events[t])&&!this._events[t].warned&&(s=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&s>0&&this._events[t].length>s&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){if(!i(e))throw TypeError("listener must be a function");var r=!1;function n(){this.removeListener(t,n),r||(r=!0,e.apply(this,arguments))}return n.listener=e,this.on(t,n),this},r.prototype.removeListener=function(t,e){var r,a,s,o;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(s=(r=this._events[t]).length,a=-1,r===e||i(r.listener)&&r.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(n(r)){for(o=s;o-- >0;)if(r[o]===e||r[o].listener&&r[o].listener===e){a=o;break}if(a<0)return this;1===r.length?(r.length=0,delete this._events[t]):r.splice(a,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},r.prototype.removeAllListeners=function(t){var e,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(i(r=this._events[t]))this.removeListener(t,r);else if(r)for(;r.length;)this.removeListener(t,r[r.length-1]);return delete this._events[t],this},r.prototype.listeners=function(t){return this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},r.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(i(e))return 1;if(e)return e.length}return 0},r.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,r){(e=t.exports=r(57)).Stream=e,e.Readable=e,e.Writable=r(36),e.Duplex=r(12),e.Transform=r(61),e.PassThrough=r(95)},function(t,e,r){"use strict";(function(e,i,n){var a=r(21);function s(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,r){var i=t.entry;t.entry=null;for(;i;){var n=i.callback;e.pendingcb--,n(r),i=i.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}(e,t)}}t.exports=v;var o,u=!e.browser&&["v0.10","v0.9."].indexOf(e.version.slice(0,5))>-1?i:a.nextTick;v.WritableState=m;var c=r(17);c.inherits=r(11);var l={deprecate:r(94)},h=r(58),f=r(22).Buffer,p=n.Uint8Array||function(){};var d,g=r(59);function y(){}function m(t,e){o=o||r(12),t=t||{};var i=e instanceof o;this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var n=t.highWaterMark,c=t.writableHighWaterMark,l=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:i&&(c||0===c)?c:l,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var h=!1===t.decodeStrings;this.decodeStrings=!h,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var r=t._writableState,i=r.sync,n=r.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(r),e)!function(t,e,r,i,n){--e.pendingcb,r?(a.nextTick(n,i),a.nextTick(w,t,e),t._writableState.errorEmitted=!0,t.emit("error",i)):(n(i),t._writableState.errorEmitted=!0,t.emit("error",i),w(t,e))}(t,r,i,e,n);else{var s=E(r);s||r.corked||r.bufferProcessing||!r.bufferedRequest||C(t,r),i?u(b,t,r,s,n):b(t,r,s,n)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}function v(t){if(o=o||r(12),!(d.call(v,this)||this instanceof o))return new v(t);this._writableState=new m(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),h.call(this)}function _(t,e,r,i,n,a,s){e.writelen=i,e.writecb=s,e.writing=!0,e.sync=!0,r?t._writev(n,e.onwrite):t._write(n,a,e.onwrite),e.sync=!1}function b(t,e,r,i){r||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,i(),w(t,e)}function C(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var i=e.bufferedRequestCount,n=new Array(i),a=e.corkedRequestsFree;a.entry=r;for(var o=0,u=!0;r;)n[o]=r,r.isBuf||(u=!1),r=r.next,o+=1;n.allBuffers=u,_(t,e,!0,e.length,n,"",a.finish),e.pendingcb++,e.lastBufferedRequest=null,a.next?(e.corkedRequestsFree=a.next,a.next=null):e.corkedRequestsFree=new s(e),e.bufferedRequestCount=0}else{for(;r;){var c=r.chunk,l=r.encoding,h=r.callback;if(_(t,e,!1,e.objectMode?1:c.length,c,l,h),r=r.next,e.bufferedRequestCount--,e.writing)break}null===r&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}function E(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function S(t,e){t._final(function(r){e.pendingcb--,r&&t.emit("error",r),e.prefinished=!0,t.emit("prefinish"),w(t,e)})}function w(t,e){var r=E(e);return r&&(!function(t,e){e.prefinished||e.finalCalled||("function"==typeof t._final?(e.pendingcb++,e.finalCalled=!0,a.nextTick(S,t,e)):(e.prefinished=!0,t.emit("prefinish")))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),r}c.inherits(v,h),m.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(m.prototype,"buffer",{get:l.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(d=Function.prototype[Symbol.hasInstance],Object.defineProperty(v,Symbol.hasInstance,{value:function(t){return!!d.call(this,t)||this===v&&(t&&t._writableState instanceof m)}})):d=function(t){return t instanceof this},v.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},v.prototype.write=function(t,e,r){var i=this._writableState,n=!1,s=!i.objectMode&&function(t){return f.isBuffer(t)||t instanceof p}(t);return s&&!f.isBuffer(t)&&(t=function(t){return f.from(t)}(t)),"function"==typeof e&&(r=e,e=null),s?e="buffer":e||(e=i.defaultEncoding),"function"!=typeof r&&(r=y),i.ended?function(t,e){var r=new Error("write after end");t.emit("error",r),a.nextTick(e,r)}(this,r):(s||function(t,e,r,i){var n=!0,s=!1;return null===r?s=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||e.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(t.emit("error",s),a.nextTick(i,s),n=!1),n}(this,i,t,r))&&(i.pendingcb++,n=function(t,e,r,i,n,a){if(!r){var s=function(t,e,r){t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=f.from(e,r));return e}(e,i,n);i!==s&&(r=!0,n="buffer",i=s)}var o=e.objectMode?1:i.length;e.length+=o;var u=e.length<e.highWaterMark;u||(e.needDrain=!0);if(e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:i,encoding:n,isBuf:r,callback:a,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else _(t,e,!1,o,i,n,a);return u}(this,i,s,t,e,r)),n},v.prototype.cork=function(){this._writableState.corked++},v.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||C(this,t))},v.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(v.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),v.prototype._write=function(t,e,r){r(new Error("_write() is not implemented"))},v.prototype._writev=null,v.prototype.end=function(t,e,r){var i=this._writableState;"function"==typeof t?(r=t,t=null,e=null):"function"==typeof e&&(r=e,e=null),null!==t&&void 0!==t&&this.write(t,e),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||function(t,e,r){e.ending=!0,w(t,e),r&&(e.finished?a.nextTick(r):t.once("finish",r));e.ended=!0,t.writable=!1}(this,i,r)},Object.defineProperty(v.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),v.prototype.destroy=g.destroy,v.prototype._undestroy=g.undestroy,v.prototype._destroy=function(t,e){this.end(),e(t)}}).call(this,r(7),r(37).setImmediate,r(8))},function(t,e,r){(function(t){var i=void 0!==t&&t||"undefined"!=typeof self&&self||window,n=Function.prototype.apply;function a(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new a(n.call(setTimeout,i,arguments),clearTimeout)},e.setInterval=function(){return new a(n.call(setInterval,i,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(i,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},r(71),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,r(8))},function(t,e){var r={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},function(t,e,r){var i=r(0);r(1),i.cipher=i.cipher||{};var n=t.exports=i.cipher.modes=i.cipher.modes||{};function a(t){if("string"==typeof t&&(t=i.util.createBuffer(t)),i.util.isArray(t)&&t.length>4){var e=t;t=i.util.createBuffer();for(var r=0;r<e.length;++r)t.putByte(e[r])}return i.util.isArray(t)||(t=[t.getInt32(),t.getInt32(),t.getInt32(),t.getInt32()]),t}function s(t){t[t.length-1]=t[t.length-1]+1&4294967295}function o(t){return[t/4294967296|0,4294967295&t]}n.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},n.ecb.prototype.start=function(t){},n.ecb.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(i=0;i<this._ints;++i)e.putInt32(this._outBlock[i])},n.ecb.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(i=0;i<this._ints;++i)e.putInt32(this._outBlock[i])},n.ecb.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0},n.ecb.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),i=t.at(r-1);return!(i>this.blockSize<<2)&&(t.truncate(i),!0)},n.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},n.cbc.prototype.start=function(t){if(null===t.iv){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else{if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=a(t.iv),this._prev=this._iv.slice(0)}},n.cbc.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var i=0;i<this._ints;++i)this._inBlock[i]=this._prev[i]^t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]);this._prev=this._outBlock},n.cbc.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(i=0;i<this._ints;++i)e.putInt32(this._prev[i]^this._outBlock[i]);this._prev=this._inBlock.slice(0)},n.cbc.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0},n.cbc.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),i=t.at(r-1);return!(i>this.blockSize<<2)&&(t.truncate(i),!0)},n.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=i.util.createBuffer(),this._partialBytes=0},n.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=a(t.iv),this._inBlock=this._iv.slice(0),this._partialBytes=0},n.cfb.prototype.encrypt=function(t,e,r){var i=t.length();if(0===i)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&i>=this.blockSize)for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32()^this._outBlock[n],e.putInt32(this._inBlock[n]);else{var a=(this.blockSize-i)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(n=0;n<this._ints;++n)this._partialBlock[n]=t.getInt32()^this._outBlock[n],this._partialOutput.putInt32(this._partialBlock[n]);if(a>0)t.read-=this.blockSize;else for(n=0;n<this._ints;++n)this._inBlock[n]=this._partialBlock[n];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return e.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0}},n.cfb.prototype.decrypt=function(t,e,r){var i=t.length();if(0===i)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&i>=this.blockSize)for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32(),e.putInt32(this._inBlock[n]^this._outBlock[n]);else{var a=(this.blockSize-i)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(n=0;n<this._ints;++n)this._partialBlock[n]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[n]^this._outBlock[n]);if(a>0)t.read-=this.blockSize;else for(n=0;n<this._ints;++n)this._inBlock[n]=this._partialBlock[n];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return e.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0}},n.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=i.util.createBuffer(),this._partialBytes=0},n.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=a(t.iv),this._inBlock=this._iv.slice(0),this._partialBytes=0},n.ofb.prototype.encrypt=function(t,e,r){var i=t.length();if(0===t.length())return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&i>=this.blockSize)for(var n=0;n<this._ints;++n)e.putInt32(t.getInt32()^this._outBlock[n]),this._inBlock[n]=this._outBlock[n];else{var a=(this.blockSize-i)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(n=0;n<this._ints;++n)this._partialOutput.putInt32(t.getInt32()^this._outBlock[n]);if(a>0)t.read-=this.blockSize;else for(n=0;n<this._ints;++n)this._inBlock[n]=this._outBlock[n];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return e.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0}},n.ofb.prototype.decrypt=n.ofb.prototype.encrypt,n.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=i.util.createBuffer(),this._partialBytes=0},n.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=a(t.iv),this._inBlock=this._iv.slice(0),this._partialBytes=0},n.ctr.prototype.encrypt=function(t,e,r){var i=t.length();if(0===i)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&i>=this.blockSize)for(var n=0;n<this._ints;++n)e.putInt32(t.getInt32()^this._outBlock[n]);else{var a=(this.blockSize-i)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(n=0;n<this._ints;++n)this._partialOutput.putInt32(t.getInt32()^this._outBlock[n]);if(a>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return e.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0}s(this._inBlock)},n.ctr.prototype.decrypt=n.ctr.prototype.encrypt,n.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=i.util.createBuffer(),this._partialBytes=0,this._R=3774873600},n.gcm.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");var e,r=i.util.createBuffer(t.iv);if(this._cipherLength=0,e="additionalData"in t?i.util.createBuffer(t.additionalData):i.util.createBuffer(),this._tagLength="tagLength"in t?t.tagLength:128,this._tag=null,t.decrypt&&(this._tag=i.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var n=r.length();if(12===n)this._j0=[r.getInt32(),r.getInt32(),r.getInt32(),1];else{for(this._j0=[0,0,0,0];r.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(o(8*n)))}this._inBlock=this._j0.slice(0),s(this._inBlock),this._partialBytes=0,e=i.util.createBuffer(e),this._aDataLength=o(8*e.length());var a=e.length()%this.blockSize;for(a&&e.fillWithByte(0,this.blockSize-a),this._s=[0,0,0,0];e.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()])},n.gcm.prototype.encrypt=function(t,e,r){var i=t.length();if(0===i)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&i>=this.blockSize){for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]^=t.getInt32());this._cipherLength+=this.blockSize}else{var a=(this.blockSize-i)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(n=0;n<this._ints;++n)this._partialOutput.putInt32(t.getInt32()^this._outBlock[n]);if(0===a||r){if(r){var o=i%this.blockSize;this._cipherLength+=o,this._partialOutput.truncate(this.blockSize-o)}else this._cipherLength+=this.blockSize;for(n=0;n<this._ints;++n)this._outBlock[n]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return t.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;e.putBytes(this._partialOutput.getBytes(i-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),s(this._inBlock)},n.gcm.prototype.decrypt=function(t,e,r){var i=t.length();if(i<this.blockSize&&!(r&&i>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),s(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]^this._hashBlock[n]);i<this.blockSize?this._cipherLength+=i%this.blockSize:this._cipherLength+=this.blockSize},n.gcm.prototype.afterFinish=function(t,e){var r=!0;e.decrypt&&e.overflow&&t.truncate(this.blockSize-e.overflow),this.tag=i.util.createBuffer();var n=this._aDataLength.concat(o(8*this._cipherLength));this._s=this.ghash(this._hashSubkey,this._s,n);var a=[];this.cipher.encrypt(this._j0,a);for(var s=0;s<this._ints;++s)this.tag.putInt32(this._s[s]^a[s]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),e.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r},n.gcm.prototype.multiply=function(t,e){for(var r=[0,0,0,0],i=e.slice(0),n=0;n<128;++n){t[n/32|0]&1<<31-n%32&&(r[0]^=i[0],r[1]^=i[1],r[2]^=i[2],r[3]^=i[3]),this.pow(i,i)}return r},n.gcm.prototype.pow=function(t,e){for(var r=1&t[3],i=3;i>0;--i)e[i]=t[i]>>>1|(1&t[i-1])<<31;e[0]=t[0]>>>1,r&&(e[0]^=this._R)},n.gcm.prototype.tableMultiply=function(t){for(var e=[0,0,0,0],r=0;r<32;++r){var i=t[r/8|0]>>>4*(7-r%8)&15,n=this._m[r][i];e[0]^=n[0],e[1]^=n[1],e[2]^=n[2],e[3]^=n[3]}return e},n.gcm.prototype.ghash=function(t,e,r){return e[0]^=r[0],e[1]^=r[1],e[2]^=r[2],e[3]^=r[3],this.tableMultiply(e)},n.gcm.prototype.generateHashTable=function(t,e){for(var r=8/e,i=4*r,n=16*r,a=new Array(n),s=0;s<n;++s){var o=[0,0,0,0],u=(i-1-s%i)*e;o[s/i|0]=1<<e-1<<u,a[s]=this.generateSubHashTable(this.multiply(o,t),e)}return a},n.gcm.prototype.generateSubHashTable=function(t,e){var r=1<<e,i=r>>>1,n=new Array(r);n[i]=t.slice(0);for(var a=i>>>1;a>0;)this.pow(n[2*a],n[a]=[]),a>>=1;for(a=2;a<i;){for(var s=1;s<a;++s){var o=n[a],u=n[s];n[a+s]=[o[0]^u[0],o[1]^u[1],o[2]^u[2],o[3]^u[3]]}a*=2}for(n[0]=[0,0,0,0],a=i+1;a<r;++a){var c=n[a^i];n[a]=[t[0]^c[0],t[1]^c[1],t[2]^c[2],t[3]^c[3]]}return n}},function(t,e,r){var i=r(0);r(5),r(15),r(28),r(13),r(41),r(4),r(16),r(1);var n=function(t,e,r,n){var a=i.util.createBuffer(),s=t.length>>1,o=s+(1&t.length),u=t.substr(0,o),c=t.substr(s,o),l=i.util.createBuffer(),h=i.hmac.create();r=e+r;var f=Math.ceil(n/16),p=Math.ceil(n/20);h.start("MD5",u);var d=i.util.createBuffer();l.putBytes(r);for(var g=0;g<f;++g)h.start(null,null),h.update(l.getBytes()),l.putBuffer(h.digest()),h.start(null,null),h.update(l.bytes()+r),d.putBuffer(h.digest());h.start("SHA1",c);var y=i.util.createBuffer();l.clear(),l.putBytes(r);for(g=0;g<p;++g)h.start(null,null),h.update(l.getBytes()),l.putBuffer(h.digest()),h.start(null,null),h.update(l.bytes()+r),y.putBuffer(h.digest());return a.putBytes(i.util.xorBytes(d.getBytes(),y.getBytes(),n)),a},a=function(t,e,r){var n=!1;try{var a=t.deflate(e.fragment.getBytes());e.fragment=i.util.createBuffer(a),e.length=a.length,n=!0}catch(t){}return n},s=function(t,e,r){var n=!1;try{var a=t.inflate(e.fragment.getBytes());e.fragment=i.util.createBuffer(a),e.length=a.length,n=!0}catch(t){}return n},o=function(t,e){var r=0;switch(e){case 1:r=t.getByte();break;case 2:r=t.getInt16();break;case 3:r=t.getInt24();break;case 4:r=t.getInt32()}return i.util.createBuffer(t.getBytes(r))},u=function(t,e,r){t.putInt(r.length(),e<<3),t.putBuffer(r)},c={Versions:{TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}}};c.SupportedVersions=[c.Versions.TLS_1_1,c.Versions.TLS_1_0],c.Version=c.SupportedVersions[0],c.MaxFragment=15360,c.ConnectionEnd={server:0,client:1},c.PRFAlgorithm={tls_prf_sha256:0},c.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2},c.CipherType={stream:0,block:1,aead:2},c.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4},c.CompressionMethod={none:0,deflate:1},c.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24},c.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20},c.Alert={},c.Alert.Level={warning:1,fatal:2},c.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100},c.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2},c.CipherSuites={},c.getCipherSuite=function(t){var e=null;for(var r in c.CipherSuites){var i=c.CipherSuites[r];if(i.id[0]===t.charCodeAt(0)&&i.id[1]===t.charCodeAt(1)){e=i;break}}return e},c.handleUnexpected=function(t,e){!t.open&&t.entity===c.ConnectionEnd.client||t.error(t,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.unexpected_message}})},c.handleHelloRequest=function(t,e,r){!t.handshaking&&t.handshakes>0&&(c.queue(t,c.createAlert(t,{level:c.Alert.Level.warning,description:c.Alert.Description.no_renegotiation})),c.flush(t)),t.process()},c.parseHelloMessage=function(t,e,r){var n=null,a=t.entity===c.ConnectionEnd.client;if(r<38)t.error(t,{message:a?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.illegal_parameter}});else{var s=e.fragment,u=s.length();if(n={version:{major:s.getByte(),minor:s.getByte()},random:i.util.createBuffer(s.getBytes(32)),session_id:o(s,1),extensions:[]},a?(n.cipher_suite=s.getBytes(2),n.compression_method=s.getByte()):(n.cipher_suites=o(s,2),n.compression_methods=o(s,1)),(u=r-(u-s.length()))>0){for(var l=o(s,2);l.length()>0;)n.extensions.push({type:[l.getByte(),l.getByte()],data:o(l,2)});if(!a)for(var h=0;h<n.extensions.length;++h){var f=n.extensions[h];if(0===f.type[0]&&0===f.type[1])for(var p=o(f.data,2);p.length()>0;){if(0!==p.getByte())break;t.session.extensions.server_name.serverNameList.push(o(p,2).getBytes())}}}if(t.session.version&&(n.version.major!==t.session.version.major||n.version.minor!==t.session.version.minor))return t.error(t,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.protocol_version}});if(a)t.session.cipherSuite=c.getCipherSuite(n.cipher_suite);else for(var d=i.util.createBuffer(n.cipher_suites.bytes());d.length()>0&&(t.session.cipherSuite=c.getCipherSuite(d.getBytes(2)),null===t.session.cipherSuite););if(null===t.session.cipherSuite)return t.error(t,{message:"No cipher suites in common.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.handshake_failure},cipherSuite:i.util.bytesToHex(n.cipher_suite)});t.session.compressionMethod=a?n.compression_method:c.CompressionMethod.none}return n},c.createSecurityParameters=function(t,e){var r=t.entity===c.ConnectionEnd.client,i=e.random.bytes(),n=r?t.session.sp.client_random:i,a=r?i:c.createRandom().getBytes();t.session.sp={entity:t.entity,prf_algorithm:c.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:t.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:n,server_random:a}},c.handleServerHello=function(t,e,r){var i=c.parseHelloMessage(t,e,r);if(!t.fail){if(!(i.version.minor<=t.version.minor))return t.error(t,{message:"Incompatible TLS version.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.protocol_version}});t.version.minor=i.version.minor,t.session.version=t.version;var n=i.session_id.bytes();n.length>0&&n===t.session.id?(t.expect=d,t.session.resuming=!0,t.session.sp.server_random=i.random.bytes()):(t.expect=l,t.session.resuming=!1,c.createSecurityParameters(t,i)),t.session.id=n,t.process()}},c.handleClientHello=function(t,e,r){var n=c.parseHelloMessage(t,e,r);if(!t.fail){var a=n.session_id.bytes(),s=null;if(t.sessionCache&&(null===(s=t.sessionCache.getSession(a))?a="":(s.version.major!==n.version.major||s.version.minor>n.version.minor)&&(s=null,a="")),0===a.length&&(a=i.random.getBytes(32)),t.session.id=a,t.session.clientHelloVersion=n.version,t.session.sp={},s)t.version=t.session.version=s.version,t.session.sp=s.sp;else{for(var o,u=1;u<c.SupportedVersions.length&&!((o=c.SupportedVersions[u]).minor<=n.version.minor);++u);t.version={major:o.major,minor:o.minor},t.session.version=t.version}null!==s?(t.expect=C,t.session.resuming=!0,t.session.sp.client_random=n.random.bytes()):(t.expect=!1!==t.verifyClient?v:_,t.session.resuming=!1,c.createSecurityParameters(t,n)),t.open=!0,c.queue(t,c.createRecord(t,{type:c.ContentType.handshake,data:c.createServerHello(t)})),t.session.resuming?(c.queue(t,c.createRecord(t,{type:c.ContentType.change_cipher_spec,data:c.createChangeCipherSpec()})),t.state.pending=c.createConnectionState(t),t.state.current.write=t.state.pending.write,c.queue(t,c.createRecord(t,{type:c.ContentType.handshake,data:c.createFinished(t)}))):(c.queue(t,c.createRecord(t,{type:c.ContentType.handshake,data:c.createCertificate(t)})),t.fail||(c.queue(t,c.createRecord(t,{type:c.ContentType.handshake,data:c.createServerKeyExchange(t)})),!1!==t.verifyClient&&c.queue(t,c.createRecord(t,{type:c.ContentType.handshake,data:c.createCertificateRequest(t)})),c.queue(t,c.createRecord(t,{type:c.ContentType.handshake,data:c.createServerHelloDone(t)})))),c.flush(t),t.process()}},c.handleCertificate=function(t,e,r){if(r<3)return t.error(t,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.illegal_parameter}});var n,a,s=e.fragment,u={certificate_list:o(s,3)},l=[];try{for(;u.certificate_list.length()>0;)n=o(u.certificate_list,3),a=i.asn1.fromDer(n),n=i.pki.certificateFromAsn1(a,!0),l.push(n)}catch(e){return t.error(t,{message:"Could not parse certificate list.",cause:e,send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.bad_certificate}})}var f=t.entity===c.ConnectionEnd.client;!f&&!0!==t.verifyClient||0!==l.length?0===l.length?t.expect=f?h:_:(f?t.session.serverCertificate=l[0]:t.session.clientCertificate=l[0],c.verifyCertificateChain(t,l)&&(t.expect=f?h:_)):t.error(t,{message:f?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.illegal_parameter}}),t.process()},c.handleServerKeyExchange=function(t,e,r){if(r>0)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.unsupported_certificate}});t.expect=f,t.process()},c.handleClientKeyExchange=function(t,e,r){if(r<48)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.unsupported_certificate}});var n=e.fragment,a={enc_pre_master_secret:o(n,2).getBytes()},s=null;if(t.getPrivateKey)try{s=t.getPrivateKey(t,t.session.serverCertificate),s=i.pki.privateKeyFromPem(s)}catch(e){t.error(t,{message:"Could not get private key.",cause:e,send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.internal_error}})}if(null===s)return t.error(t,{message:"No private key set.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.internal_error}});try{var u=t.session.sp;u.pre_master_secret=s.decrypt(a.enc_pre_master_secret);var l=t.session.clientHelloVersion;if(l.major!==u.pre_master_secret.charCodeAt(0)||l.minor!==u.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch(t){u.pre_master_secret=i.random.getBytes(48)}t.expect=C,null!==t.session.clientCertificate&&(t.expect=b),t.process()},c.handleCertificateRequest=function(t,e,r){if(r<3)return t.error(t,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.illegal_parameter}});var i=e.fragment,n={certificate_types:o(i,1),certificate_authorities:o(i,2)};t.session.certificateRequest=n,t.expect=p,t.process()},c.handleCertificateVerify=function(t,e,r){if(r<2)return t.error(t,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.illegal_parameter}});var n=e.fragment;n.read-=4;var a=n.bytes();n.read+=4;var s={signature:o(n,2).getBytes()},u=i.util.createBuffer();u.putBuffer(t.session.md5.digest()),u.putBuffer(t.session.sha1.digest()),u=u.getBytes();try{if(!t.session.clientCertificate.publicKey.verify(u,s.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");t.session.md5.update(a),t.session.sha1.update(a)}catch(e){return t.error(t,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.handshake_failure}})}t.expect=C,t.process()},c.handleServerHelloDone=function(t,e,r){if(r>0)return t.error(t,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.record_overflow}});if(null===t.serverCertificate){var n={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.insufficient_security}},a=t.verify(t,n.alert.description,0,[]);if(!0!==a)return(a||0===a)&&("object"!=typeof a||i.util.isArray(a)?"number"==typeof a&&(n.alert.description=a):(a.message&&(n.message=a.message),a.alert&&(n.alert.description=a.alert))),t.error(t,n)}null!==t.session.certificateRequest&&(e=c.createRecord(t,{type:c.ContentType.handshake,data:c.createCertificate(t)}),c.queue(t,e)),e=c.createRecord(t,{type:c.ContentType.handshake,data:c.createClientKeyExchange(t)}),c.queue(t,e),t.expect=m;var s=function(t,e){null!==t.session.certificateRequest&&null!==t.session.clientCertificate&&c.queue(t,c.createRecord(t,{type:c.ContentType.handshake,data:c.createCertificateVerify(t,e)})),c.queue(t,c.createRecord(t,{type:c.ContentType.change_cipher_spec,data:c.createChangeCipherSpec()})),t.state.pending=c.createConnectionState(t),t.state.current.write=t.state.pending.write,c.queue(t,c.createRecord(t,{type:c.ContentType.handshake,data:c.createFinished(t)})),t.expect=d,c.flush(t),t.process()};if(null===t.session.certificateRequest||null===t.session.clientCertificate)return s(t,null);c.getClientSignature(t,s)},c.handleChangeCipherSpec=function(t,e){if(1!==e.fragment.getByte())return t.error(t,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.illegal_parameter}});var r=t.entity===c.ConnectionEnd.client;(t.session.resuming&&r||!t.session.resuming&&!r)&&(t.state.pending=c.createConnectionState(t)),t.state.current.read=t.state.pending.read,(!t.session.resuming&&r||t.session.resuming&&!r)&&(t.state.pending=null),t.expect=r?g:E,t.process()},c.handleFinished=function(t,e,r){var a=e.fragment;a.read-=4;var s=a.bytes();a.read+=4;var o=e.fragment.getBytes();(a=i.util.createBuffer()).putBuffer(t.session.md5.digest()),a.putBuffer(t.session.sha1.digest());var u=t.entity===c.ConnectionEnd.client,l=u?"server finished":"client finished",h=t.session.sp;if((a=n(h.master_secret,l,a.getBytes(),12)).getBytes()!==o)return t.error(t,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.decrypt_error}});t.session.md5.update(s),t.session.sha1.update(s),(t.session.resuming&&u||!t.session.resuming&&!u)&&(c.queue(t,c.createRecord(t,{type:c.ContentType.change_cipher_spec,data:c.createChangeCipherSpec()})),t.state.current.write=t.state.pending.write,t.state.pending=null,c.queue(t,c.createRecord(t,{type:c.ContentType.handshake,data:c.createFinished(t)}))),t.expect=u?y:S,t.handshaking=!1,++t.handshakes,t.peerCertificate=u?t.session.serverCertificate:t.session.clientCertificate,c.flush(t),t.isConnected=!0,t.connected(t),t.process()},c.handleAlert=function(t,e){var r,i=e.fragment,n={level:i.getByte(),description:i.getByte()};switch(n.description){case c.Alert.Description.close_notify:r="Connection closed.";break;case c.Alert.Description.unexpected_message:r="Unexpected message.";break;case c.Alert.Description.bad_record_mac:r="Bad record MAC.";break;case c.Alert.Description.decryption_failed:r="Decryption failed.";break;case c.Alert.Description.record_overflow:r="Record overflow.";break;case c.Alert.Description.decompression_failure:r="Decompression failed.";break;case c.Alert.Description.handshake_failure:r="Handshake failure.";break;case c.Alert.Description.bad_certificate:r="Bad certificate.";break;case c.Alert.Description.unsupported_certificate:r="Unsupported certificate.";break;case c.Alert.Description.certificate_revoked:r="Certificate revoked.";break;case c.Alert.Description.certificate_expired:r="Certificate expired.";break;case c.Alert.Description.certificate_unknown:r="Certificate unknown.";break;case c.Alert.Description.illegal_parameter:r="Illegal parameter.";break;case c.Alert.Description.unknown_ca:r="Unknown certificate authority.";break;case c.Alert.Description.access_denied:r="Access denied.";break;case c.Alert.Description.decode_error:r="Decode error.";break;case c.Alert.Description.decrypt_error:r="Decrypt error.";break;case c.Alert.Description.export_restriction:r="Export restriction.";break;case c.Alert.Description.protocol_version:r="Unsupported protocol version.";break;case c.Alert.Description.insufficient_security:r="Insufficient security.";break;case c.Alert.Description.internal_error:r="Internal error.";break;case c.Alert.Description.user_canceled:r="User canceled.";break;case c.Alert.Description.no_renegotiation:r="Renegotiation not supported.";break;default:r="Unknown error."}if(n.description===c.Alert.Description.close_notify)return t.close();t.error(t,{message:r,send:!1,origin:t.entity===c.ConnectionEnd.client?"server":"client",alert:n}),t.process()},c.handleHandshake=function(t,e){var r=e.fragment,n=r.getByte(),a=r.getInt24();if(a>r.length())return t.fragmented=e,e.fragment=i.util.createBuffer(),r.read-=4,t.process();t.fragmented=null,r.read-=4;var s=r.bytes(a+4);r.read+=4,n in M[t.entity][t.expect]?(t.entity!==c.ConnectionEnd.server||t.open||t.fail||(t.handshaking=!0,t.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:i.md.md5.create(),sha1:i.md.sha1.create()}),n!==c.HandshakeType.hello_request&&n!==c.HandshakeType.certificate_verify&&n!==c.HandshakeType.finished&&(t.session.md5.update(s),t.session.sha1.update(s)),M[t.entity][t.expect][n](t,e,a)):c.handleUnexpected(t,e)},c.handleApplicationData=function(t,e){t.data.putBuffer(e.fragment),t.dataReady(t),t.process()},c.handleHeartbeat=function(t,e){var r=e.fragment,n=r.getByte(),a=r.getInt16(),s=r.getBytes(a);if(n===c.HeartbeatMessageType.heartbeat_request){if(t.handshaking||a>s.length)return t.process();c.queue(t,c.createRecord(t,{type:c.ContentType.heartbeat,data:c.createHeartbeat(c.HeartbeatMessageType.heartbeat_response,s)})),c.flush(t)}else if(n===c.HeartbeatMessageType.heartbeat_response){if(s!==t.expectedHeartbeatPayload)return t.process();t.heartbeatReceived&&t.heartbeatReceived(t,i.util.createBuffer(s))}t.process()};var l=1,h=2,f=3,p=4,d=5,g=6,y=7,m=8,v=1,_=2,b=3,C=4,E=5,S=6,w=c.handleUnexpected,A=c.handleChangeCipherSpec,T=c.handleAlert,k=c.handleHandshake,I=c.handleApplicationData,B=c.handleHeartbeat,R=[];R[c.ConnectionEnd.client]=[[w,T,k,w,B],[w,T,k,w,B],[w,T,k,w,B],[w,T,k,w,B],[w,T,k,w,B],[A,T,w,w,B],[w,T,k,w,B],[w,T,k,I,B],[w,T,k,w,B]],R[c.ConnectionEnd.server]=[[w,T,k,w,B],[w,T,k,w,B],[w,T,k,w,B],[w,T,k,w,B],[A,T,w,w,B],[w,T,k,w,B],[w,T,k,I,B],[w,T,k,w,B]];var N=c.handleHelloRequest,U=c.handleServerHello,L=c.handleCertificate,P=c.handleServerKeyExchange,D=c.handleCertificateRequest,x=c.handleServerHelloDone,O=c.handleFinished,M=[];M[c.ConnectionEnd.client]=[[w,w,U,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w],[N,w,w,w,w,w,w,w,w,w,w,L,P,D,x,w,w,w,w,w,w],[N,w,w,w,w,w,w,w,w,w,w,w,P,D,x,w,w,w,w,w,w],[N,w,w,w,w,w,w,w,w,w,w,w,w,D,x,w,w,w,w,w,w],[N,w,w,w,w,w,w,w,w,w,w,w,w,w,x,w,w,w,w,w,w],[N,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w],[N,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,O],[N,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w],[N,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w]];var V=c.handleClientHello,K=c.handleClientKeyExchange,F=c.handleCertificateVerify;M[c.ConnectionEnd.server]=[[w,V,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w],[w,w,w,w,w,w,w,w,w,w,w,L,w,w,w,w,w,w,w,w,w],[w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,K,w,w,w,w],[w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,F,w,w,w,w,w],[w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w],[w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,O],[w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w],[w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w,w]],c.generateKeys=function(t,e){var r=n,i=e.client_random+e.server_random;t.session.resuming||(e.master_secret=r(e.pre_master_secret,"master secret",i,48).bytes(),e.pre_master_secret=null),i=e.server_random+e.client_random;var a=2*e.mac_key_length+2*e.enc_key_length,s=t.version.major===c.Versions.TLS_1_0.major&&t.version.minor===c.Versions.TLS_1_0.minor;s&&(a+=2*e.fixed_iv_length);var o=r(e.master_secret,"key expansion",i,a),u={client_write_MAC_key:o.getBytes(e.mac_key_length),server_write_MAC_key:o.getBytes(e.mac_key_length),client_write_key:o.getBytes(e.enc_key_length),server_write_key:o.getBytes(e.enc_key_length)};return s&&(u.client_write_IV=o.getBytes(e.fixed_iv_length),u.server_write_IV=o.getBytes(e.fixed_iv_length)),u},c.createConnectionState=function(t){var e=t.entity===c.ConnectionEnd.client,r=function(){var t={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:function(t){return!0},compressionState:null,compressFunction:function(t){return!0},updateSequenceNumber:function(){4294967295===t.sequenceNumber[1]?(t.sequenceNumber[1]=0,++t.sequenceNumber[0]):++t.sequenceNumber[1]}};return t},i={read:r(),write:r()};if(i.read.update=function(t,e){return i.read.cipherFunction(e,i.read)?i.read.compressFunction(t,e,i.read)||t.error(t,{message:"Could not decompress record.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.decompression_failure}}):t.error(t,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.bad_record_mac}}),!t.fail},i.write.update=function(t,e){return i.write.compressFunction(t,e,i.write)?i.write.cipherFunction(e,i.write)||t.error(t,{message:"Could not encrypt record.",send:!1,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.internal_error}}):t.error(t,{message:"Could not compress record.",send:!1,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.internal_error}}),!t.fail},t.session){var n=t.session.sp;switch(t.session.cipherSuite.initSecurityParameters(n),n.keys=c.generateKeys(t,n),i.read.macKey=e?n.keys.server_write_MAC_key:n.keys.client_write_MAC_key,i.write.macKey=e?n.keys.client_write_MAC_key:n.keys.server_write_MAC_key,t.session.cipherSuite.initConnectionState(i,t,n),n.compression_algorithm){case c.CompressionMethod.none:break;case c.CompressionMethod.deflate:i.read.compressFunction=s,i.write.compressFunction=a;break;default:throw new Error("Unsupported compression algorithm.")}}return i},c.createRandom=function(){var t=new Date,e=+t+6e4*t.getTimezoneOffset(),r=i.util.createBuffer();return r.putInt32(e),r.putBytes(i.random.getBytes(28)),r},c.createRecord=function(t,e){return e.data?{type:e.type,version:{major:t.version.major,minor:t.version.minor},length:e.data.length(),fragment:e.data}:null},c.createAlert=function(t,e){var r=i.util.createBuffer();return r.putByte(e.level),r.putByte(e.description),c.createRecord(t,{type:c.ContentType.alert,data:r})},c.createClientHello=function(t){t.session.clientHelloVersion={major:t.version.major,minor:t.version.minor};for(var e=i.util.createBuffer(),r=0;r<t.cipherSuites.length;++r){var n=t.cipherSuites[r];e.putByte(n.id[0]),e.putByte(n.id[1])}var a=e.length(),s=i.util.createBuffer();s.putByte(c.CompressionMethod.none);var o=s.length(),l=i.util.createBuffer();if(t.virtualHost){var h=i.util.createBuffer();h.putByte(0),h.putByte(0);var f=i.util.createBuffer();f.putByte(0),u(f,2,i.util.createBuffer(t.virtualHost));var p=i.util.createBuffer();u(p,2,f),u(h,2,p),l.putBuffer(h)}var d=l.length();d>0&&(d+=2);var g=t.session.id,y=g.length+1+2+4+28+2+a+1+o+d,m=i.util.createBuffer();return m.putByte(c.HandshakeType.client_hello),m.putInt24(y),m.putByte(t.version.major),m.putByte(t.version.minor),m.putBytes(t.session.sp.client_random),u(m,1,i.util.createBuffer(g)),u(m,2,e),u(m,1,s),d>0&&u(m,2,l),m},c.createServerHello=function(t){var e=t.session.id,r=e.length+1+2+4+28+2+1,n=i.util.createBuffer();return n.putByte(c.HandshakeType.server_hello),n.putInt24(r),n.putByte(t.version.major),n.putByte(t.version.minor),n.putBytes(t.session.sp.server_random),u(n,1,i.util.createBuffer(e)),n.putByte(t.session.cipherSuite.id[0]),n.putByte(t.session.cipherSuite.id[1]),n.putByte(t.session.compressionMethod),n},c.createCertificate=function(t){var e,r=t.entity===c.ConnectionEnd.client,n=null;t.getCertificate&&(e=r?t.session.certificateRequest:t.session.extensions.server_name.serverNameList,n=t.getCertificate(t,e));var a=i.util.createBuffer();if(null!==n)try{i.util.isArray(n)||(n=[n]);for(var s=null,o=0;o<n.length;++o){var l=i.pem.decode(n[o])[0];if("CERTIFICATE"!==l.type&&"X509 CERTIFICATE"!==l.type&&"TRUSTED CERTIFICATE"!==l.type){var h=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw h.headerType=l.type,h}if(l.procType&&"ENCRYPTED"===l.procType.type)throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var f=i.util.createBuffer(l.body);null===s&&(s=i.asn1.fromDer(f.bytes(),!1));var p=i.util.createBuffer();u(p,3,f),a.putBuffer(p)}n=i.pki.certificateFromAsn1(s),r?t.session.clientCertificate=n:t.session.serverCertificate=n}catch(e){return t.error(t,{message:"Could not send certificate list.",cause:e,send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.bad_certificate}})}var d=3+a.length(),g=i.util.createBuffer();return g.putByte(c.HandshakeType.certificate),g.putInt24(d),u(g,3,a),g},c.createClientKeyExchange=function(t){var e=i.util.createBuffer();e.putByte(t.session.clientHelloVersion.major),e.putByte(t.session.clientHelloVersion.minor),e.putBytes(i.random.getBytes(46));var r=t.session.sp;r.pre_master_secret=e.getBytes();var n=(e=t.session.serverCertificate.publicKey.encrypt(r.pre_master_secret)).length+2,a=i.util.createBuffer();return a.putByte(c.HandshakeType.client_key_exchange),a.putInt24(n),a.putInt16(e.length),a.putBytes(e),a},c.createServerKeyExchange=function(t){var e=i.util.createBuffer();return e},c.getClientSignature=function(t,e){var r=i.util.createBuffer();r.putBuffer(t.session.md5.digest()),r.putBuffer(t.session.sha1.digest()),r=r.getBytes(),t.getSignature=t.getSignature||function(t,e,r){var n=null;if(t.getPrivateKey)try{n=t.getPrivateKey(t,t.session.clientCertificate),n=i.pki.privateKeyFromPem(n)}catch(e){t.error(t,{message:"Could not get private key.",cause:e,send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.internal_error}})}null===n?t.error(t,{message:"No private key set.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.internal_error}}):e=n.sign(e,null),r(t,e)},t.getSignature(t,r,e)},c.createCertificateVerify=function(t,e){var r=e.length+2,n=i.util.createBuffer();return n.putByte(c.HandshakeType.certificate_verify),n.putInt24(r),n.putInt16(e.length),n.putBytes(e),n},c.createCertificateRequest=function(t){var e=i.util.createBuffer();e.putByte(1);var r=i.util.createBuffer();for(var n in t.caStore.certs){var a=t.caStore.certs[n],s=i.pki.distinguishedNameToAsn1(a.subject),o=i.asn1.toDer(s);r.putInt16(o.length()),r.putBuffer(o)}var l=1+e.length()+2+r.length(),h=i.util.createBuffer();return h.putByte(c.HandshakeType.certificate_request),h.putInt24(l),u(h,1,e),u(h,2,r),h},c.createServerHelloDone=function(t){var e=i.util.createBuffer();return e.putByte(c.HandshakeType.server_hello_done),e.putInt24(0),e},c.createChangeCipherSpec=function(){var t=i.util.createBuffer();return t.putByte(1),t},c.createFinished=function(t){var e=i.util.createBuffer();e.putBuffer(t.session.md5.digest()),e.putBuffer(t.session.sha1.digest());var r=t.entity===c.ConnectionEnd.client,a=t.session.sp,s=r?"client finished":"server finished";e=n(a.master_secret,s,e.getBytes(),12);var o=i.util.createBuffer();return o.putByte(c.HandshakeType.finished),o.putInt24(e.length()),o.putBuffer(e),o},c.createHeartbeat=function(t,e,r){void 0===r&&(r=e.length);var n=i.util.createBuffer();n.putByte(t),n.putInt16(r),n.putBytes(e);var a=n.length(),s=Math.max(16,a-r-3);return n.putBytes(i.random.getBytes(s)),n},c.queue=function(t,e){if(e&&(0!==e.fragment.length()||e.type!==c.ContentType.handshake&&e.type!==c.ContentType.alert&&e.type!==c.ContentType.change_cipher_spec)){if(e.type===c.ContentType.handshake){var r=e.fragment.bytes();t.session.md5.update(r),t.session.sha1.update(r),r=null}var n;if(e.fragment.length()<=c.MaxFragment)n=[e];else{n=[];for(var a=e.fragment.bytes();a.length>c.MaxFragment;)n.push(c.createRecord(t,{type:e.type,data:i.util.createBuffer(a.slice(0,c.MaxFragment))})),a=a.slice(c.MaxFragment);a.length>0&&n.push(c.createRecord(t,{type:e.type,data:i.util.createBuffer(a)}))}for(var s=0;s<n.length&&!t.fail;++s){var o=n[s];t.state.current.write.update(t,o)&&t.records.push(o)}}},c.flush=function(t){for(var e=0;e<t.records.length;++e){var r=t.records[e];t.tlsData.putByte(r.type),t.tlsData.putByte(r.version.major),t.tlsData.putByte(r.version.minor),t.tlsData.putInt16(r.fragment.length()),t.tlsData.putBuffer(t.records[e].fragment)}return t.records=[],t.tlsDataReady(t)};var z=function(t){switch(t){case!0:return!0;case i.pki.certificateError.bad_certificate:return c.Alert.Description.bad_certificate;case i.pki.certificateError.unsupported_certificate:return c.Alert.Description.unsupported_certificate;case i.pki.certificateError.certificate_revoked:return c.Alert.Description.certificate_revoked;case i.pki.certificateError.certificate_expired:return c.Alert.Description.certificate_expired;case i.pki.certificateError.certificate_unknown:return c.Alert.Description.certificate_unknown;case i.pki.certificateError.unknown_ca:return c.Alert.Description.unknown_ca;default:return c.Alert.Description.bad_certificate}};for(var j in c.verifyCertificateChain=function(t,e){try{i.pki.verifyCertificateChain(t.caStore,e,function(e,r,n){z(e);var a=t.verify(t,e,r,n);if(!0!==a){if("object"==typeof a&&!i.util.isArray(a)){var s=new Error("The application rejected the certificate.");throw s.send=!0,s.alert={level:c.Alert.Level.fatal,description:c.Alert.Description.bad_certificate},a.message&&(s.message=a.message),a.alert&&(s.alert.description=a.alert),s}a!==e&&(a=function(t){switch(t){case!0:return!0;case c.Alert.Description.bad_certificate:return i.pki.certificateError.bad_certificate;case c.Alert.Description.unsupported_certificate:return i.pki.certificateError.unsupported_certificate;case c.Alert.Description.certificate_revoked:return i.pki.certificateError.certificate_revoked;case c.Alert.Description.certificate_expired:return i.pki.certificateError.certificate_expired;case c.Alert.Description.certificate_unknown:return i.pki.certificateError.certificate_unknown;case c.Alert.Description.unknown_ca:return i.pki.certificateError.unknown_ca;default:return i.pki.certificateError.bad_certificate}}(a))}return a})}catch(e){var r=e;("object"!=typeof r||i.util.isArray(r))&&(r={send:!0,alert:{level:c.Alert.Level.fatal,description:z(e)}}),"send"in r||(r.send=!0),"alert"in r||(r.alert={level:c.Alert.Level.fatal,description:z(r.error)}),t.error(t,r)}return!t.fail},c.createSessionCache=function(t,e){var r=null;if(t&&t.getSession&&t.setSession&&t.order)r=t;else{for(var n in(r={}).cache=t||{},r.capacity=Math.max(e||100,1),r.order=[],t)r.order.length<=e?r.order.push(n):delete t[n];r.getSession=function(t){var e=null,n=null;if(t?n=i.util.bytesToHex(t):r.order.length>0&&(n=r.order[0]),null!==n&&n in r.cache)for(var a in e=r.cache[n],delete r.cache[n],r.order)if(r.order[a]===n){r.order.splice(a,1);break}return e},r.setSession=function(t,e){if(r.order.length===r.capacity){var n=r.order.shift();delete r.cache[n]}n=i.util.bytesToHex(t);r.order.push(n),r.cache[n]=e}}return r},c.createConnection=function(t){var e=null;e=t.caStore?i.util.isArray(t.caStore)?i.pki.createCaStore(t.caStore):t.caStore:i.pki.createCaStore();var r=t.cipherSuites||null;if(null===r)for(var n in r=[],c.CipherSuites)r.push(c.CipherSuites[n]);var a=t.server?c.ConnectionEnd.server:c.ConnectionEnd.client,s=t.sessionCache?c.createSessionCache(t.sessionCache):null,o={version:{major:c.Version.major,minor:c.Version.minor},entity:a,sessionId:t.sessionId,caStore:e,sessionCache:s,cipherSuites:r,connected:t.connected,virtualHost:t.virtualHost||null,verifyClient:t.verifyClient||!1,verify:t.verify||function(t,e,r,i){return e},getCertificate:t.getCertificate||null,getPrivateKey:t.getPrivateKey||null,getSignature:t.getSignature||null,input:i.util.createBuffer(),tlsData:i.util.createBuffer(),data:i.util.createBuffer(),tlsDataReady:t.tlsDataReady,dataReady:t.dataReady,heartbeatReceived:t.heartbeatReceived,closed:t.closed,error:function(e,r){r.origin=r.origin||(e.entity===c.ConnectionEnd.client?"client":"server"),r.send&&(c.queue(e,c.createAlert(e,r.alert)),c.flush(e));var i=!1!==r.fatal;i&&(e.fail=!0),t.error(e,r),i&&e.close(!1)},deflate:t.deflate||null,inflate:t.inflate||null,reset:function(t){o.version={major:c.Version.major,minor:c.Version.minor},o.record=null,o.session=null,o.peerCertificate=null,o.state={pending:null,current:null},o.expect=(o.entity,c.ConnectionEnd.client,0),o.fragmented=null,o.records=[],o.open=!1,o.handshakes=0,o.handshaking=!1,o.isConnected=!1,o.fail=!(t||void 0===t),o.input.clear(),o.tlsData.clear(),o.data.clear(),o.state.current=c.createConnectionState(o)}};o.reset();return o.handshake=function(t){if(o.entity!==c.ConnectionEnd.client)o.error(o,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(o.handshaking)o.error(o,{message:"Handshake already in progress.",fatal:!1});else{o.fail&&!o.open&&0===o.handshakes&&(o.fail=!1),o.handshaking=!0;var e=null;(t=t||"").length>0&&(o.sessionCache&&(e=o.sessionCache.getSession(t)),null===e&&(t="")),0===t.length&&o.sessionCache&&null!==(e=o.sessionCache.getSession())&&(t=e.id),o.session={id:t,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:i.md.md5.create(),sha1:i.md.sha1.create()},e&&(o.version=e.version,o.session.sp=e.sp),o.session.sp.client_random=c.createRandom().getBytes(),o.open=!0,c.queue(o,c.createRecord(o,{type:c.ContentType.handshake,data:c.createClientHello(o)})),c.flush(o)}},o.process=function(t){var e=0;return t&&o.input.putBytes(t),o.fail||(null!==o.record&&o.record.ready&&o.record.fragment.isEmpty()&&(o.record=null),null===o.record&&(e=function(t){var e=0,r=t.input,n=r.length();if(n<5)e=5-n;else{t.record={type:r.getByte(),version:{major:r.getByte(),minor:r.getByte()},length:r.getInt16(),fragment:i.util.createBuffer(),ready:!1};var a=t.record.version.major===t.version.major;a&&t.session&&t.session.version&&(a=t.record.version.minor===t.version.minor),a||t.error(t,{message:"Incompatible TLS version.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.protocol_version}})}return e}(o)),o.fail||null===o.record||o.record.ready||(e=function(t){var e=0,r=t.input,i=r.length();i<t.record.length?e=t.record.length-i:(t.record.fragment.putBytes(r.getBytes(t.record.length)),r.compact(),t.state.current.read.update(t,t.record)&&(null!==t.fragmented&&(t.fragmented.type===t.record.type?(t.fragmented.fragment.putBuffer(t.record.fragment),t.record=t.fragmented):t.error(t,{message:"Invalid fragmented record.",send:!0,alert:{level:c.Alert.Level.fatal,description:c.Alert.Description.unexpected_message}})),t.record.ready=!0));return e}(o)),!o.fail&&null!==o.record&&o.record.ready&&function(t,e){var r=e.type-c.ContentType.change_cipher_spec,i=R[t.entity][t.expect];r in i?i[r](t,e):c.handleUnexpected(t,e)}(o,o.record)),e},o.prepare=function(t){return c.queue(o,c.createRecord(o,{type:c.ContentType.application_data,data:i.util.createBuffer(t)})),c.flush(o)},o.prepareHeartbeatRequest=function(t,e){return t instanceof i.util.ByteBuffer&&(t=t.bytes()),void 0===e&&(e=t.length),o.expectedHeartbeatPayload=t,c.queue(o,c.createRecord(o,{type:c.ContentType.heartbeat,data:c.createHeartbeat(c.HeartbeatMessageType.heartbeat_request,t,e)})),c.flush(o)},o.close=function(t){if(!o.fail&&o.sessionCache&&o.session){var e={id:o.session.id,version:o.session.version,sp:o.session.sp};e.sp.keys=null,o.sessionCache.setSession(e.id,e)}o.open&&(o.open=!1,o.input.clear(),(o.isConnected||o.handshaking)&&(o.isConnected=o.handshaking=!1,c.queue(o,c.createAlert(o,{level:c.Alert.Level.warning,description:c.Alert.Description.close_notify})),c.flush(o)),o.closed(o)),o.reset(t)},o},t.exports=i.tls=i.tls||{},c)"function"!=typeof c[j]&&(i.tls[j]=c[j]);i.tls.prf_tls1=n,i.tls.hmac_sha1=function(t,e,r){var n=i.hmac.create();n.start("SHA1",t);var a=i.util.createBuffer();return a.putInt32(e[0]),a.putInt32(e[1]),a.putByte(r.type),a.putByte(r.version.major),a.putByte(r.version.minor),a.putInt16(r.length),a.putBytes(r.fragment.bytes()),n.update(a.getBytes()),n.digest().getBytes()},i.tls.createSessionCache=c.createSessionCache,i.tls.createConnection=c.createConnection},function(t,e,r){var i=r(0);r(5),r(10),r(42),r(13),r(29),r(49),r(31),r(19),r(1),r(30);var n=i.asn1,a=t.exports=i.pki=i.pki||{};a.pemToDer=function(t){var e=i.pem.decode(t)[0];if(e.procType&&"ENCRYPTED"===e.procType.type)throw new Error("Could not convert PEM to DER; PEM is encrypted.");return i.util.createBuffer(e.body)},a.privateKeyFromPem=function(t){var e=i.pem.decode(t)[0];if("PRIVATE KEY"!==e.type&&"RSA PRIVATE KEY"!==e.type){var r=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&"ENCRYPTED"===e.procType.type)throw new Error("Could not convert private key from PEM; PEM is encrypted.");var s=n.fromDer(e.body);return a.privateKeyFromAsn1(s)},a.privateKeyToPem=function(t,e){var r={type:"RSA PRIVATE KEY",body:n.toDer(a.privateKeyToAsn1(t)).getBytes()};return i.pem.encode(r,{maxline:e})},a.privateKeyInfoToPem=function(t,e){var r={type:"PRIVATE KEY",body:n.toDer(t).getBytes()};return i.pem.encode(r,{maxline:e})}},function(t,e,r){var i=r(0);if(r(9),r(5),r(18),r(6),r(10),r(29),r(13),r(4),r(46),r(19),r(1),void 0===n)var n=i.jsbn.BigInteger;var a=i.asn1,s=i.pki=i.pki||{};t.exports=s.pbe=i.pbe=i.pbe||{};var o=s.oids,u={name:"EncryptedPrivateKeyInfo",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:a.Class.UNIVERSAL,type:a.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},c={name:"PBES2Algorithms",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:a.Class.UNIVERSAL,type:a.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:a.Class.UNIVERSAL,type:a.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:a.Class.UNIVERSAL,type:a.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},l={name:"pkcs-12PbeParams",tagClass:a.Class.UNIVERSAL,type:a.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:a.Class.UNIVERSAL,type:a.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:a.Class.UNIVERSAL,type:a.Type.INTEGER,constructed:!1,capture:"iterations"}]};function h(t,e){return t.start().update(e).digest().getBytes()}function f(t){var e;if(t){if(!(e=s.oids[a.derToOid(t)])){var r=new Error("Unsupported PRF OID.");throw r.oid=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}}else e="hmacWithSHA1";return p(e)}function p(t){var e=i.md;switch(t){case"hmacWithSHA224":e=i.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":t=t.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!(e&&t in e))throw new Error("Unknown hash algorithm: "+t);return e[t].create()}s.encryptPrivateKeyInfo=function(t,e,r){(r=r||{}).saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var n,u,c,l=i.random.getBytesSync(r.saltSize),h=r.count,f=a.integerToDer(h);if(0===r.algorithm.indexOf("aes")||"des"===r.algorithm){var d,g,y;switch(r.algorithm){case"aes128":n=16,d=16,g=o["aes128-CBC"],y=i.aes.createEncryptionCipher;break;case"aes192":n=24,d=16,g=o["aes192-CBC"],y=i.aes.createEncryptionCipher;break;case"aes256":n=32,d=16,g=o["aes256-CBC"],y=i.aes.createEncryptionCipher;break;case"des":n=8,d=8,g=o.desCBC,y=i.des.createEncryptionCipher;break;default:throw(E=new Error("Cannot encrypt private key. Unknown encryption algorithm.")).algorithm=r.algorithm,E}var m="hmacWith"+r.prfAlgorithm.toUpperCase(),v=p(m),_=i.pkcs5.pbkdf2(e,l,h,n,v),b=i.random.getBytesSync(d);(S=y(_)).start(b),S.update(a.toDer(t)),S.finish(),c=S.output.getBytes();var C=function(t,e,r,n){var o=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,t),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,e.getBytes())]);"hmacWithSHA1"!==n&&o.value.push(a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,i.util.hexToBytes(r.toString(16))),a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(s.oids[n]).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.NULL,!1,"")]));return o}(l,f,n,m);u=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(o.pkcs5PBES2).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(o.pkcs5PBKDF2).getBytes()),C]),a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(g).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,b)])])])}else{var E;if("3des"!==r.algorithm)throw(E=new Error("Cannot encrypt private key. Unknown encryption algorithm.")).algorithm=r.algorithm,E;n=24;var S,w=new i.util.ByteBuffer(l);_=s.pbe.generatePkcs12Key(e,w,1,h,n),b=s.pbe.generatePkcs12Key(e,w,2,h,n);(S=i.des.createEncryptionCipher(_)).start(b),S.update(a.toDer(t)),S.finish(),c=S.output.getBytes(),u=a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OID,!1,a.oidToDer(o["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,l),a.create(a.Class.UNIVERSAL,a.Type.INTEGER,!1,f.getBytes())])])}return a.create(a.Class.UNIVERSAL,a.Type.SEQUENCE,!0,[u,a.create(a.Class.UNIVERSAL,a.Type.OCTETSTRING,!1,c)])},s.decryptPrivateKeyInfo=function(t,e){var r=null,n={},o=[];if(!a.validate(t,u,n,o)){var c=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw c.errors=o,c}var l=a.derToOid(n.encryptionOid),h=s.pbe.getCipher(l,n.encryptionParams,e),f=i.util.createBuffer(n.encryptedData);return h.update(f),h.finish()&&(r=a.fromDer(h.output)),r},s.encryptedPrivateKeyToPem=function(t,e){var r={type:"ENCRYPTED PRIVATE KEY",body:a.toDer(t).getBytes()};return i.pem.encode(r,{maxline:e})},s.encryptedPrivateKeyFromPem=function(t){var e=i.pem.decode(t)[0];if("ENCRYPTED PRIVATE KEY"!==e.type){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&"ENCRYPTED"===e.procType.type)throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return a.fromDer(e.body)},s.encryptRsaPrivateKey=function(t,e,r){if(!(r=r||{}).legacy){var n=s.wrapRsaPrivateKey(s.privateKeyToAsn1(t));return n=s.encryptPrivateKeyInfo(n,e,r),s.encryptedPrivateKeyToPem(n)}var o,u,c,l;switch(r.algorithm){case"aes128":o="AES-128-CBC",c=16,u=i.random.getBytesSync(16),l=i.aes.createEncryptionCipher;break;case"aes192":o="AES-192-CBC",c=24,u=i.random.getBytesSync(16),l=i.aes.createEncryptionCipher;break;case"aes256":o="AES-256-CBC",c=32,u=i.random.getBytesSync(16),l=i.aes.createEncryptionCipher;break;case"3des":o="DES-EDE3-CBC",c=24,u=i.random.getBytesSync(8),l=i.des.createEncryptionCipher;break;case"des":o="DES-CBC",c=8,u=i.random.getBytesSync(8),l=i.des.createEncryptionCipher;break;default:var h=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw h.algorithm=r.algorithm,h}var f=l(i.pbe.opensslDeriveBytes(e,u.substr(0,8),c));f.start(u),f.update(a.toDer(s.privateKeyToAsn1(t))),f.finish();var p={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:o,parameters:i.util.bytesToHex(u).toUpperCase()},body:f.output.getBytes()};return i.pem.encode(p)},s.decryptRsaPrivateKey=function(t,e){var r=null,n=i.pem.decode(t)[0];if("ENCRYPTED PRIVATE KEY"!==n.type&&"PRIVATE KEY"!==n.type&&"RSA PRIVATE KEY"!==n.type)throw(c=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".')).headerType=c,c;if(n.procType&&"ENCRYPTED"===n.procType.type){var o,u;switch(n.dekInfo.algorithm){case"DES-CBC":o=8,u=i.des.createDecryptionCipher;break;case"DES-EDE3-CBC":o=24,u=i.des.createDecryptionCipher;break;case"AES-128-CBC":o=16,u=i.aes.createDecryptionCipher;break;case"AES-192-CBC":o=24,u=i.aes.createDecryptionCipher;break;case"AES-256-CBC":o=32,u=i.aes.createDecryptionCipher;break;case"RC2-40-CBC":o=5,u=function(t){return i.rc2.createDecryptionCipher(t,40)};break;case"RC2-64-CBC":o=8,u=function(t){return i.rc2.createDecryptionCipher(t,64)};break;case"RC2-128-CBC":o=16,u=function(t){return i.rc2.createDecryptionCipher(t,128)};break;default:var c;throw(c=new Error('Could not decrypt private key; unsupported encryption algorithm "'+n.dekInfo.algorithm+'".')).algorithm=n.dekInfo.algorithm,c}var l=i.util.hexToBytes(n.dekInfo.parameters),h=u(i.pbe.opensslDeriveBytes(e,l.substr(0,8),o));if(h.start(l),h.update(i.util.createBuffer(n.body)),!h.finish())return r;r=h.output.getBytes()}else r=n.body;return null!==(r="ENCRYPTED PRIVATE KEY"===n.type?s.decryptPrivateKeyInfo(a.fromDer(r),e):a.fromDer(r))&&(r=s.privateKeyFromAsn1(r)),r},s.pbe.generatePkcs12Key=function(t,e,r,n,a,s){var o,u;if(void 0===s||null===s){if(!("sha1"in i.md))throw new Error('"sha1" hash algorithm unavailable.');s=i.md.sha1.create()}var c=s.digestLength,l=s.blockLength,h=new i.util.ByteBuffer,f=new i.util.ByteBuffer;if(null!==t&&void 0!==t){for(u=0;u<t.length;u++)f.putInt16(t.charCodeAt(u));f.putInt16(0)}var p=f.length(),d=e.length(),g=new i.util.ByteBuffer;g.fillWithByte(r,l);var y=l*Math.ceil(d/l),m=new i.util.ByteBuffer;for(u=0;u<y;u++)m.putByte(e.at(u%d));var v=l*Math.ceil(p/l),_=new i.util.ByteBuffer;for(u=0;u<v;u++)_.putByte(f.at(u%p));var b=m;b.putBuffer(_);for(var C=Math.ceil(a/c),E=1;E<=C;E++){var S=new i.util.ByteBuffer;S.putBytes(g.bytes()),S.putBytes(b.bytes());for(var w=0;w<n;w++)s.start(),s.update(S.getBytes()),S=s.digest();var A=new i.util.ByteBuffer;for(u=0;u<l;u++)A.putByte(S.at(u%c));var T=Math.ceil(d/l)+Math.ceil(p/l),k=new i.util.ByteBuffer;for(o=0;o<T;o++){var I=new i.util.ByteBuffer(b.getBytes(l)),B=511;for(u=A.length()-1;u>=0;u--)B>>=8,B+=A.at(u)+I.at(u),I.setAt(u,255&B);k.putBuffer(I)}b=k,h.putBuffer(S)}return h.truncate(h.length()-a),h},s.pbe.getCipher=function(t,e,r){switch(t){case s.oids.pkcs5PBES2:return s.pbe.getCipherForPBES2(t,e,r);case s.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case s.oids["pbewithSHAAnd40BitRC2-CBC"]:return s.pbe.getCipherForPKCS12PBE(t,e,r);default:var i=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw i.oid=t,i.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],i}},s.pbe.getCipherForPBES2=function(t,e,r){var n,o={},u=[];if(!a.validate(e,c,o,u))throw(n=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.")).errors=u,n;if((t=a.derToOid(o.kdfOid))!==s.oids.pkcs5PBKDF2)throw(n=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.")).oid=t,n.supportedOids=["pkcs5PBKDF2"],n;if((t=a.derToOid(o.encOid))!==s.oids["aes128-CBC"]&&t!==s.oids["aes192-CBC"]&&t!==s.oids["aes256-CBC"]&&t!==s.oids["des-EDE3-CBC"]&&t!==s.oids.desCBC)throw(n=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.")).oid=t,n.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],n;var l,h,p=o.kdfSalt,d=i.util.createBuffer(o.kdfIterationCount);switch(d=d.getInt(d.length()<<3),s.oids[t]){case"aes128-CBC":l=16,h=i.aes.createDecryptionCipher;break;case"aes192-CBC":l=24,h=i.aes.createDecryptionCipher;break;case"aes256-CBC":l=32,h=i.aes.createDecryptionCipher;break;case"des-EDE3-CBC":l=24,h=i.des.createDecryptionCipher;break;case"desCBC":l=8,h=i.des.createDecryptionCipher}var g=f(o.prfOid),y=i.pkcs5.pbkdf2(r,p,d,l,g),m=o.encIv,v=h(y);return v.start(m),v},s.pbe.getCipherForPKCS12PBE=function(t,e,r){var n={},o=[];if(!a.validate(e,l,n,o))throw(g=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.")).errors=o,g;var u,c,h,p=i.util.createBuffer(n.salt),d=i.util.createBuffer(n.iterations);switch(d=d.getInt(d.length()<<3),t){case s.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:u=24,c=8,h=i.des.startDecrypting;break;case s.oids["pbewithSHAAnd40BitRC2-CBC"]:u=5,c=8,h=function(t,e){var r=i.rc2.createDecryptionCipher(t,40);return r.start(e,null),r};break;default:var g;throw(g=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.")).oid=t,g}var y=f(n.prfOid),m=s.pbe.generatePkcs12Key(r,p,1,d,u,y);return y.start(),h(m,s.pbe.generatePkcs12Key(r,p,2,d,c,y))},s.pbe.opensslDeriveBytes=function(t,e,r,n){if(void 0===n||null===n){if(!("md5"in i.md))throw new Error('"md5" hash algorithm unavailable.');n=i.md.md5.create()}null===e&&(e="");for(var a=[h(n,t+e)],s=16,o=1;s<r;++o,s+=16)a.push(h(n,a[o-1]+t+e));return a.join("").substr(0,r)}},function(t,e){},function(t,e,r){var i=r(0);r(6),r(1);var n=t.exports=i.sha256=i.sha256||{};i.md.sha256=i.md.algorithms.sha256=n,n.create=function(){s||(a=String.fromCharCode(128),a+=i.util.fillString(String.fromCharCode(0),64),o=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],s=!0);var t=null,e=i.util.createBuffer(),r=new Array(64),n={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8,start:function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var r=n.messageLengthSize/4,a=0;a<r;++a)n.fullMessageLength.push(0);return e=i.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},n}};return n.start(),n.update=function(a,s){"utf8"===s&&(a=i.util.encodeUtf8(a));var o=a.length;n.messageLength+=o,o=[o/4294967296>>>0,o>>>0];for(var c=n.fullMessageLength.length-1;c>=0;--c)n.fullMessageLength[c]+=o[1],o[1]=o[0]+(n.fullMessageLength[c]/4294967296>>>0),n.fullMessageLength[c]=n.fullMessageLength[c]>>>0,o[0]=o[1]/4294967296>>>0;return e.putBytes(a),u(t,r,e),(e.read>2048||0===e.length())&&e.compact(),n},n.digest=function(){var s=i.util.createBuffer();s.putBytes(e.bytes());var o,c=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize&n.blockLength-1;s.putBytes(a.substr(0,n.blockLength-c));for(var l=8*n.fullMessageLength[0],h=0;h<n.fullMessageLength.length-1;++h)l+=(o=8*n.fullMessageLength[h+1])/4294967296>>>0,s.putInt32(l>>>0),l=o>>>0;s.putInt32(l);var f={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};u(f,r,s);var p=i.util.createBuffer();return p.putInt32(f.h0),p.putInt32(f.h1),p.putInt32(f.h2),p.putInt32(f.h3),p.putInt32(f.h4),p.putInt32(f.h5),p.putInt32(f.h6),p.putInt32(f.h7),p},n};var a=null,s=!1,o=null;function u(t,e,r){for(var i,n,a,s,u,c,l,h,f,p,d,g,y,m=r.length();m>=64;){for(u=0;u<16;++u)e[u]=r.getInt32();for(;u<64;++u)i=((i=e[u-2])>>>17|i<<15)^(i>>>19|i<<13)^i>>>10,n=((n=e[u-15])>>>7|n<<25)^(n>>>18|n<<14)^n>>>3,e[u]=i+e[u-7]+n+e[u-16]|0;for(c=t.h0,l=t.h1,h=t.h2,f=t.h3,p=t.h4,d=t.h5,g=t.h6,y=t.h7,u=0;u<64;++u)a=(c>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10),s=c&l|h&(c^l),i=y+((p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7))+(g^p&(d^g))+o[u]+e[u],y=g,g=d,d=p,p=f+i>>>0,f=h,h=l,l=c,c=i+(n=a+s)>>>0;t.h0=t.h0+c|0,t.h1=t.h1+l|0,t.h2=t.h2+h|0,t.h3=t.h3+f|0,t.h4=t.h4+p|0,t.h5=t.h5+d|0,t.h6=t.h6+g|0,t.h7=t.h7+y|0,m-=64}}},function(t,e,r){(function(e){var i=r(0);r(1);var n=null;!i.util.isNodejs||i.options.usePureJavaScript||e.versions["node-webkit"]||(n=r(43)),(t.exports=i.prng=i.prng||{}).create=function(t){for(var e={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=t.md,a=new Array(32),s=0;s<32;++s)a[s]=r.create();function o(){if(e.pools[0].messageLength>=32)return u();var t=32-e.pools[0].messageLength<<5;e.collect(e.seedFileSync(t)),u()}function u(){e.reseeds=4294967295===e.reseeds?0:e.reseeds+1;var t=e.plugin.md.create();t.update(e.keyBytes);for(var r=1,i=0;i<32;++i)e.reseeds%r==0&&(t.update(e.pools[i].digest().getBytes()),e.pools[i].start()),r<<=1;e.keyBytes=t.digest().getBytes(),t.start(),t.update(e.keyBytes);var n=t.digest().getBytes();e.key=e.plugin.formatKey(e.keyBytes),e.seed=e.plugin.formatSeed(n),e.generated=0}function c(t){var e=null;if("undefined"!=typeof window){var r=window.crypto||window.msCrypto;r&&r.getRandomValues&&(e=function(t){return r.getRandomValues(t)})}var n=i.util.createBuffer();if(e)for(;n.length()<t;){var a=Math.max(1,Math.min(t-n.length(),65536)/4),s=new Uint32Array(Math.floor(a));try{e(s);for(var o=0;o<s.length;++o)n.putInt32(s[o])}catch(t){if(!("undefined"!=typeof QuotaExceededError&&t instanceof QuotaExceededError))throw t}}if(n.length()<t)for(var u,c,l,h=Math.floor(65536*Math.random());n.length()<t;){c=16807*(65535&h),c+=(32767&(u=16807*(h>>16)))<<16,h=4294967295&(c=(2147483647&(c+=u>>15))+(c>>31));for(o=0;o<3;++o)l=h>>>(o<<3),l^=Math.floor(256*Math.random()),n.putByte(String.fromCharCode(255&l))}return n.getBytes(t)}return e.pools=a,e.pool=0,e.generate=function(t,r){if(!r)return e.generateSync(t);var n=e.plugin.cipher,a=e.plugin.increment,s=e.plugin.formatKey,o=e.plugin.formatSeed,c=i.util.createBuffer();e.key=null,function l(h){if(h)return r(h);if(c.length()>=t)return r(null,c.getBytes(t));e.generated>1048575&&(e.key=null);if(null===e.key)return i.util.nextTick(function(){!function(t){if(e.pools[0].messageLength>=32)return u(),t();var r=32-e.pools[0].messageLength<<5;e.seedFile(r,function(r,i){if(r)return t(r);e.collect(i),u(),t()})}(l)});var f=n(e.key,e.seed);e.generated+=f.length;c.putBytes(f);e.key=s(n(e.key,a(e.seed)));e.seed=o(n(e.key,e.seed));i.util.setImmediate(l)}()},e.generateSync=function(t){var r=e.plugin.cipher,n=e.plugin.increment,a=e.plugin.formatKey,s=e.plugin.formatSeed;e.key=null;for(var u=i.util.createBuffer();u.length()<t;){e.generated>1048575&&(e.key=null),null===e.key&&o();var c=r(e.key,e.seed);e.generated+=c.length,u.putBytes(c),e.key=a(r(e.key,n(e.seed))),e.seed=s(r(e.key,e.seed))}return u.getBytes(t)},n?(e.seedFile=function(t,e){n.randomBytes(t,function(t,r){if(t)return e(t);e(null,r.toString())})},e.seedFileSync=function(t){return n.randomBytes(t).toString()}):(e.seedFile=function(t,e){try{e(null,c(t))}catch(t){e(t)}},e.seedFileSync=c),e.collect=function(t){for(var r=t.length,i=0;i<r;++i)e.pools[e.pool].update(t.substr(i,1)),e.pool=31===e.pool?0:e.pool+1},e.collectInt=function(t,r){for(var i="",n=0;n<r;n+=8)i+=String.fromCharCode(t>>n&255);e.collect(i)},e.registerWorker=function(t){if(t===self)e.seedFile=function(t,e){self.addEventListener("message",function t(r){var i=r.data;i.forge&&i.forge.prng&&(self.removeEventListener("message",t),e(i.forge.prng.err,i.forge.prng.bytes))}),self.postMessage({forge:{prng:{needed:t}}})};else{t.addEventListener("message",function(r){var i=r.data;i.forge&&i.forge.prng&&e.seedFile(i.forge.prng.needed,function(e,r){t.postMessage({forge:{prng:{err:e,bytes:r}}})})})}},e}}).call(this,r(7))},function(t,e,r){var i=r(0);r(1);var n=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],a=[1,2,3,5],s=function(t,e){return t<<e&65535|(65535&t)>>16-e},o=function(t,e){return(65535&t)>>e|t<<16-e&65535};t.exports=i.rc2=i.rc2||{},i.rc2.expandKey=function(t,e){"string"==typeof t&&(t=i.util.createBuffer(t)),e=e||128;var r,a=t,s=t.length(),o=e,u=Math.ceil(o/8),c=255>>(7&o);for(r=s;r<128;r++)a.putByte(n[a.at(r-1)+a.at(r-s)&255]);for(a.setAt(128-u,n[a.at(128-u)&c]),r=127-u;r>=0;r--)a.setAt(r,n[a.at(r+1)^a.at(r+u)]);return a};var u=function(t,e,r){var n,u,c,l,h=!1,f=null,p=null,d=null,g=[];for(t=i.rc2.expandKey(t,e),c=0;c<64;c++)g.push(t.getInt16Le());r?(n=function(t){for(c=0;c<4;c++)t[c]+=g[l]+(t[(c+3)%4]&t[(c+2)%4])+(~t[(c+3)%4]&t[(c+1)%4]),t[c]=s(t[c],a[c]),l++},u=function(t){for(c=0;c<4;c++)t[c]+=g[63&t[(c+3)%4]]}):(n=function(t){for(c=3;c>=0;c--)t[c]=o(t[c],a[c]),t[c]-=g[l]+(t[(c+3)%4]&t[(c+2)%4])+(~t[(c+3)%4]&t[(c+1)%4]),l--},u=function(t){for(c=3;c>=0;c--)t[c]-=g[63&t[(c+3)%4]]});var y=function(t){var e=[];for(c=0;c<4;c++){var i=f.getInt16Le();null!==d&&(r?i^=d.getInt16Le():d.putInt16Le(i)),e.push(65535&i)}l=r?0:63;for(var n=0;n<t.length;n++)for(var a=0;a<t[n][0];a++)t[n][1](e);for(c=0;c<4;c++)null!==d&&(r?d.putInt16Le(e[c]):e[c]^=d.getInt16Le()),p.putInt16Le(e[c])},m=null;return m={start:function(t,e){t&&"string"==typeof t&&(t=i.util.createBuffer(t)),h=!1,f=i.util.createBuffer(),p=e||new i.util.createBuffer,d=t,m.output=p},update:function(t){for(h||f.putBuffer(t);f.length()>=8;)y([[5,n],[1,u],[6,n],[1,u],[5,n]])},finish:function(t){var e=!0;if(r)if(t)e=t(8,f,!r);else{var i=8===f.length()?8:8-f.length();f.fillWithByte(i,i)}if(e&&(h=!0,m.update()),!r&&(e=0===f.length()))if(t)e=t(8,p,!r);else{var n=p.length(),a=p.at(n-1);a>n?e=!1:p.truncate(a)}return e}}};i.rc2.startEncrypting=function(t,e,r){var n=i.rc2.createEncryptionCipher(t,128);return n.start(e,r),n},i.rc2.createEncryptionCipher=function(t,e){return u(t,e,!0)},i.rc2.startDecrypting=function(t,e,r){var n=i.rc2.createDecryptionCipher(t,128);return n.start(e,r),n},i.rc2.createDecryptionCipher=function(t,e){return u(t,e,!1)}},function(t,e,r){var i=r(0);r(1),r(4),r(16);var n=t.exports=i.pkcs1=i.pkcs1||{};function a(t,e,r){r||(r=i.md.sha1.create());for(var n="",a=Math.ceil(e/r.digestLength),s=0;s<a;++s){var o=String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,255&s);r.start(),r.update(t+o),n+=r.digest().getBytes()}return n.substring(0,e)}n.encode_rsa_oaep=function(t,e,r){var n,s,o,u;"string"==typeof r?(n=r,s=arguments[3]||void 0,o=arguments[4]||void 0):r&&(n=r.label||void 0,s=r.seed||void 0,o=r.md||void 0,r.mgf1&&r.mgf1.md&&(u=r.mgf1.md)),o?o.start():o=i.md.sha1.create(),u||(u=o);var c=Math.ceil(t.n.bitLength()/8),l=c-2*o.digestLength-2;if(e.length>l)throw(y=new Error("RSAES-OAEP input message length is too long.")).length=e.length,y.maxLength=l,y;n||(n=""),o.update(n,"raw");for(var h=o.digest(),f="",p=l-e.length,d=0;d<p;d++)f+="\0";var g=h.getBytes()+f+""+e;if(s){if(s.length!==o.digestLength){var y;throw(y=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.")).seedLength=s.length,y.digestLength=o.digestLength,y}}else s=i.random.getBytes(o.digestLength);var m=a(s,c-o.digestLength-1,u),v=i.util.xorBytes(g,m,g.length),_=a(v,o.digestLength,u);return"\0"+i.util.xorBytes(s,_,s.length)+v},n.decode_rsa_oaep=function(t,e,r){var n,s,o;"string"==typeof r?(n=r,s=arguments[3]||void 0):r&&(n=r.label||void 0,s=r.md||void 0,r.mgf1&&r.mgf1.md&&(o=r.mgf1.md));var u=Math.ceil(t.n.bitLength()/8);if(e.length!==u)throw(m=new Error("RSAES-OAEP encoded message length is invalid.")).length=e.length,m.expectedLength=u,m;if(void 0===s?s=i.md.sha1.create():s.start(),o||(o=s),u<2*s.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");n||(n=""),s.update(n,"raw");for(var c=s.digest().getBytes(),l=e.charAt(0),h=e.substring(1,s.digestLength+1),f=e.substring(1+s.digestLength),p=a(f,s.digestLength,o),d=a(i.util.xorBytes(h,p,h.length),u-s.digestLength-1,o),g=i.util.xorBytes(f,d,f.length),y=g.substring(0,s.digestLength),m="\0"!==l,v=0;v<s.digestLength;++v)m|=c.charAt(v)!==y.charAt(v);for(var _=1,b=s.digestLength,C=s.digestLength;C<g.length;C++){var E=g.charCodeAt(C);m|=E&(_?65534:0),b+=_&=1&E^1}if(m||1!==g.charCodeAt(b))throw new Error("Invalid RSAES-OAEP padding.");return g.substring(b+1)}},function(t,e,r){var i=r(0);r(1),r(20),r(4),function(){if(i.prime)t.exports=i.prime;else{var e=t.exports=i.prime=i.prime||{},r=i.jsbn.BigInteger,n=[6,4,2,4,2,4,6,2],a=new r(null);a.fromInt(30);var s=function(t,e){return t|e};e.generateProbablePrime=function(t,e,n){"function"==typeof e&&(n=e,e={});var a=(e=e||{}).algorithm||"PRIMEINC";"string"==typeof a&&(a={name:a}),a.options=a.options||{};var s=e.prng||i.random,c={nextBytes:function(t){for(var e=s.getBytesSync(t.length),r=0;r<t.length;++r)t[r]=e.charCodeAt(r)}};if("PRIMEINC"===a.name)return function(t,e,n,a){if("workers"in n)return function(t,e,n,a){if("undefined"==typeof Worker)return o(t,e,n,a);var s=u(t,e),c=n.workers,l=n.workLoad||100,h=30*l/8,f=n.workerScript||"forge/prime.worker.js";if(-1===c)return i.util.estimateCores(function(t,e){t&&(e=2),c=e-1,p()});function p(){c=Math.max(1,c);for(var i=[],n=0;n<c;++n)i[n]=new Worker(f);for(var n=0;n<c;++n)i[n].addEventListener("message",p);var o=!1;function p(n){if(!o){0;var c=n.data;if(c.found){for(var f=0;f<i.length;++f)i[f].terminate();return o=!0,a(null,new r(c.prime,16))}s.bitLength()>t&&(s=u(t,e));var p=s.toString(16);n.target.postMessage({hex:p,workLoad:l}),s.dAddOffset(h,0)}}}p()}(t,e,n,a);return o(t,e,n,a)}(t,c,a.options,n);throw new Error("Invalid prime generation algorithm: "+a.name)}}function o(t,e,r,a){var s=u(t,e),o=function(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}(s.bitLength());"millerRabinTests"in r&&(o=r.millerRabinTests);var c=10;"maxBlockTime"in r&&(c=r.maxBlockTime),function t(e,r,a,s,o,c,l){var h=+new Date;do{if(e.bitLength()>r&&(e=u(r,a)),e.isProbablePrime(o))return l(null,e);e.dAddOffset(n[s++%8],0)}while(c<0||+new Date-h<c);i.util.setImmediate(function(){t(e,r,a,s,o,c,l)})}(s,t,e,0,o,c,a)}function u(t,e){var i=new r(t,e),n=t-1;return i.testBit(n)||i.bitwiseTo(r.ONE.shiftLeft(n),s,i),i.dAddOffset(31-i.mod(a).byteValue(),0),i}}()},function(t,e,r){var i=r(0);r(5),r(15),r(10),r(50),r(42),r(4),r(19),r(16),r(1),r(30);var n=i.asn1,a=i.pki,s=t.exports=i.pkcs12=i.pkcs12||{},o={name:"ContentInfo",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:n.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},u={name:"PFX",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:"version"},o,{name:"PFX.macData",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:n.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:n.Class.UNIVERSAL,type:n.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:n.Class.UNIVERSAL,type:n.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},c={name:"SafeBag",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:n.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:n.Class.UNIVERSAL,type:n.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},l={name:"Attribute",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:n.Class.UNIVERSAL,type:n.Type.SET,constructed:!0,capture:"values"}]},h={name:"CertBag",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:n.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:n.Class.UNIVERSAL,type:n.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function f(t,e,r,i){for(var n=[],a=0;a<t.length;a++)for(var s=0;s<t[a].safeBags.length;s++){var o=t[a].safeBags[s];void 0!==i&&o.type!==i||(null!==e?void 0!==o.attributes[e]&&o.attributes[e].indexOf(r)>=0&&n.push(o):n.push(o))}return n}function p(t){if(t.composed||t.constructed){for(var e=i.util.createBuffer(),r=0;r<t.value.length;++r)e.putBytes(t.value[r].value);t.composed=t.constructed=!1,t.value=e.getBytes()}return t}function d(t,e){var r={},s=[];if(!n.validate(t,i.pkcs7.asn1.encryptedDataValidator,r,s))throw(o=new Error("Cannot read EncryptedContentInfo.")).errors=s,o;var o,u=n.derToOid(r.contentType);if(u!==a.oids.data)throw(o=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.")).oid=u,o;u=n.derToOid(r.encAlgorithm);var c=a.pbe.getCipher(u,r.encParameter,e),l=p(r.encryptedContentAsn1),h=i.util.createBuffer(l.value);if(c.update(h),!c.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return c.output.getBytes()}function g(t,e,r){if(!e&&0===t.length)return[];if((t=n.fromDer(t,e)).tagClass!==n.Class.UNIVERSAL||t.type!==n.Type.SEQUENCE||!0!==t.constructed)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var i=[],s=0;s<t.value.length;s++){var o=t.value[s],u={},l=[];if(!n.validate(o,c,u,l))throw(m=new Error("Cannot read SafeBag.")).errors=l,m;var f,p,d={type:n.derToOid(u.bagId),attributes:y(u.bagAttributes)};i.push(d);var g=u.bagValue.value[0];switch(d.type){case a.oids.pkcs8ShroudedKeyBag:if(null===(g=a.decryptPrivateKeyInfo(g,r)))throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case a.oids.keyBag:try{d.key=a.privateKeyFromAsn1(g)}catch(t){d.key=null,d.asn1=g}continue;case a.oids.certBag:f=h,p=function(){if(n.derToOid(u.certId)!==a.oids.x509Certificate){var t=new Error("Unsupported certificate type, only X.509 supported.");throw t.oid=n.derToOid(u.certId),t}var r=n.fromDer(u.cert,e);try{d.cert=a.certificateFromAsn1(r,!0)}catch(t){d.cert=null,d.asn1=r}};break;default:var m;throw(m=new Error("Unsupported PKCS#12 SafeBag type.")).oid=d.type,m}if(void 0!==f&&!n.validate(g,f,u,l))throw(m=new Error("Cannot read PKCS#12 "+f.name)).errors=l,m;p()}return i}function y(t){var e={};if(void 0!==t)for(var r=0;r<t.length;++r){var i={},s=[];if(!n.validate(t[r],l,i,s)){var o=new Error("Cannot read PKCS#12 BagAttribute.");throw o.errors=s,o}var u=n.derToOid(i.oid);if(void 0!==a.oids[u]){e[a.oids[u]]=[];for(var c=0;c<i.values.length;++c)e[a.oids[u]].push(i.values[c].value)}}return e}s.pkcs12FromAsn1=function(t,e,r){"string"==typeof e?(r=e,e=!0):void 0===e&&(e=!0);var c={};if(!n.validate(t,u,c,[]))throw(l=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.")).errors=l,l;var l,h={version:c.version.charCodeAt(0),safeContents:[],getBags:function(t){var e,r={};return"localKeyId"in t?e=t.localKeyId:"localKeyIdHex"in t&&(e=i.util.hexToBytes(t.localKeyIdHex)),void 0===e&&!("friendlyName"in t)&&"bagType"in t&&(r[t.bagType]=f(h.safeContents,null,null,t.bagType)),void 0!==e&&(r.localKeyId=f(h.safeContents,"localKeyId",e,t.bagType)),"friendlyName"in t&&(r.friendlyName=f(h.safeContents,"friendlyName",t.friendlyName,t.bagType)),r},getBagsByFriendlyName:function(t,e){return f(h.safeContents,"friendlyName",t,e)},getBagsByLocalKeyId:function(t,e){return f(h.safeContents,"localKeyId",t,e)}};if(3!==c.version.charCodeAt(0))throw(l=new Error("PKCS#12 PFX of version other than 3 not supported.")).version=c.version.charCodeAt(0),l;if(n.derToOid(c.contentType)!==a.oids.data)throw(l=new Error("Only PKCS#12 PFX in password integrity mode supported.")).oid=n.derToOid(c.contentType),l;var y=c.content.value[0];if(y.tagClass!==n.Class.UNIVERSAL||y.type!==n.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(y=p(y),c.mac){var m=null,v=0,_=n.derToOid(c.macAlgorithm);switch(_){case a.oids.sha1:m=i.md.sha1.create(),v=20;break;case a.oids.sha256:m=i.md.sha256.create(),v=32;break;case a.oids.sha384:m=i.md.sha384.create(),v=48;break;case a.oids.sha512:m=i.md.sha512.create(),v=64;break;case a.oids.md5:m=i.md.md5.create(),v=16}if(null===m)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+_);var b=new i.util.ByteBuffer(c.macSalt),C="macIterations"in c?parseInt(i.util.bytesToHex(c.macIterations),16):1,E=s.generateKey(r,b,3,C,v,m),S=i.hmac.create();if(S.start(m,E),S.update(y.value),S.getMac().getBytes()!==c.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return function(t,e,r,i){if((e=n.fromDer(e,r)).tagClass!==n.Class.UNIVERSAL||e.type!==n.Type.SEQUENCE||!0!==e.constructed)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var s=0;s<e.value.length;s++){var u=e.value[s],c={},l=[];if(!n.validate(u,o,c,l)){var h=new Error("Cannot read ContentInfo.");throw h.errors=l,h}var f={encrypted:!1},y=null,m=c.content.value[0];switch(n.derToOid(c.contentType)){case a.oids.data:if(m.tagClass!==n.Class.UNIVERSAL||m.type!==n.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");y=p(m).value;break;case a.oids.encryptedData:y=d(m,i),f.encrypted=!0;break;default:var h=new Error("Unsupported PKCS#12 contentType.");throw h.contentType=n.derToOid(c.contentType),h}f.safeBags=g(y,r,i),t.safeContents.push(f)}}(h,y.value,e,r),h},s.toPkcs12Asn1=function(t,e,r,o){(o=o||{}).saltSize=o.saltSize||8,o.count=o.count||2048,o.algorithm=o.algorithm||o.encAlgorithm||"aes128","useMac"in o||(o.useMac=!0),"localKeyId"in o||(o.localKeyId=null),"generateLocalKeyId"in o||(o.generateLocalKeyId=!0);var u,c=o.localKeyId;if(null!==c)c=i.util.hexToBytes(c);else if(o.generateLocalKeyId)if(e){var l=i.util.isArray(e)?e[0]:e;"string"==typeof l&&(l=a.certificateFromPem(l)),(k=i.md.sha1.create()).update(n.toDer(a.certificateToAsn1(l)).getBytes()),c=k.digest().getBytes()}else c=i.random.getBytes(20);var h=[];null!==c&&h.push(n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(a.oids.localKeyId).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.SET,!0,[n.create(n.Class.UNIVERSAL,n.Type.OCTETSTRING,!1,c)])])),"friendlyName"in o&&h.push(n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(a.oids.friendlyName).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.SET,!0,[n.create(n.Class.UNIVERSAL,n.Type.BMPSTRING,!1,o.friendlyName)])])),h.length>0&&(u=n.create(n.Class.UNIVERSAL,n.Type.SET,!0,h));var f=[],p=[];null!==e&&(p=i.util.isArray(e)?e:[e]);for(var d=[],g=0;g<p.length;++g){"string"==typeof(e=p[g])&&(e=a.certificateFromPem(e));var y=0===g?u:void 0,m=a.certificateToAsn1(e),v=n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(a.oids.certBag).getBytes()),n.create(n.Class.CONTEXT_SPECIFIC,0,!0,[n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(a.oids.x509Certificate).getBytes()),n.create(n.Class.CONTEXT_SPECIFIC,0,!0,[n.create(n.Class.UNIVERSAL,n.Type.OCTETSTRING,!1,n.toDer(m).getBytes())])])]),y]);d.push(v)}if(d.length>0){var _=n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,d),b=n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(a.oids.data).getBytes()),n.create(n.Class.CONTEXT_SPECIFIC,0,!0,[n.create(n.Class.UNIVERSAL,n.Type.OCTETSTRING,!1,n.toDer(_).getBytes())])]);f.push(b)}var C=null;if(null!==t){var E=a.wrapRsaPrivateKey(a.privateKeyToAsn1(t));C=null===r?n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(a.oids.keyBag).getBytes()),n.create(n.Class.CONTEXT_SPECIFIC,0,!0,[E]),u]):n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(a.oids.pkcs8ShroudedKeyBag).getBytes()),n.create(n.Class.CONTEXT_SPECIFIC,0,!0,[a.encryptPrivateKeyInfo(E,r,o)]),u]);var S=n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[C]),w=n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(a.oids.data).getBytes()),n.create(n.Class.CONTEXT_SPECIFIC,0,!0,[n.create(n.Class.UNIVERSAL,n.Type.OCTETSTRING,!1,n.toDer(S).getBytes())])]);f.push(w)}var A,T=n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,f);if(o.useMac){var k=i.md.sha1.create(),I=new i.util.ByteBuffer(i.random.getBytes(o.saltSize)),B=o.count,R=(t=s.generateKey(r,I,3,B,20),i.hmac.create());R.start(k,t),R.update(n.toDer(T).getBytes());var N=R.getMac();A=n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(a.oids.sha1).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.NULL,!1,"")]),n.create(n.Class.UNIVERSAL,n.Type.OCTETSTRING,!1,N.getBytes())]),n.create(n.Class.UNIVERSAL,n.Type.OCTETSTRING,!1,I.getBytes()),n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,n.integerToDer(B).getBytes())])}return n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,n.integerToDer(3).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(a.oids.data).getBytes()),n.create(n.Class.CONTEXT_SPECIFIC,0,!0,[n.create(n.Class.UNIVERSAL,n.Type.OCTETSTRING,!1,n.toDer(T).getBytes())])]),A])},s.generateKey=i.pbe.generatePkcs12Key},function(t,e,r){var i=r(0);r(5),r(1);var n=i.asn1,a=t.exports=i.pkcs7asn1=i.pkcs7asn1||{};i.pkcs7=i.pkcs7||{},i.pkcs7.asn1=a;var s={name:"ContentInfo",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:n.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};a.contentInfoValidator=s;var o={name:"EncryptedContentInfo",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:n.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:n.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};a.envelopedDataValidator={name:"EnvelopedData",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:n.Class.UNIVERSAL,type:n.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(o)},a.encryptedDataValidator={name:"EncryptedData",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:"version"}].concat(o)};var u={name:"SignerInfo",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:n.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:n.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:n.Class.UNIVERSAL,type:n.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:n.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};a.signedDataValidator={name:"SignedData",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:n.Class.UNIVERSAL,type:n.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},s,{name:"SignedData.Certificates",tagClass:n.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:n.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:n.Class.UNIVERSAL,type:n.Type.SET,capture:"signerInfos",optional:!0,value:[u]}]},a.recipientInfoValidator={name:"RecipientInfo",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:n.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter"}]},{name:"RecipientInfo.encryptedKey",tagClass:n.Class.UNIVERSAL,type:n.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}},function(t,e,r){var i=r(0);r(1),i.mgf=i.mgf||{},(t.exports=i.mgf.mgf1=i.mgf1=i.mgf1||{}).create=function(t){return{generate:function(e,r){for(var n=new i.util.ByteBuffer,a=Math.ceil(r/t.digestLength),s=0;s<a;s++){var o=new i.util.ByteBuffer;o.putInt32(s),t.start(),t.update(e+o.getBytes()),n.putBuffer(t.digest())}return n.truncate(n.length()-r),n.getBytes()}}}},function(t,e,r){var i=r(0);t.exports=i.debug=i.debug||{},i.debug.storage={},i.debug.get=function(t,e){var r;return void 0===t?r=i.debug.storage:t in i.debug.storage&&(r=void 0===e?i.debug.storage[t]:i.debug.storage[t][e]),r},i.debug.set=function(t,e,r){t in i.debug.storage||(i.debug.storage[t]={}),i.debug.storage[t][e]=r},i.debug.clear=function(t,e){void 0===t?i.debug.storage={}:t in i.debug.storage&&(void 0===e?delete i.debug.storage[t]:delete i.debug.storage[t][e])}},function(t,e,r){var i=r(0);r(6),r(1);var n=t.exports=i.sha512=i.sha512||{};i.md.sha512=i.md.algorithms.sha512=n;var a=i.sha384=i.sha512.sha384=i.sha512.sha384||{};a.create=function(){return n.create("SHA-384")},i.md.sha384=i.md.algorithms.sha384=a,i.sha512.sha256=i.sha512.sha256||{create:function(){return n.create("SHA-512/256")}},i.md["sha512/256"]=i.md.algorithms["sha512/256"]=i.sha512.sha256,i.sha512.sha224=i.sha512.sha224||{create:function(){return n.create("SHA-512/224")}},i.md["sha512/224"]=i.md.algorithms["sha512/224"]=i.sha512.sha224,n.create=function(t){if(o||(s=String.fromCharCode(128),s+=i.util.fillString(String.fromCharCode(0),128),u=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],(c={})["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],c["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],c["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],c["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],o=!0),void 0===t&&(t="SHA-512"),!(t in c))throw new Error("Invalid SHA-512 algorithm: "+t);for(var e=c[t],r=null,n=i.util.createBuffer(),a=new Array(80),h=0;h<80;++h)a[h]=new Array(2);var f=64;switch(t){case"SHA-384":f=48;break;case"SHA-512/256":f=32;break;case"SHA-512/224":f=28}var p={algorithm:t.replace("-","").toLowerCase(),blockLength:128,digestLength:f,messageLength:0,fullMessageLength:null,messageLengthSize:16,start:function(){p.messageLength=0,p.fullMessageLength=p.messageLength128=[];for(var t=p.messageLengthSize/4,a=0;a<t;++a)p.fullMessageLength.push(0);n=i.util.createBuffer(),r=new Array(e.length);for(a=0;a<e.length;++a)r[a]=e[a].slice(0);return p}};return p.start(),p.update=function(t,e){"utf8"===e&&(t=i.util.encodeUtf8(t));var s=t.length;p.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var o=p.fullMessageLength.length-1;o>=0;--o)p.fullMessageLength[o]+=s[1],s[1]=s[0]+(p.fullMessageLength[o]/4294967296>>>0),p.fullMessageLength[o]=p.fullMessageLength[o]>>>0,s[0]=s[1]/4294967296>>>0;return n.putBytes(t),l(r,a,n),(n.read>2048||0===n.length())&&n.compact(),p},p.digest=function(){var e=i.util.createBuffer();e.putBytes(n.bytes());var o,u=p.fullMessageLength[p.fullMessageLength.length-1]+p.messageLengthSize&p.blockLength-1;e.putBytes(s.substr(0,p.blockLength-u));for(var c=8*p.fullMessageLength[0],h=0;h<p.fullMessageLength.length-1;++h)c+=(o=8*p.fullMessageLength[h+1])/4294967296>>>0,e.putInt32(c>>>0),c=o>>>0;e.putInt32(c);var f=new Array(r.length);for(h=0;h<r.length;++h)f[h]=r[h].slice(0);l(f,a,e);var d,g=i.util.createBuffer();d="SHA-512"===t?f.length:"SHA-384"===t?f.length-2:f.length-4;for(h=0;h<d;++h)g.putInt32(f[h][0]),h===d-1&&"SHA-512/224"===t||g.putInt32(f[h][1]);return g},p};var s=null,o=!1,u=null,c=null;function l(t,e,r){for(var i,n,a,s,o,c,l,h,f,p,d,g,y,m,v,_,b,C,E,S,w,A,T,k,I,B,R,N,U,L,P,D,x,O=r.length();O>=128;){for(R=0;R<16;++R)e[R][0]=r.getInt32()>>>0,e[R][1]=r.getInt32()>>>0;for(;R<80;++R)i=(((N=(L=e[R-2])[0])>>>19|(U=L[1])<<13)^(U>>>29|N<<3)^N>>>6)>>>0,n=((N<<13|U>>>19)^(U<<3|N>>>29)^(N<<26|U>>>6))>>>0,a=(((N=(D=e[R-15])[0])>>>1|(U=D[1])<<31)^(N>>>8|U<<24)^N>>>7)>>>0,s=((N<<31|U>>>1)^(N<<24|U>>>8)^(N<<25|U>>>7))>>>0,P=e[R-7],x=e[R-16],U=n+P[1]+s+x[1],e[R][0]=i+P[0]+a+x[0]+(U/4294967296>>>0)>>>0,e[R][1]=U>>>0;for(d=t[0][0],g=t[0][1],y=t[1][0],m=t[1][1],v=t[2][0],_=t[2][1],b=t[3][0],C=t[3][1],E=t[4][0],S=t[4][1],w=t[5][0],A=t[5][1],T=t[6][0],k=t[6][1],I=t[7][0],B=t[7][1],R=0;R<80;++R)l=((E>>>14|S<<18)^(E>>>18|S<<14)^(S>>>9|E<<23))>>>0,h=(T^E&(w^T))>>>0,o=((d>>>28|g<<4)^(g>>>2|d<<30)^(g>>>7|d<<25))>>>0,c=((d<<4|g>>>28)^(g<<30|d>>>2)^(g<<25|d>>>7))>>>0,f=(d&y|v&(d^y))>>>0,p=(g&m|_&(g^m))>>>0,U=B+(((E<<18|S>>>14)^(E<<14|S>>>18)^(S<<23|E>>>9))>>>0)+((k^S&(A^k))>>>0)+u[R][1]+e[R][1],i=I+l+h+u[R][0]+e[R][0]+(U/4294967296>>>0)>>>0,n=U>>>0,a=o+f+((U=c+p)/4294967296>>>0)>>>0,s=U>>>0,I=T,B=k,T=w,k=A,w=E,A=S,E=b+i+((U=C+n)/4294967296>>>0)>>>0,S=U>>>0,b=v,C=_,v=y,_=m,y=d,m=g,d=i+a+((U=n+s)/4294967296>>>0)>>>0,g=U>>>0;U=t[0][1]+g,t[0][0]=t[0][0]+d+(U/4294967296>>>0)>>>0,t[0][1]=U>>>0,U=t[1][1]+m,t[1][0]=t[1][0]+y+(U/4294967296>>>0)>>>0,t[1][1]=U>>>0,U=t[2][1]+_,t[2][0]=t[2][0]+v+(U/4294967296>>>0)>>>0,t[2][1]=U>>>0,U=t[3][1]+C,t[3][0]=t[3][0]+b+(U/4294967296>>>0)>>>0,t[3][1]=U>>>0,U=t[4][1]+S,t[4][0]=t[4][0]+E+(U/4294967296>>>0)>>>0,t[4][1]=U>>>0,U=t[5][1]+A,t[5][0]=t[5][0]+w+(U/4294967296>>>0)>>>0,t[5][1]=U>>>0,U=t[6][1]+k,t[6][0]=t[6][0]+T+(U/4294967296>>>0)>>>0,t[6][1]=U>>>0,U=t[7][1]+B,t[7][0]=t[7][0]+I+(U/4294967296>>>0)>>>0,t[7][1]=U>>>0,O-=128}}},function(t,e,r){var i=r(0);r(1),t.exports=i.log=i.log||{},i.log.levels=["none","error","warning","info","debug","verbose","max"];var n={},a=[],s=null;i.log.LEVEL_LOCKED=2,i.log.NO_LEVEL_CHECK=4,i.log.INTERPOLATE=8;for(var o=0;o<i.log.levels.length;++o){var u=i.log.levels[o];n[u]={index:o,name:u.toUpperCase()}}i.log.logMessage=function(t){for(var e=n[t.level].index,r=0;r<a.length;++r){var s=a[r];if(s.flags&i.log.NO_LEVEL_CHECK)s.f(t);else e<=n[s.level].index&&s.f(s,t)}},i.log.prepareStandard=function(t){"standard"in t||(t.standard=n[t.level].name+" ["+t.category+"] "+t.message)},i.log.prepareFull=function(t){if(!("full"in t)){var e=[t.message];e=e.concat([]||t.arguments),t.full=i.util.format.apply(this,e)}},i.log.prepareStandardFull=function(t){"standardFull"in t||(i.log.prepareStandard(t),t.standardFull=t.standard)};var c=["error","warning","info","debug","verbose"];for(o=0;o<c.length;++o)!function(t){i.log[t]=function(e,r){var n=Array.prototype.slice.call(arguments).slice(2),a={timestamp:new Date,level:t,category:e,message:r,arguments:n};i.log.logMessage(a)}}(c[o]);if(i.log.makeLogger=function(t){var e={flags:0,f:t};return i.log.setLevel(e,"none"),e},i.log.setLevel=function(t,e){var r=!1;if(t&&!(t.flags&i.log.LEVEL_LOCKED))for(var n=0;n<i.log.levels.length;++n){if(e==i.log.levels[n]){t.level=e,r=!0;break}}return r},i.log.lock=function(t,e){void 0===e||e?t.flags|=i.log.LEVEL_LOCKED:t.flags&=~i.log.LEVEL_LOCKED},i.log.addLogger=function(t){a.push(t)},"undefined"!=typeof console&&"log"in console){var l;if(console.error&&console.warn&&console.info&&console.debug){var h={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},f=function(t,e){i.log.prepareStandard(e);var r=h[e.level],n=[e.standard];n=n.concat(e.arguments.slice()),r.apply(console,n)};l=i.log.makeLogger(f)}else{f=function(t,e){i.log.prepareStandardFull(e),console.log(e.standardFull)};l=i.log.makeLogger(f)}i.log.setLevel(l,"debug"),i.log.addLogger(l),s=l}else console={log:function(){}};if(null!==s){var p=i.util.getQueryVariables();if("console.level"in p&&i.log.setLevel(s,p["console.level"].slice(-1)[0]),"console.lock"in p)"true"==p["console.lock"].slice(-1)[0]&&i.log.lock(s)}i.log.consoleLogger=s},function(t,e,r){(function(e){var i=r(56).Transform,n=r(62).inherits,a=r(32),s=a.utils,o=s.bindings,u=r(33),c=a.STATES,l=a.SIZES;function h(t){if(!(this instanceof h))return new h(t);i.call(this,t),this.options=t||{},this.binding=this.options.useJS?u:o,this.buffer=null,this.pos=0,this.descriptor=null,this.state=c.MAGIC,this.notEnoughData=!1,this.descriptorStart=0,this.streamSize=null,this.dictId=null,this.currentStreamChecksum=null,this.dataBlockSize=0,this.skippableSize=0}n(h,i),h.prototype._transform=function(t,r,i){if(this.skippableSize>0){if(this.skippableSize-=t.length,this.skippableSize>0)return void i();t=t.slice(-this.skippableSize),this.skippableSize=0,this.state=c.MAGIC}this.buffer=this.buffer?e.concat([this.buffer,t],this.buffer.length+t.length):t,this._main(i)},h.prototype.emit_Error=function(t){this.emit("error",new Error(t+" @"+this.pos))},h.prototype.check_Size=function(t){var e=this.buffer.length-this.pos;return e<=0||e<t?(this.notEnoughData&&this.emit_Error("Unexpected end of LZ4 stream"),!0):(this.pos+=t,!1)},h.prototype.read_MagicNumber=function(){var t=this.pos;if(this.check_Size(l.MAGIC))return!0;var e=s.readInt32LE(this.buffer,t);if((4294967280&e)!==a.MAGICNUMBER_SKIPPABLE)return e!==a.MAGICNUMBER?(this.pos=t,this.emit_Error("Invalid magic number: "+e.toString(16).toUpperCase()),!0):void(this.state=c.DESCRIPTOR);this.state=c.SKIP_SIZE},h.prototype.read_SkippableSize=function(){var t=this.pos;if(this.check_Size(l.SKIP_SIZE))return!0;this.state=c.SKIP_DATA,this.skippableSize=s.readInt32LE(this.buffer,t)},h.prototype.read_Descriptor=function(){var t=this.pos;if(this.check_Size(l.DESCRIPTOR))return!0;this.descriptorStart=t;var e=this.buffer[t],r=e>>6;if(r!==a.VERSION)return this.pos=t,this.emit_Error("Invalid version: "+r+" != "+a.VERSION),!0;if(e>>1&1)return this.pos=t,this.emit_Error("Reserved bit set"),!0;var i=this.buffer[t+1]>>4&7,n=a.blockMaxSizes[i];if(null===n)return this.pos=t,this.emit_Error("Invalid block max size: "+i),!0;this.descriptor={blockIndependence:Boolean(e>>5&1),blockChecksum:Boolean(e>>4&1),blockMaxSize:n,streamSize:Boolean(e>>3&1),streamChecksum:Boolean(e>>2&1),dict:Boolean(1&e),dictId:0},this.state=c.SIZE},h.prototype.read_Size=function(){if(this.descriptor.streamSize){var t=this.pos;if(this.check_Size(l.SIZE))return!0;this.streamSize=this.buffer.slice(t,t+8)}this.state=c.DICTID},h.prototype.read_DictId=function(){if(this.descriptor.dictId){var t=this.pos;if(this.check_Size(l.DICTID))return!0;this.dictId=s.readInt32LE(this.buffer,t)}this.state=c.DESCRIPTOR_CHECKSUM},h.prototype.read_DescriptorChecksum=function(){var t=this.pos;if(this.check_Size(l.DESCRIPTOR_CHECKSUM))return!0;var e=this.buffer[t];if(s.descriptorChecksum(this.buffer.slice(this.descriptorStart,t))!==e)return this.pos=t,this.emit_Error("Invalid stream descriptor checksum"),!0;this.state=c.DATABLOCK_SIZE},h.prototype.read_DataBlockSize=function(){var t=this.pos;if(this.check_Size(l.DATABLOCK_SIZE))return!0;var e=s.readInt32LE(this.buffer,t);e!==a.EOS?(this.dataBlockSize=e,this.state=c.DATABLOCK_DATA):this.state=c.EOS},h.prototype.read_DataBlockData=function(){var t=this.pos,e=this.dataBlockSize;if(2147483648&e&&(e&=2147483647),this.check_Size(e))return!0;this.dataBlock=this.buffer.slice(t,t+e),this.state=c.DATABLOCK_CHECKSUM},h.prototype.read_DataBlockChecksum=function(){var t=this.pos;if(this.descriptor.blockChecksum){if(this.check_Size(l.DATABLOCK_CHECKSUM))return!0;var e=s.readInt32LE(this.buffer,this.pos-4);if(s.blockChecksum(this.dataBlock)!==e)return this.pos=t,this.emit_Error("Invalid block checksum"),!0}this.state=c.DATABLOCK_UNCOMPRESS},h.prototype.uncompress_DataBlock=function(){var t;if(2147483648&this.dataBlockSize)t=this.dataBlock;else{t=new e(this.descriptor.blockMaxSize);var r=this.binding.uncompress(this.dataBlock,t);if(r<0)return this.emit_Error("Invalid data block: "+-r),!0;r<this.descriptor.blockMaxSize&&(t=t.slice(0,r))}this.dataBlock=null,this.push(t),this.descriptor.streamChecksum&&(this.currentStreamChecksum=s.streamChecksum(t,this.currentStreamChecksum)),this.state=c.DATABLOCK_SIZE},h.prototype.read_EOS=function(){if(this.descriptor.streamChecksum){var t=this.pos;if(this.check_Size(l.EOS))return!0;var e=s.readInt32LE(this.buffer,t);if(e!==s.streamChecksum(null,this.currentStreamChecksum))return this.pos=t,this.emit_Error("Invalid stream checksum: "+e.toString(16).toUpperCase()),!0}this.state=c.MAGIC},h.prototype._flush=function(t){this.notEnoughData=!0,this._main(t)},h.prototype._main=function(t){for(var e,r=this.pos;!e&&this.pos<this.buffer.length;)this.state===c.MAGIC&&(e=this.read_MagicNumber()),this.state===c.SKIP_SIZE&&(e=this.read_SkippableSize()),this.state===c.DESCRIPTOR&&(e=this.read_Descriptor()),this.state===c.SIZE&&(e=this.read_Size()),this.state===c.DICTID&&(e=this.read_DictId()),this.state===c.DESCRIPTOR_CHECKSUM&&(e=this.read_DescriptorChecksum()),this.state===c.DATABLOCK_SIZE&&(e=this.read_DataBlockSize()),this.state===c.DATABLOCK_DATA&&(e=this.read_DataBlockData()),this.state===c.DATABLOCK_CHECKSUM&&(e=this.read_DataBlockChecksum()),this.state===c.DATABLOCK_UNCOMPRESS&&(e=this.uncompress_DataBlock()),this.state===c.EOS&&(e=this.read_EOS());this.pos>r&&(this.buffer=this.buffer.slice(this.pos),this.pos=0),t()},t.exports=h}).call(this,r(3).Buffer)},function(t,e,r){t.exports=n;var i=r(34).EventEmitter;function n(){i.call(this)}r(11)(n,i),n.Readable=r(35),n.Writable=r(96),n.Duplex=r(97),n.Transform=r(98),n.PassThrough=r(99),n.Stream=n,n.prototype.pipe=function(t,e){var r=this;function n(e){t.writable&&!1===t.write(e)&&r.pause&&r.pause()}function a(){r.readable&&r.resume&&r.resume()}r.on("data",n),t.on("drain",a),t._isStdio||e&&!1===e.end||(r.on("end",o),r.on("close",u));var s=!1;function o(){s||(s=!0,t.end())}function u(){s||(s=!0,"function"==typeof t.destroy&&t.destroy())}function c(t){if(l(),0===i.listenerCount(this,"error"))throw t}function l(){r.removeListener("data",n),t.removeListener("drain",a),r.removeListener("end",o),r.removeListener("close",u),r.removeListener("error",c),t.removeListener("error",c),r.removeListener("end",l),r.removeListener("close",l),t.removeListener("close",l)}return r.on("error",c),t.on("error",c),r.on("end",l),r.on("close",l),t.on("close",l),t.emit("pipe",r),t}},function(t,e,r){"use strict";(function(e,i){var n=r(21);t.exports=_;var a,s=r(38);_.ReadableState=v;r(34).EventEmitter;var o=function(t,e){return t.listeners(e).length},u=r(58),c=r(22).Buffer,l=e.Uint8Array||function(){};var h=r(17);h.inherits=r(11);var f=r(91),p=void 0;p=f&&f.debuglog?f.debuglog("stream"):function(){};var d,g=r(92),y=r(59);h.inherits(_,u);var m=["error","close","destroy","pause","resume"];function v(t,e){a=a||r(12),t=t||{};var i=e instanceof a;this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var n=t.highWaterMark,s=t.readableHighWaterMark,o=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:i&&(s||0===s)?s:o,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(d||(d=r(60).StringDecoder),this.decoder=new d(t.encoding),this.encoding=t.encoding)}function _(t){if(a=a||r(12),!(this instanceof _))return new _(t);this._readableState=new v(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),u.call(this)}function b(t,e,r,i,n){var a,s=t._readableState;null===e?(s.reading=!1,function(t,e){if(e.ended)return;if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,w(t)}(t,s)):(n||(a=function(t,e){var r;(function(t){return c.isBuffer(t)||t instanceof l})(e)||"string"==typeof e||void 0===e||t.objectMode||(r=new TypeError("Invalid non-string/buffer chunk"));return r}(s,e)),a?t.emit("error",a):s.objectMode||e&&e.length>0?("string"==typeof e||s.objectMode||Object.getPrototypeOf(e)===c.prototype||(e=function(t){return c.from(t)}(e)),i?s.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):C(t,s,e,!0):s.ended?t.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!r?(e=s.decoder.write(e),s.objectMode||0!==e.length?C(t,s,e,!1):T(t,s)):C(t,s,e,!1))):i||(s.reading=!1));return function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(s)}function C(t,e,r,i){e.flowing&&0===e.length&&!e.sync?(t.emit("data",r),t.read(0)):(e.length+=e.objectMode?1:r.length,i?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&w(t)),T(t,e)}Object.defineProperty(_.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),_.prototype.destroy=y.destroy,_.prototype._undestroy=y.undestroy,_.prototype._destroy=function(t,e){this.push(null),e(t)},_.prototype.push=function(t,e){var r,i=this._readableState;return i.objectMode?r=!0:"string"==typeof t&&((e=e||i.defaultEncoding)!==i.encoding&&(t=c.from(t,e),e=""),r=!0),b(this,t,e,!1,r)},_.prototype.unshift=function(t){return b(this,t,null,!0,!1)},_.prototype.isPaused=function(){return!1===this._readableState.flowing},_.prototype.setEncoding=function(t){return d||(d=r(60).StringDecoder),this._readableState.decoder=new d(t),this._readableState.encoding=t,this};var E=8388608;function S(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=E?t=E:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function w(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(p("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?n.nextTick(A,t):A(t))}function A(t){p("emit readable"),t.emit("readable"),R(t)}function T(t,e){e.readingMore||(e.readingMore=!0,n.nextTick(k,t,e))}function k(t,e){for(var r=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(p("maybeReadMore read 0"),t.read(0),r!==e.length);)r=e.length;e.readingMore=!1}function I(t){p("readable nexttick read 0"),t.read(0)}function B(t,e){e.reading||(p("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),R(t),e.flowing&&!e.reading&&t.read(0)}function R(t){var e=t._readableState;for(p("flow",e.flowing);e.flowing&&null!==t.read(););}function N(t,e){return 0===e.length?null:(e.objectMode?r=e.buffer.shift():!t||t>=e.length?(r=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):r=function(t,e,r){var i;t<e.head.data.length?(i=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):i=t===e.head.data.length?e.shift():r?function(t,e){var r=e.head,i=1,n=r.data;t-=n.length;for(;r=r.next;){var a=r.data,s=t>a.length?a.length:t;if(s===a.length?n+=a:n+=a.slice(0,t),0===(t-=s)){s===a.length?(++i,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=a.slice(s));break}++i}return e.length-=i,n}(t,e):function(t,e){var r=c.allocUnsafe(t),i=e.head,n=1;i.data.copy(r),t-=i.data.length;for(;i=i.next;){var a=i.data,s=t>a.length?a.length:t;if(a.copy(r,r.length-t,0,s),0===(t-=s)){s===a.length?(++n,i.next?e.head=i.next:e.head=e.tail=null):(e.head=i,i.data=a.slice(s));break}++n}return e.length-=n,r}(t,e);return i}(t,e.buffer,e.decoder),r);var r}function U(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,n.nextTick(L,e,t))}function L(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function P(t,e){for(var r=0,i=t.length;r<i;r++)if(t[r]===e)return r;return-1}_.prototype.read=function(t){p("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return p("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?U(this):w(this),null;if(0===(t=S(t,e))&&e.ended)return 0===e.length&&U(this),null;var i,n=e.needReadable;return p("need readable",n),(0===e.length||e.length-t<e.highWaterMark)&&p("length less than watermark",n=!0),e.ended||e.reading?p("reading or ended",n=!1):n&&(p("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=S(r,e))),null===(i=t>0?N(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&U(this)),null!==i&&this.emit("data",i),i},_.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},_.prototype.pipe=function(t,e){var r=this,a=this._readableState;switch(a.pipesCount){case 0:a.pipes=t;break;case 1:a.pipes=[a.pipes,t];break;default:a.pipes.push(t)}a.pipesCount+=1,p("pipe count=%d opts=%j",a.pipesCount,e);var u=(!e||!1!==e.end)&&t!==i.stdout&&t!==i.stderr?l:_;function c(e,i){p("onunpipe"),e===r&&i&&!1===i.hasUnpiped&&(i.hasUnpiped=!0,p("cleanup"),t.removeListener("close",m),t.removeListener("finish",v),t.removeListener("drain",h),t.removeListener("error",y),t.removeListener("unpipe",c),r.removeListener("end",l),r.removeListener("end",_),r.removeListener("data",g),f=!0,!a.awaitDrain||t._writableState&&!t._writableState.needDrain||h())}function l(){p("onend"),t.end()}a.endEmitted?n.nextTick(u):r.once("end",u),t.on("unpipe",c);var h=function(t){return function(){var e=t._readableState;p("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&o(t,"data")&&(e.flowing=!0,R(t))}}(r);t.on("drain",h);var f=!1;var d=!1;function g(e){p("ondata"),d=!1,!1!==t.write(e)||d||((1===a.pipesCount&&a.pipes===t||a.pipesCount>1&&-1!==P(a.pipes,t))&&!f&&(p("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,d=!0),r.pause())}function y(e){p("onerror",e),_(),t.removeListener("error",y),0===o(t,"error")&&t.emit("error",e)}function m(){t.removeListener("finish",v),_()}function v(){p("onfinish"),t.removeListener("close",m),_()}function _(){p("unpipe"),r.unpipe(t)}return r.on("data",g),function(t,e,r){if("function"==typeof t.prependListener)return t.prependListener(e,r);t._events&&t._events[e]?s(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]:t.on(e,r)}(t,"error",y),t.once("close",m),t.once("finish",v),t.emit("pipe",r),a.flowing||(p("pipe resume"),r.resume()),t},_.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var i=e.pipes,n=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var a=0;a<n;a++)i[a].emit("unpipe",this,r);return this}var s=P(e.pipes,t);return-1===s?this:(e.pipes.splice(s,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)},_.prototype.on=function(t,e){var r=u.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var i=this._readableState;i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&w(this):n.nextTick(I,this))}return r},_.prototype.addListener=_.prototype.on,_.prototype.resume=function(){var t=this._readableState;return t.flowing||(p("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,n.nextTick(B,t,e))}(this,t)),this},_.prototype.pause=function(){return p("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(p("pause"),this._readableState.flowing=!1,this.emit("pause")),this},_.prototype.wrap=function(t){var e=this,r=this._readableState,i=!1;for(var n in t.on("end",function(){if(p("wrapped end"),r.decoder&&!r.ended){var t=r.decoder.end();t&&t.length&&e.push(t)}e.push(null)}),t.on("data",function(n){(p("wrapped data"),r.decoder&&(n=r.decoder.write(n)),!r.objectMode||null!==n&&void 0!==n)&&((r.objectMode||n&&n.length)&&(e.push(n)||(i=!0,t.pause())))}),t)void 0===this[n]&&"function"==typeof t[n]&&(this[n]=function(e){return function(){return t[e].apply(t,arguments)}}(n));for(var a=0;a<m.length;a++)t.on(m[a],this.emit.bind(this,m[a]));return this._read=function(e){p("wrapped _read",e),i&&(i=!1,t.resume())},this},Object.defineProperty(_.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),_._fromList=N}).call(this,r(8),r(7))},function(t,e,r){t.exports=r(34).EventEmitter},function(t,e,r){"use strict";var i=r(21);function n(t,e){t.emit("error",e)}t.exports={destroy:function(t,e){var r=this,a=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return a||s?(e?e(t):!t||this._writableState&&this._writableState.errorEmitted||i.nextTick(n,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!e&&t?(i.nextTick(n,r,t),r._writableState&&(r._writableState.errorEmitted=!0)):e&&e(t)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(t,e,r){"use strict";var i=r(22).Buffer,n=i.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(i.isEncoding===n||!n(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=u,this.end=c,e=4;break;case"utf8":this.fillLast=o,e=4;break;case"base64":this.text=l,this.end=h,e=3;break;default:return this.write=f,void(this.end=p)}this.lastNeed=0,this.lastTotal=0,this.lastChar=i.allocUnsafe(e)}function s(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function o(t){var e=this.lastTotal-this.lastNeed,r=function(t,e,r){if(128!=(192&e[0]))return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"�"}}(this,t);return void 0!==r?r:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function u(t,e){if((t.length-e)%2==0){var r=t.toString("utf16le",e);if(r){var i=r.charCodeAt(r.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function c(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function l(t,e){var r=(t.length-e)%3;return 0===r?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function h(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function f(t){return t.toString(this.encoding)}function p(t){return t&&t.length?this.write(t):""}e.StringDecoder=a,a.prototype.write=function(t){if(0===t.length)return"";var e,r;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""},a.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e},a.prototype.text=function(t,e){var r=function(t,e,r){var i=e.length-1;if(i<r)return 0;var n=s(e[i]);if(n>=0)return n>0&&(t.lastNeed=n-1),n;if(--i<r||-2===n)return 0;if((n=s(e[i]))>=0)return n>0&&(t.lastNeed=n-2),n;if(--i<r||-2===n)return 0;if((n=s(e[i]))>=0)return n>0&&(2===n?n=0:t.lastNeed=n-3),n;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var i=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,i),t.toString("utf8",e,i)},a.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},function(t,e,r){"use strict";t.exports=a;var i=r(12),n=r(17);function a(t){if(!(this instanceof a))return new a(t);i.call(this,t),this._transformState={afterTransform:function(t,e){var r=this._transformState;r.transforming=!1;var i=r.writecb;if(!i)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!=e&&this.push(e),i(t);var n=this._readableState;n.reading=!1,(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",s)}function s(){var t=this;"function"==typeof this._flush?this._flush(function(e,r){o(t,e,r)}):o(this,null,null)}function o(t,e,r){if(e)return t.emit("error",e);if(null!=r&&t.push(r),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}n.inherits=r(11),n.inherits(a,i),a.prototype.push=function(t,e){return this._transformState.needTransform=!1,i.prototype.push.call(this,t,e)},a.prototype._transform=function(t,e,r){throw new Error("_transform() is not implemented")},a.prototype._write=function(t,e,r){var i=this._transformState;if(i.writecb=r,i.writechunk=t,i.writeencoding=e,!i.transforming){var n=this._readableState;(i.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}},a.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},a.prototype._destroy=function(t,e){var r=this;i.prototype._destroy.call(this,t,function(t){e(t),r.emit("close")})}},function(t,e,r){(function(t,i){var n=/%[sdj%]/g;e.format=function(t){if(!m(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(o(arguments[r]));return e.join(" ")}r=1;for(var i=arguments,a=i.length,s=String(t).replace(n,function(t){if("%%"===t)return"%";if(r>=a)return t;switch(t){case"%s":return String(i[r++]);case"%d":return Number(i[r++]);case"%j":try{return JSON.stringify(i[r++])}catch(t){return"[Circular]"}default:return t}}),u=i[r];r<a;u=i[++r])g(u)||!b(u)?s+=" "+u:s+=" "+o(u);return s},e.deprecate=function(r,n){if(v(t.process))return function(){return e.deprecate(r,n).apply(this,arguments)};if(!0===i.noDeprecation)return r;var a=!1;return function(){if(!a){if(i.throwDeprecation)throw new Error(n);i.traceDeprecation?console.trace(n):console.error(n),a=!0}return r.apply(this,arguments)}};var a,s={};function o(t,r){var i={seen:[],stylize:c};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),d(r)?i.showHidden=r:r&&e._extend(i,r),v(i.showHidden)&&(i.showHidden=!1),v(i.depth)&&(i.depth=2),v(i.colors)&&(i.colors=!1),v(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=u),l(i,t,i.depth)}function u(t,e){var r=o.styles[e];return r?"["+o.colors[r][0]+"m"+t+"["+o.colors[r][1]+"m":t}function c(t,e){return t}function l(t,r,i){if(t.customInspect&&r&&S(r.inspect)&&r.inspect!==e.inspect&&(!r.constructor||r.constructor.prototype!==r)){var n=r.inspect(i,t);return m(n)||(n=l(t,n,i)),n}var a=function(t,e){if(v(e))return t.stylize("undefined","undefined");if(m(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}if(y(e))return t.stylize(""+e,"number");if(d(e))return t.stylize(""+e,"boolean");if(g(e))return t.stylize("null","null")}(t,r);if(a)return a;var s=Object.keys(r),o=function(t){var e={};return t.forEach(function(t,r){e[t]=!0}),e}(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(r)),E(r)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return h(r);if(0===s.length){if(S(r)){var u=r.name?": "+r.name:"";return t.stylize("[Function"+u+"]","special")}if(_(r))return t.stylize(RegExp.prototype.toString.call(r),"regexp");if(C(r))return t.stylize(Date.prototype.toString.call(r),"date");if(E(r))return h(r)}var c,b="",w=!1,A=["{","}"];(p(r)&&(w=!0,A=["[","]"]),S(r))&&(b=" [Function"+(r.name?": "+r.name:"")+"]");return _(r)&&(b=" "+RegExp.prototype.toString.call(r)),C(r)&&(b=" "+Date.prototype.toUTCString.call(r)),E(r)&&(b=" "+h(r)),0!==s.length||w&&0!=r.length?i<0?_(r)?t.stylize(RegExp.prototype.toString.call(r),"regexp"):t.stylize("[Object]","special"):(t.seen.push(r),c=w?function(t,e,r,i,n){for(var a=[],s=0,o=e.length;s<o;++s)k(e,String(s))?a.push(f(t,e,r,i,String(s),!0)):a.push("");return n.forEach(function(n){n.match(/^\d+$/)||a.push(f(t,e,r,i,n,!0))}),a}(t,r,i,o,s):s.map(function(e){return f(t,r,i,o,e,w)}),t.seen.pop(),function(t,e,r){if(t.reduce(function(t,e){return 0,e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60)return r[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+r[1];return r[0]+e+" "+t.join(", ")+" "+r[1]}(c,b,A)):A[0]+b+A[1]}function h(t){return"["+Error.prototype.toString.call(t)+"]"}function f(t,e,r,i,n,a){var s,o,u;if((u=Object.getOwnPropertyDescriptor(e,n)||{value:e[n]}).get?o=u.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):u.set&&(o=t.stylize("[Setter]","special")),k(i,n)||(s="["+n+"]"),o||(t.seen.indexOf(u.value)<0?(o=g(r)?l(t,u.value,null):l(t,u.value,r-1)).indexOf("\n")>-1&&(o=a?o.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+o.split("\n").map(function(t){return"   "+t}).join("\n")):o=t.stylize("[Circular]","special")),v(s)){if(a&&n.match(/^\d+$/))return o;(s=JSON.stringify(""+n)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+o}function p(t){return Array.isArray(t)}function d(t){return"boolean"==typeof t}function g(t){return null===t}function y(t){return"number"==typeof t}function m(t){return"string"==typeof t}function v(t){return void 0===t}function _(t){return b(t)&&"[object RegExp]"===w(t)}function b(t){return"object"==typeof t&&null!==t}function C(t){return b(t)&&"[object Date]"===w(t)}function E(t){return b(t)&&("[object Error]"===w(t)||t instanceof Error)}function S(t){return"function"==typeof t}function w(t){return Object.prototype.toString.call(t)}function A(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(t){if(v(a)&&(a=i.env.NODE_DEBUG||""),t=t.toUpperCase(),!s[t])if(new RegExp("\\b"+t+"\\b","i").test(a)){var r=i.pid;s[t]=function(){var i=e.format.apply(e,arguments);console.error("%s %d: %s",t,r,i)}}else s[t]=function(){};return s[t]},e.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=p,e.isBoolean=d,e.isNull=g,e.isNullOrUndefined=function(t){return null==t},e.isNumber=y,e.isString=m,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=v,e.isRegExp=_,e.isObject=b,e.isDate=C,e.isError=E,e.isFunction=S,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=r(100);var T=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function k(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){console.log("%s - %s",function(){var t=new Date,e=[A(t.getHours()),A(t.getMinutes()),A(t.getSeconds())].join(":");return[t.getDate(),T[t.getMonth()],e].join(" ")}(),e.format.apply(e,arguments))},e.inherits=r(11),e._extend=function(t,e){if(!e||!b(e))return t;for(var r=Object.keys(e),i=r.length;i--;)t[r[i]]=e[r[i]];return t}}).call(this,r(8),r(7))},function(t,e,r){(function(e){var i=r(56).Transform,n=r(62).inherits,a=r(32),s=a.utils,o=s.bindings,u=r(33),c=a.STATES,l=a.SIZES,h={blockIndependence:!0,blockChecksum:!1,blockMaxSize:4<<20,streamSize:!1,streamChecksum:!0,dict:!1,dictId:0,highCompression:!1};function f(t){if(!(this instanceof f))return new f(t);i.call(this,t);var e=t||h;e!==h&&Object.keys(h).forEach(function(t){e.hasOwnProperty(t)||(e[t]=h[t])}),this.options=e,this.binding=this.options.useJS?u:o,this.compress=e.highCompression?this.binding.compressHC:this.binding.compress;var r=0;r|=a.VERSION<<6,r|=(1&e.blockIndependence)<<5,r|=(1&e.blockChecksum)<<4,r|=(1&e.streamSize)<<3,r|=(1&e.streamChecksum)<<2,r|=1&e.dict;var n=a.blockMaxSizes.indexOf(e.blockMaxSize);if(n<0)throw new Error("Invalid blockMaxSize: "+e.blockMaxSize);this.descriptor={flg:r,bd:(7&n)<<4},this.buffer=[],this.length=0,this.first=!0,this.checksum=null}n(f,i),f.prototype.headerSize=function(){var t=this.options.streamSize?l.DESCRIPTOR:0,e=this.options.dict?l.DICTID:0;return l.MAGIC+1+1+t+e+1},f.prototype.header=function(){var t=this.headerSize(),r=new e(t);this.state=c.MAGIC,r.writeInt32LE(a.MAGICNUMBER,0,!0),this.state=c.DESCRIPTOR;var i=r.slice(l.MAGIC,r.length-1);i.writeUInt8(this.descriptor.flg,0,!0),i.writeUInt8(this.descriptor.bd,1,!0);var n=2;return this.state=c.SIZE,this.options.streamSize&&(i.writeInt32LE(0,n,!0),i.writeInt32LE(this.size,n+4,!0),n+=l.SIZE),this.state=c.DICTID,this.options.dict&&(i.writeInt32LE(this.dictId,n,!0),n+=l.DICTID),this.state=c.DESCRIPTOR_CHECKSUM,r.writeUInt8(s.descriptorChecksum(i),l.MAGIC+n,!1),r},f.prototype.update_Checksum=function(t){this.state=c.CHECKSUM_UPDATE,this.options.streamChecksum&&(this.checksum=s.streamChecksum(t,this.checksum))},f.prototype.compress_DataBlock=function(t){this.state=c.DATABLOCK_COMPRESS;var r=this.options.blockChecksum?l.DATABLOCK_CHECKSUM:0,i=this.binding.compressBound(t.length),n=new e(l.DATABLOCK_SIZE+i+r),a=n.slice(l.DATABLOCK_SIZE,l.DATABLOCK_SIZE+i),o=this.compress(t,a);(this.state=c.DATABLOCK_SIZE,o>0&&o<=this.options.blockMaxSize?(n.writeUInt32LE(o,0,!0),n=n.slice(0,l.DATABLOCK_SIZE+o+r)):(n.writeInt32LE(2147483648|t.length,0,!0),n=n.slice(0,l.DATABLOCK_SIZE+t.length+r),t.copy(n,l.DATABLOCK_SIZE)),this.state=c.DATABLOCK_CHECKSUM,this.options.blockChecksum)&&n.slice(-r).writeInt32LE(s.blockChecksum(a),0,!0);return this.update_Checksum(t),this.size+=t.length,n},f.prototype._transform=function(t,r,i){t&&(this.buffer.push(t),this.length+=t.length),this.first&&(this.push(this.header()),this.first=!1);var n=this.options.blockMaxSize;if(this.length<n)return i();for(var a=e.concat(this.buffer,this.length),s=0,o=a.length;o>=n;o-=n,s+=n)this.push(this.compress_DataBlock(a.slice(s,s+n)));o>0?(this.buffer=[a.slice(s)],this.length=this.buffer[0].length):(this.buffer=[],this.length=0),i()},f.prototype._flush=function(t){if(this.first&&(this.push(this.header()),this.first=!1),this.length>0){var r=e.concat(this.buffer,this.length);this.buffer=[],this.length=0;var i=this.compress_DataBlock(r);this.push(i)}if(this.options.streamChecksum)this.state=c.CHECKSUM,(n=new e(l.EOS+l.CHECKSUM)).writeInt32LE(s.streamChecksum(null,this.checksum),l.EOS,!0);else var n=new e(l.EOS);this.state=c.EOS,n.writeInt32LE(a.EOS,0,!0),this.push(n),t()},t.exports=f}).call(this,r(3).Buffer)},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function r(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}t.exports=function(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}},function(t,e,r){t.exports=r(32),t.exports.version="0.5.1",t.exports.createDecoderStream=r(55),t.exports.decode=r(101).LZ4_uncompress,t.exports.createEncoderStream=r(63),t.exports.encode=r(102).LZ4_compress;var i=t.exports.utils.bindings;t.exports.decodeBlock=i.uncompress,t.exports.encodeBound=i.compressBound,t.exports.encodeBlock=i.compress,t.exports.encodeBlockHC=i.compressHC},function(t,e){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(e){return"function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?t.exports=i=function(t){return r(t)}:t.exports=i=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":r(t)},i(e)}t.exports=i},function(t,e){t.exports=function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}},function(t,e){t.exports=function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(t,e,r){(function(t,e){!function(t,r){"use strict";if(!t.setImmediate){var i,n=1,a={},s=!1,o=t.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(t);u=u&&u.setTimeout?u:t,"[object process]"==={}.toString.call(t.process)?i=function(t){e.nextTick(function(){l(t)})}:function(){if(t.postMessage&&!t.importScripts){var e=!0,r=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=r,e}}()?function(){var e="setImmediate$"+Math.random()+"$",r=function(r){r.source===t&&"string"==typeof r.data&&0===r.data.indexOf(e)&&l(+r.data.slice(e.length))};t.addEventListener?t.addEventListener("message",r,!1):t.attachEvent("onmessage",r),i=function(r){t.postMessage(e+r,"*")}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){l(t.data)},i=function(e){t.port2.postMessage(e)}}():o&&"onreadystatechange"in o.createElement("script")?function(){var t=o.documentElement;i=function(e){var r=o.createElement("script");r.onreadystatechange=function(){l(e),r.onreadystatechange=null,t.removeChild(r),r=null},t.appendChild(r)}}():i=function(t){setTimeout(l,0,t)},u.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),r=0;r<e.length;r++)e[r]=arguments[r+1];var s={callback:t,args:e};return a[n]=s,i(n),n++},u.clearImmediate=c}function c(t){delete a[t]}function l(t){if(s)setTimeout(l,0,t);else{var e=a[t];if(e){s=!0;try{!function(t){var e=t.callback,i=t.args;switch(i.length){case 0:e();break;case 1:e(i[0]);break;case 2:e(i[0],i[1]);break;case 3:e(i[0],i[1],i[2]);break;default:e.apply(r,i)}}(e)}finally{c(t),s=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,r(8),r(7))},function(t,e,r){"use strict";e.byteLength=function(t){var e=c(t),r=e[0],i=e[1];return 3*(r+i)/4-i},e.toByteArray=function(t){for(var e,r=c(t),i=r[0],s=r[1],o=new a(function(t,e,r){return 3*(e+r)/4-r}(0,i,s)),u=0,l=s>0?i-4:i,h=0;h<l;h+=4)e=n[t.charCodeAt(h)]<<18|n[t.charCodeAt(h+1)]<<12|n[t.charCodeAt(h+2)]<<6|n[t.charCodeAt(h+3)],o[u++]=e>>16&255,o[u++]=e>>8&255,o[u++]=255&e;2===s&&(e=n[t.charCodeAt(h)]<<2|n[t.charCodeAt(h+1)]>>4,o[u++]=255&e);1===s&&(e=n[t.charCodeAt(h)]<<10|n[t.charCodeAt(h+1)]<<4|n[t.charCodeAt(h+2)]>>2,o[u++]=e>>8&255,o[u++]=255&e);return o},e.fromByteArray=function(t){for(var e,r=t.length,n=r%3,a=[],s=0,o=r-n;s<o;s+=16383)a.push(h(t,s,s+16383>o?o:s+16383));1===n?(e=t[r-1],a.push(i[e>>2]+i[e<<4&63]+"==")):2===n&&(e=(t[r-2]<<8)+t[r-1],a.push(i[e>>10]+i[e>>4&63]+i[e<<2&63]+"="));return a.join("")};for(var i=[],n=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,u=s.length;o<u;++o)i[o]=s[o],n[s.charCodeAt(o)]=o;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function l(t){return i[t>>18&63]+i[t>>12&63]+i[t>>6&63]+i[63&t]}function h(t,e,r){for(var i,n=[],a=e;a<r;a+=3)i=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),n.push(l(i));return n.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,r,i,n){var a,s,o=8*n-i-1,u=(1<<o)-1,c=u>>1,l=-7,h=r?n-1:0,f=r?-1:1,p=t[e+h];for(h+=f,a=p&(1<<-l)-1,p>>=-l,l+=o;l>0;a=256*a+t[e+h],h+=f,l-=8);for(s=a&(1<<-l)-1,a>>=-l,l+=i;l>0;s=256*s+t[e+h],h+=f,l-=8);if(0===a)a=1-c;else{if(a===u)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,i),a-=c}return(p?-1:1)*s*Math.pow(2,a-i)},e.write=function(t,e,r,i,n,a){var s,o,u,c=8*a-n-1,l=(1<<c)-1,h=l>>1,f=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:a-1,d=i?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,s=l):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+h>=1?f/u:f*Math.pow(2,1-h))*u>=2&&(s++,u/=2),s+h>=l?(o=0,s=l):s+h>=1?(o=(e*u-1)*Math.pow(2,n),s+=h):(o=e*Math.pow(2,h-1)*Math.pow(2,n),s=0));n>=8;t[r+p]=255&o,p+=d,o/=256,n-=8);for(s=s<<n|o,c+=n;c>0;t[r+p]=255&s,p+=d,s/=256,c-=8);t[r+p-d]|=128*g}},function(t,e,r){(function(e){var r={};t.exports=r;var i={};r.encode=function(t,e,r){if("string"!=typeof e)throw new TypeError('"alphabet" must be a string.');if(void 0!==r&&"number"!=typeof r)throw new TypeError('"maxline" must be a number.');var i="";if(t instanceof Uint8Array){var n=0,a=e.length,s=e.charAt(0),o=[0];for(n=0;n<t.length;++n){for(var u=0,c=t[n];u<o.length;++u)c+=o[u]<<8,o[u]=c%a,c=c/a|0;for(;c>0;)o.push(c%a),c=c/a|0}for(n=0;0===t[n]&&n<t.length-1;++n)i+=s;for(n=o.length-1;n>=0;--n)i+=e[o[n]]}else i=function(t,e){var r=0,i=e.length,n=e.charAt(0),a=[0];for(r=0;r<t.length();++r){for(var s=0,o=t.at(r);s<a.length;++s)o+=a[s]<<8,a[s]=o%i,o=o/i|0;for(;o>0;)a.push(o%i),o=o/i|0}var u="";for(r=0;0===t.at(r)&&r<t.length()-1;++r)u+=n;for(r=a.length-1;r>=0;--r)u+=e[a[r]];return u}(t,e);if(r){var l=new RegExp(".{1,"+r+"}","g");i=i.match(l).join("\r\n")}return i},r.decode=function(t,r){if("string"!=typeof t)throw new TypeError('"input" must be a string.');if("string"!=typeof r)throw new TypeError('"alphabet" must be a string.');var n=i[r];if(!n){n=i[r]=[];for(var a=0;a<r.length;++a)n[r.charCodeAt(a)]=a}t=t.replace(/\s/g,"");var s=r.length,o=r.charAt(0),u=[0];for(a=0;a<t.length;a++){var c=n[t.charCodeAt(a)];if(void 0===c)return;for(var l=0,h=c;l<u.length;++l)h+=u[l]*s,u[l]=255&h,h>>=8;for(;h>0;)u.push(255&h),h>>=8}for(var f=0;t[f]===o&&f<t.length-1;++f)u.push(0);return void 0!==e?e.from(u.reverse()):new Uint8Array(u.reverse())}}).call(this,r(3).Buffer)},function(t,e,r){var i=r(0);r(9),r(40);var n=t.exports=i.tls;function a(t,e,r){var a=e.entity===i.tls.ConnectionEnd.client;t.read.cipherState={init:!1,cipher:i.cipher.createDecipher("AES-CBC",a?r.keys.server_write_key:r.keys.client_write_key),iv:a?r.keys.server_write_IV:r.keys.client_write_IV},t.write.cipherState={init:!1,cipher:i.cipher.createCipher("AES-CBC",a?r.keys.client_write_key:r.keys.server_write_key),iv:a?r.keys.client_write_IV:r.keys.server_write_IV},t.read.cipherFunction=c,t.write.cipherFunction=s,t.read.macLength=t.write.macLength=r.mac_length,t.read.macFunction=t.write.macFunction=n.hmac_sha1}function s(t,e){var r,a=!1,s=e.macFunction(e.macKey,e.sequenceNumber,t);t.fragment.putBytes(s),e.updateSequenceNumber(),r=t.version.minor===n.Versions.TLS_1_0.minor?e.cipherState.init?null:e.cipherState.iv:i.random.getBytesSync(16),e.cipherState.init=!0;var u=e.cipherState.cipher;return u.start({iv:r}),t.version.minor>=n.Versions.TLS_1_1.minor&&u.output.putBytes(r),u.update(t.fragment),u.finish(o)&&(t.fragment=u.output,t.length=t.fragment.length(),a=!0),a}function o(t,e,r){if(!r){var i=t-e.length()%t;e.fillWithByte(i-1,i)}return!0}function u(t,e,r){var i=!0;if(r){for(var n=e.length(),a=e.last(),s=n-1-a;s<n-1;++s)i=i&&e.at(s)==a;i&&e.truncate(a+1)}return i}n.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:function(t){t.bulk_cipher_algorithm=n.BulkCipherAlgorithm.aes,t.cipher_type=n.CipherType.block,t.enc_key_length=16,t.block_length=16,t.fixed_iv_length=16,t.record_iv_length=16,t.mac_algorithm=n.MACAlgorithm.hmac_sha1,t.mac_length=20,t.mac_key_length=20},initConnectionState:a},n.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:function(t){t.bulk_cipher_algorithm=n.BulkCipherAlgorithm.aes,t.cipher_type=n.CipherType.block,t.enc_key_length=32,t.block_length=16,t.fixed_iv_length=16,t.record_iv_length=16,t.mac_algorithm=n.MACAlgorithm.hmac_sha1,t.mac_length=20,t.mac_key_length=20},initConnectionState:a};function c(t,e){var r,a=!1;0,r=t.version.minor===n.Versions.TLS_1_0.minor?e.cipherState.init?null:e.cipherState.iv:t.fragment.getBytes(16),e.cipherState.init=!0;var s=e.cipherState.cipher;s.start({iv:r}),s.update(t.fragment),a=s.finish(u);var o=e.macLength,c=i.random.getBytesSync(o),l=s.output.length();l>=o?(t.fragment=s.output.getBytes(l-o),c=s.output.getBytes(o)):t.fragment=s.output.getBytes(),t.fragment=i.util.createBuffer(t.fragment),t.length=t.fragment.length();var h=e.macFunction(e.macKey,e.sequenceNumber,t);return e.updateSequenceNumber(),a=function(t,e,r){var n=i.hmac.create();return n.start("SHA1",t),n.update(e),e=n.digest().getBytes(),n.start(null,null),n.update(r),r=n.digest().getBytes(),e===r}(e.macKey,c,h)&&a}},function(t,e,r){var i=r(0);r(51),t.exports=i.mgf=i.mgf||{},i.mgf.mgf1=i.mgf1},function(t,e,r){(function(e){var i=r(0);if(r(20),r(4),r(53),r(1),void 0===n)var n=i.jsbn.BigInteger;var a=i.util.ByteBuffer,s=void 0===e?Uint8Array:e;i.pki=i.pki||{},t.exports=i.pki.ed25519=i.ed25519=i.ed25519||{};var o=i.ed25519;function u(t){var r=t.message;if(r instanceof Uint8Array)return r;var i=t.encoding;if(void 0===r){if(!t.md)throw new TypeError('"options.message" or "options.md" not specified.');r=t.md.digest().getBytes(),i="binary"}if("string"==typeof r&&!i)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if("string"==typeof r){if(void 0!==e)return new e(r,i);r=new a(r,i)}else if(!(r instanceof a))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var n=new s(r.length()),o=0;o<n.length;++o)n[o]=r.at(o);return n}o.constants={},o.constants.PUBLIC_KEY_BYTE_LENGTH=32,o.constants.PRIVATE_KEY_BYTE_LENGTH=64,o.constants.SEED_BYTE_LENGTH=32,o.constants.SIGN_BYTE_LENGTH=64,o.constants.HASH_BYTE_LENGTH=64,o.generateKeyPair=function(t){var e=(t=t||{}).seed;if(void 0===e)e=i.random.getBytesSync(o.constants.SEED_BYTE_LENGTH);else if("string"==typeof e){if(e.length!==o.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+o.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(e instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');e=u({message:e,encoding:"binary"});for(var r=new s(o.constants.PUBLIC_KEY_BYTE_LENGTH),n=new s(o.constants.PRIVATE_KEY_BYTE_LENGTH),a=0;a<32;++a)n[a]=e[a];return function(t,e){var r,i=[U(),U(),U(),U()],n=m(e,32);for(n[0]&=248,n[31]&=127,n[31]|=64,I(i,n),E(t,i),r=0;r<32;++r)e[r+32]=t[r]}(r,n),{publicKey:r,privateKey:n}},o.publicKeyFromPrivateKey=function(t){var e=u({message:(t=t||{}).privateKey,encoding:"binary"});if(e.length!==o.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+o.constants.PRIVATE_KEY_BYTE_LENGTH);for(var r=new s(o.constants.PUBLIC_KEY_BYTE_LENGTH),i=0;i<r.length;++i)r[i]=e[32+i];return r},o.sign=function(t){var e=u(t=t||{}),r=u({message:t.privateKey,encoding:"binary"});if(r.length!==o.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+o.constants.PRIVATE_KEY_BYTE_LENGTH);var i=new s(o.constants.SIGN_BYTE_LENGTH+e.length);!function(t,e,r,i){var n,a,s=new Float64Array(64),o=[U(),U(),U(),U()],u=m(i,32);u[0]&=248,u[31]&=127,u[31]|=64;var c=r+64;for(n=0;n<r;++n)t[64+n]=e[n];for(n=0;n<32;++n)t[32+n]=u[32+n];var l=m(t.subarray(32),r+32);for(_(l),I(o,l),E(t,o),n=32;n<64;++n)t[n]=i[n];var h=m(t,r+64);for(_(h),n=32;n<64;++n)s[n]=0;for(n=0;n<32;++n)s[n]=l[n];for(n=0;n<32;++n)for(a=0;a<32;a++)s[n+a]+=h[n]*u[a];v(t.subarray(32),s)}(i,e,e.length,r);for(var n=new s(o.constants.SIGN_BYTE_LENGTH),a=0;a<n.length;++a)n[a]=i[a];return n},o.verify=function(t){var e=u(t=t||{});if(void 0===t.signature)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var r=u({message:t.signature,encoding:"binary"});if(r.length!==o.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+o.constants.SIGN_BYTE_LENGTH);var i=u({message:t.publicKey,encoding:"binary"});if(i.length!==o.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+o.constants.PUBLIC_KEY_BYTE_LENGTH);var n,a=new s(o.constants.SIGN_BYTE_LENGTH+e.length),f=new s(o.constants.SIGN_BYTE_LENGTH+e.length);for(n=0;n<o.constants.SIGN_BYTE_LENGTH;++n)a[n]=r[n];for(n=0;n<e.length;++n)a[n+o.constants.SIGN_BYTE_LENGTH]=e[n];return function(t,e,r,i){var n,a=new s(32),o=[U(),U(),U(),U()],u=[U(),U(),U(),U()];if(-1,r<64)return-1;if(function(t,e){var r=U(),i=U(),n=U(),a=U(),s=U(),o=U(),u=U();B(t[2],l),function(t,e){var r;for(r=0;r<16;++r)t[r]=e[2*r]+(e[2*r+1]<<8);t[15]&=32767}(t[1],e),D(n,t[1]),x(a,n,h),P(n,n,t[2]),L(a,t[2],a),D(s,a),D(o,s),x(u,o,s),x(r,u,n),x(r,r,a),function(t,e){var r,i=U();for(r=0;r<16;++r)i[r]=e[r];for(r=250;r>=0;--r)D(i,i),1!==r&&x(i,i,e);for(r=0;r<16;++r)t[r]=i[r]}(r,r),x(r,r,n),x(r,r,a),x(r,r,a),x(t[0],r,a),D(i,t[0]),x(i,i,a),w(i,n)&&x(t[0],t[0],y);if(D(i,t[0]),x(i,i,a),w(i,n))return-1;T(t[0])===e[31]>>7&&P(t[0],c,t[0]);return x(t[3],t[0],t[1]),0}(u,i))return-1;for(n=0;n<r;++n)t[n]=e[n];for(n=0;n<32;++n)t[n+32]=i[n];var f=m(t,r);if(_(f),k(o,u,f),I(u,e.subarray(32)),b(o,u),E(a,o),r-=64,A(e,0,a,0)){for(n=0;n<r;++n)t[n]=0;return-1}for(n=0;n<r;++n)t[n]=e[n+64];return r}(f,a,a.length,i)>=0};var c=U(),l=U([1]),h=U([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),f=U([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),p=U([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),d=U([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),g=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),y=U([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function m(t,r){var n=i.md.sha512.create(),u=new a(t);n.update(u.getBytes(r),"binary");var c=n.digest().getBytes();if(void 0!==e)return new e(c,"binary");for(var l=new s(o.constants.HASH_BYTE_LENGTH),h=0;h<64;++h)l[h]=c.charCodeAt(h);return l}function v(t,e){var r,i,n,a;for(i=63;i>=32;--i){for(r=0,n=i-32,a=i-12;n<a;++n)e[n]+=r-16*e[i]*g[n-(i-32)],r=e[n]+128>>8,e[n]-=256*r;e[n]+=r,e[i]=0}for(r=0,n=0;n<32;++n)e[n]+=r-(e[31]>>4)*g[n],r=e[n]>>8,e[n]&=255;for(n=0;n<32;++n)e[n]-=r*g[n];for(i=0;i<32;++i)e[i+1]+=e[i]>>8,t[i]=255&e[i]}function _(t){for(var e=new Float64Array(64),r=0;r<64;++r)e[r]=t[r],t[r]=0;v(t,e)}function b(t,e){var r=U(),i=U(),n=U(),a=U(),s=U(),o=U(),u=U(),c=U(),l=U();P(r,t[1],t[0]),P(l,e[1],e[0]),x(r,r,l),L(i,t[0],t[1]),L(l,e[0],e[1]),x(i,i,l),x(n,t[3],e[3]),x(n,n,f),x(a,t[2],e[2]),L(a,a,a),P(s,i,r),P(o,a,n),L(u,a,n),L(c,i,r),x(t[0],s,o),x(t[1],c,u),x(t[2],u,o),x(t[3],s,c)}function C(t,e,r){for(var i=0;i<4;++i)N(t[i],e[i],r)}function E(t,e){var r=U(),i=U(),n=U();!function(t,e){var r,i=U();for(r=0;r<16;++r)i[r]=e[r];for(r=253;r>=0;--r)D(i,i),2!==r&&4!==r&&x(i,i,e);for(r=0;r<16;++r)t[r]=i[r]}(n,e[2]),x(r,e[0],n),x(i,e[1],n),S(t,i),t[31]^=T(r)<<7}function S(t,e){var r,i,n,a=U(),s=U();for(r=0;r<16;++r)s[r]=e[r];for(R(s),R(s),R(s),i=0;i<2;++i){for(a[0]=s[0]-65517,r=1;r<15;++r)a[r]=s[r]-65535-(a[r-1]>>16&1),a[r-1]&=65535;a[15]=s[15]-32767-(a[14]>>16&1),n=a[15]>>16&1,a[14]&=65535,N(s,a,1-n)}for(r=0;r<16;r++)t[2*r]=255&s[r],t[2*r+1]=s[r]>>8}function w(t,e){var r=new s(32),i=new s(32);return S(r,t),S(i,e),A(r,0,i,0)}function A(t,e,r,i){return function(t,e,r,i,n){var a,s=0;for(a=0;a<n;++a)s|=t[e+a]^r[i+a];return(1&s-1>>>8)-1}(t,e,r,i,32)}function T(t){var e=new s(32);return S(e,t),1&e[0]}function k(t,e,r){var i,n;for(B(t[0],c),B(t[1],l),B(t[2],l),B(t[3],c),n=255;n>=0;--n)C(t,e,i=r[n/8|0]>>(7&n)&1),b(e,t),b(t,t),C(t,e,i)}function I(t,e){var r=[U(),U(),U(),U()];B(r[0],p),B(r[1],d),B(r[2],l),x(r[3],p,d),k(t,r,e)}function B(t,e){var r;for(r=0;r<16;r++)t[r]=0|e[r]}function R(t){var e,r,i=1;for(e=0;e<16;++e)r=t[e]+i+65535,i=Math.floor(r/65536),t[e]=r-65536*i;t[0]+=i-1+37*(i-1)}function N(t,e,r){for(var i,n=~(r-1),a=0;a<16;++a)i=n&(t[a]^e[a]),t[a]^=i,e[a]^=i}function U(t){var e,r=new Float64Array(16);if(t)for(e=0;e<t.length;++e)r[e]=t[e];return r}function L(t,e,r){for(var i=0;i<16;++i)t[i]=e[i]+r[i]}function P(t,e,r){for(var i=0;i<16;++i)t[i]=e[i]-r[i]}function D(t,e){x(t,e,e)}function x(t,e,r){var i,n,a=0,s=0,o=0,u=0,c=0,l=0,h=0,f=0,p=0,d=0,g=0,y=0,m=0,v=0,_=0,b=0,C=0,E=0,S=0,w=0,A=0,T=0,k=0,I=0,B=0,R=0,N=0,U=0,L=0,P=0,D=0,x=r[0],O=r[1],M=r[2],V=r[3],K=r[4],F=r[5],z=r[6],j=r[7],G=r[8],H=r[9],q=r[10],W=r[11],Y=r[12],Q=r[13],X=r[14],Z=r[15];a+=(i=e[0])*x,s+=i*O,o+=i*M,u+=i*V,c+=i*K,l+=i*F,h+=i*z,f+=i*j,p+=i*G,d+=i*H,g+=i*q,y+=i*W,m+=i*Y,v+=i*Q,_+=i*X,b+=i*Z,s+=(i=e[1])*x,o+=i*O,u+=i*M,c+=i*V,l+=i*K,h+=i*F,f+=i*z,p+=i*j,d+=i*G,g+=i*H,y+=i*q,m+=i*W,v+=i*Y,_+=i*Q,b+=i*X,C+=i*Z,o+=(i=e[2])*x,u+=i*O,c+=i*M,l+=i*V,h+=i*K,f+=i*F,p+=i*z,d+=i*j,g+=i*G,y+=i*H,m+=i*q,v+=i*W,_+=i*Y,b+=i*Q,C+=i*X,E+=i*Z,u+=(i=e[3])*x,c+=i*O,l+=i*M,h+=i*V,f+=i*K,p+=i*F,d+=i*z,g+=i*j,y+=i*G,m+=i*H,v+=i*q,_+=i*W,b+=i*Y,C+=i*Q,E+=i*X,S+=i*Z,c+=(i=e[4])*x,l+=i*O,h+=i*M,f+=i*V,p+=i*K,d+=i*F,g+=i*z,y+=i*j,m+=i*G,v+=i*H,_+=i*q,b+=i*W,C+=i*Y,E+=i*Q,S+=i*X,w+=i*Z,l+=(i=e[5])*x,h+=i*O,f+=i*M,p+=i*V,d+=i*K,g+=i*F,y+=i*z,m+=i*j,v+=i*G,_+=i*H,b+=i*q,C+=i*W,E+=i*Y,S+=i*Q,w+=i*X,A+=i*Z,h+=(i=e[6])*x,f+=i*O,p+=i*M,d+=i*V,g+=i*K,y+=i*F,m+=i*z,v+=i*j,_+=i*G,b+=i*H,C+=i*q,E+=i*W,S+=i*Y,w+=i*Q,A+=i*X,T+=i*Z,f+=(i=e[7])*x,p+=i*O,d+=i*M,g+=i*V,y+=i*K,m+=i*F,v+=i*z,_+=i*j,b+=i*G,C+=i*H,E+=i*q,S+=i*W,w+=i*Y,A+=i*Q,T+=i*X,k+=i*Z,p+=(i=e[8])*x,d+=i*O,g+=i*M,y+=i*V,m+=i*K,v+=i*F,_+=i*z,b+=i*j,C+=i*G,E+=i*H,S+=i*q,w+=i*W,A+=i*Y,T+=i*Q,k+=i*X,I+=i*Z,d+=(i=e[9])*x,g+=i*O,y+=i*M,m+=i*V,v+=i*K,_+=i*F,b+=i*z,C+=i*j,E+=i*G,S+=i*H,w+=i*q,A+=i*W,T+=i*Y,k+=i*Q,I+=i*X,B+=i*Z,g+=(i=e[10])*x,y+=i*O,m+=i*M,v+=i*V,_+=i*K,b+=i*F,C+=i*z,E+=i*j,S+=i*G,w+=i*H,A+=i*q,T+=i*W,k+=i*Y,I+=i*Q,B+=i*X,R+=i*Z,y+=(i=e[11])*x,m+=i*O,v+=i*M,_+=i*V,b+=i*K,C+=i*F,E+=i*z,S+=i*j,w+=i*G,A+=i*H,T+=i*q,k+=i*W,I+=i*Y,B+=i*Q,R+=i*X,N+=i*Z,m+=(i=e[12])*x,v+=i*O,_+=i*M,b+=i*V,C+=i*K,E+=i*F,S+=i*z,w+=i*j,A+=i*G,T+=i*H,k+=i*q,I+=i*W,B+=i*Y,R+=i*Q,N+=i*X,U+=i*Z,v+=(i=e[13])*x,_+=i*O,b+=i*M,C+=i*V,E+=i*K,S+=i*F,w+=i*z,A+=i*j,T+=i*G,k+=i*H,I+=i*q,B+=i*W,R+=i*Y,N+=i*Q,U+=i*X,L+=i*Z,_+=(i=e[14])*x,b+=i*O,C+=i*M,E+=i*V,S+=i*K,w+=i*F,A+=i*z,T+=i*j,k+=i*G,I+=i*H,B+=i*q,R+=i*W,N+=i*Y,U+=i*Q,L+=i*X,P+=i*Z,b+=(i=e[15])*x,s+=38*(E+=i*M),o+=38*(S+=i*V),u+=38*(w+=i*K),c+=38*(A+=i*F),l+=38*(T+=i*z),h+=38*(k+=i*j),f+=38*(I+=i*G),p+=38*(B+=i*H),d+=38*(R+=i*q),g+=38*(N+=i*W),y+=38*(U+=i*Y),m+=38*(L+=i*Q),v+=38*(P+=i*X),_+=38*(D+=i*Z),a=(i=(a+=38*(C+=i*O))+(n=1)+65535)-65536*(n=Math.floor(i/65536)),s=(i=s+n+65535)-65536*(n=Math.floor(i/65536)),o=(i=o+n+65535)-65536*(n=Math.floor(i/65536)),u=(i=u+n+65535)-65536*(n=Math.floor(i/65536)),c=(i=c+n+65535)-65536*(n=Math.floor(i/65536)),l=(i=l+n+65535)-65536*(n=Math.floor(i/65536)),h=(i=h+n+65535)-65536*(n=Math.floor(i/65536)),f=(i=f+n+65535)-65536*(n=Math.floor(i/65536)),p=(i=p+n+65535)-65536*(n=Math.floor(i/65536)),d=(i=d+n+65535)-65536*(n=Math.floor(i/65536)),g=(i=g+n+65535)-65536*(n=Math.floor(i/65536)),y=(i=y+n+65535)-65536*(n=Math.floor(i/65536)),m=(i=m+n+65535)-65536*(n=Math.floor(i/65536)),v=(i=v+n+65535)-65536*(n=Math.floor(i/65536)),_=(i=_+n+65535)-65536*(n=Math.floor(i/65536)),b=(i=b+n+65535)-65536*(n=Math.floor(i/65536)),a=(i=(a+=n-1+37*(n-1))+(n=1)+65535)-65536*(n=Math.floor(i/65536)),s=(i=s+n+65535)-65536*(n=Math.floor(i/65536)),o=(i=o+n+65535)-65536*(n=Math.floor(i/65536)),u=(i=u+n+65535)-65536*(n=Math.floor(i/65536)),c=(i=c+n+65535)-65536*(n=Math.floor(i/65536)),l=(i=l+n+65535)-65536*(n=Math.floor(i/65536)),h=(i=h+n+65535)-65536*(n=Math.floor(i/65536)),f=(i=f+n+65535)-65536*(n=Math.floor(i/65536)),p=(i=p+n+65535)-65536*(n=Math.floor(i/65536)),d=(i=d+n+65535)-65536*(n=Math.floor(i/65536)),g=(i=g+n+65535)-65536*(n=Math.floor(i/65536)),y=(i=y+n+65535)-65536*(n=Math.floor(i/65536)),m=(i=m+n+65535)-65536*(n=Math.floor(i/65536)),v=(i=v+n+65535)-65536*(n=Math.floor(i/65536)),_=(i=_+n+65535)-65536*(n=Math.floor(i/65536)),b=(i=b+n+65535)-65536*(n=Math.floor(i/65536)),a+=n-1+37*(n-1),t[0]=a,t[1]=s,t[2]=o,t[3]=u,t[4]=c,t[5]=l,t[6]=h,t[7]=f,t[8]=p,t[9]=d,t[10]=g,t[11]=y,t[12]=m,t[13]=v,t[14]=_,t[15]=b}}).call(this,r(3).Buffer)},function(t,e,r){var i=r(0);r(1),r(4),r(20),t.exports=i.kem=i.kem||{};var n=i.jsbn.BigInteger;function a(t,e,r,n){t.generate=function(t,a){for(var s=new i.util.ByteBuffer,o=Math.ceil(a/n)+r,u=new i.util.ByteBuffer,c=r;c<o;++c){u.putInt32(c),e.start(),e.update(t+u.getBytes());var l=e.digest();s.putBytes(l.getBytes(n))}return s.truncate(s.length()-a),s.getBytes()}}i.kem.rsa={},i.kem.rsa.create=function(t,e){var r=(e=e||{}).prng||i.random,a={encrypt:function(e,a){var s,o=Math.ceil(e.n.bitLength()/8);do{s=new n(i.util.bytesToHex(r.getBytesSync(o)),16).mod(e.n)}while(s.equals(n.ZERO));var u=o-(s=i.util.hexToBytes(s.toString(16))).length;return u>0&&(s=i.util.fillString(String.fromCharCode(0),u)+s),{encapsulation:e.encrypt(s,"NONE"),key:t.generate(s,a)}},decrypt:function(e,r,i){var n=e.decrypt(r,"NONE");return t.generate(n,i)}};return a},i.kem.kdf1=function(t,e){a(this,t,0,e||t.digestLength)},i.kem.kdf2=function(t,e){a(this,t,1,e||t.digestLength)}},function(t,e,r){t.exports=r(6),r(28),r(16),r(44),r(53)},function(t,e,r){var i=r(0);r(9),r(5),r(18),r(10),r(13),r(50),r(4),r(1),r(30);var n=i.asn1,a=t.exports=i.pkcs7=i.pkcs7||{};function s(t){var e={},r=[];if(!n.validate(t,a.asn1.recipientInfoValidator,e,r)){var s=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw s.errors=r,s}return{version:e.version.charCodeAt(0),issuer:i.pki.RDNAttributesAsArray(e.issuer),serialNumber:i.util.createBuffer(e.serial).toHex(),encryptedContent:{algorithm:n.derToOid(e.encAlgorithm),parameter:e.encParameter.value,content:e.encKey}}}function o(t){return n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,n.integerToDer(t.version).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[i.pki.distinguishedNameToAsn1({attributes:t.issuer}),n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,i.util.hexToBytes(t.serialNumber))]),n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(t.encryptedContent.algorithm).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.NULL,!1,"")]),n.create(n.Class.UNIVERSAL,n.Type.OCTETSTRING,!1,t.encryptedContent.content)])}function u(t){var e=n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,n.integerToDer(t.version).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[i.pki.distinguishedNameToAsn1({attributes:t.issuer}),n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,i.util.hexToBytes(t.serialNumber))]),n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(t.digestAlgorithm).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.NULL,!1,"")])]);if(t.authenticatedAttributesAsn1&&e.value.push(t.authenticatedAttributesAsn1),e.value.push(n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(t.signatureAlgorithm).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.NULL,!1,"")])),e.value.push(n.create(n.Class.UNIVERSAL,n.Type.OCTETSTRING,!1,t.signature)),t.unauthenticatedAttributes.length>0){for(var r=n.create(n.Class.CONTEXT_SPECIFIC,1,!0,[]),a=0;a<t.unauthenticatedAttributes.length;++a){var s=t.unauthenticatedAttributes[a];r.values.push(c(s))}e.value.push(r)}return e}function c(t){var e;if(t.type===i.pki.oids.contentType)e=n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(t.value).getBytes());else if(t.type===i.pki.oids.messageDigest)e=n.create(n.Class.UNIVERSAL,n.Type.OCTETSTRING,!1,t.value.bytes());else if(t.type===i.pki.oids.signingTime){var r=new Date("1950-01-01T00:00:00Z"),a=new Date("2050-01-01T00:00:00Z"),s=t.value;if("string"==typeof s){var o=Date.parse(s);s=isNaN(o)?13===s.length?n.utcTimeToDate(s):n.generalizedTimeToDate(s):new Date(o)}e=s>=r&&s<a?n.create(n.Class.UNIVERSAL,n.Type.UTCTIME,!1,n.dateToUtcTime(s)):n.create(n.Class.UNIVERSAL,n.Type.GENERALIZEDTIME,!1,n.dateToGeneralizedTime(s))}return n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(t.type).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.SET,!0,[e])])}function l(t,e,r){var a={};if(!n.validate(e,r,a,[])){var s=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw s.errors=s,s}if(n.derToOid(a.contentType)!==i.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(a.encryptedContent){var o="";if(i.util.isArray(a.encryptedContent))for(var u=0;u<a.encryptedContent.length;++u){if(a.encryptedContent[u].type!==n.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");o+=a.encryptedContent[u].value}else o=a.encryptedContent;t.encryptedContent={algorithm:n.derToOid(a.encAlgorithm),parameter:i.util.createBuffer(a.encParameter.value),content:i.util.createBuffer(o)}}if(a.content){o="";if(i.util.isArray(a.content))for(u=0;u<a.content.length;++u){if(a.content[u].type!==n.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");o+=a.content[u].value}else o=a.content;t.content=i.util.createBuffer(o)}return t.version=a.version.charCodeAt(0),t.rawCapture=a,a}function h(t){if(void 0===t.encryptedContent.key)throw new Error("Symmetric key not available.");if(void 0===t.content){var e;switch(t.encryptedContent.algorithm){case i.pki.oids["aes128-CBC"]:case i.pki.oids["aes192-CBC"]:case i.pki.oids["aes256-CBC"]:e=i.aes.createDecryptionCipher(t.encryptedContent.key);break;case i.pki.oids.desCBC:case i.pki.oids["des-EDE3-CBC"]:e=i.des.createDecryptionCipher(t.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+t.encryptedContent.algorithm)}if(e.start(t.encryptedContent.parameter),e.update(t.encryptedContent.content),!e.finish())throw new Error("Symmetric decryption failed.");t.content=e.output}}a.messageFromPem=function(t){var e=i.pem.decode(t)[0];if("PKCS7"!==e.type){var r=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw r.headerType=e.type,r}if(e.procType&&"ENCRYPTED"===e.procType.type)throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var s=n.fromDer(e.body);return a.messageFromAsn1(s)},a.messageToPem=function(t,e){var r={type:"PKCS7",body:n.toDer(t.toAsn1()).getBytes()};return i.pem.encode(r,{maxline:e})},a.messageFromAsn1=function(t){var e={},r=[];if(!n.validate(t,a.asn1.contentInfoValidator,e,r)){var s=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw s.errors=r,s}var o,u=n.derToOid(e.contentType);switch(u){case i.pki.oids.envelopedData:o=a.createEnvelopedData();break;case i.pki.oids.encryptedData:o=a.createEncryptedData();break;case i.pki.oids.signedData:o=a.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+u+" is not (yet) supported.")}return o.fromAsn1(e.content.value[0]),o},a.createSignedData=function(){var t=null;return t={type:i.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(e){if(l(t,e,a.asn1.signedDataValidator),t.certificates=[],t.crls=[],t.digestAlgorithmIdentifiers=[],t.contentInfo=null,t.signerInfos=[],t.rawCapture.certificates)for(var r=t.rawCapture.certificates.value,n=0;n<r.length;++n)t.certificates.push(i.pki.certificateFromAsn1(r[n]))},toAsn1:function(){t.contentInfo||t.sign();for(var e=[],r=0;r<t.certificates.length;++r)e.push(i.pki.certificateToAsn1(t.certificates[r]));var a=[],s=n.create(n.Class.CONTEXT_SPECIFIC,0,!0,[n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,n.integerToDer(t.version).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.SET,!0,t.digestAlgorithmIdentifiers),t.contentInfo])]);return e.length>0&&s.value[0].value.push(n.create(n.Class.CONTEXT_SPECIFIC,0,!0,e)),a.length>0&&s.value[0].value.push(n.create(n.Class.CONTEXT_SPECIFIC,1,!0,a)),s.value[0].value.push(n.create(n.Class.UNIVERSAL,n.Type.SET,!0,t.signerInfos)),n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(t.type).getBytes()),s])},addSigner:function(e){var r=e.issuer,n=e.serialNumber;if(e.certificate){var a=e.certificate;"string"==typeof a&&(a=i.pki.certificateFromPem(a)),r=a.issuer.attributes,n=a.serialNumber}var s=e.key;if(!s)throw new Error("Could not add PKCS#7 signer; no private key specified.");"string"==typeof s&&(s=i.pki.privateKeyFromPem(s));var o=e.digestAlgorithm||i.pki.oids.sha1;switch(o){case i.pki.oids.sha1:case i.pki.oids.sha256:case i.pki.oids.sha384:case i.pki.oids.sha512:case i.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+o)}var u=e.authenticatedAttributes||[];if(u.length>0){for(var c=!1,l=!1,h=0;h<u.length;++h){var f=u[h];if(c||f.type!==i.pki.oids.contentType){if(l||f.type!==i.pki.oids.messageDigest);else if(l=!0,c)break}else if(c=!0,l)break}if(!c||!l)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}t.signers.push({key:s,version:1,issuer:r,serialNumber:n,digestAlgorithm:o,signatureAlgorithm:i.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:u,unauthenticatedAttributes:[]})},sign:function(e){var r;(e=e||{},"object"!=typeof t.content||null===t.contentInfo)&&(t.contentInfo=n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(i.pki.oids.data).getBytes())]),"content"in t&&(t.content instanceof i.util.ByteBuffer?r=t.content.bytes():"string"==typeof t.content&&(r=i.util.encodeUtf8(t.content)),e.detached?t.detachedContent=n.create(n.Class.UNIVERSAL,n.Type.OCTETSTRING,!1,r):t.contentInfo.value.push(n.create(n.Class.CONTEXT_SPECIFIC,0,!0,[n.create(n.Class.UNIVERSAL,n.Type.OCTETSTRING,!1,r)]))));0!==t.signers.length&&function(e){var r;r=t.detachedContent?t.detachedContent:(r=t.contentInfo.value[1]).value[0];if(!r)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var a=n.derToOid(t.contentInfo.value[0].value),s=n.toDer(r);for(var o in s.getByte(),n.getBerValueLength(s),s=s.getBytes(),e)e[o].start().update(s);for(var l=new Date,h=0;h<t.signers.length;++h){var f=t.signers[h];if(0===f.authenticatedAttributes.length){if(a!==i.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{f.authenticatedAttributesAsn1=n.create(n.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var p=n.create(n.Class.UNIVERSAL,n.Type.SET,!0,[]),d=0;d<f.authenticatedAttributes.length;++d){var g=f.authenticatedAttributes[d];g.type===i.pki.oids.messageDigest?g.value=e[f.digestAlgorithm].digest():g.type===i.pki.oids.signingTime&&(g.value||(g.value=l)),p.value.push(c(g)),f.authenticatedAttributesAsn1.value.push(c(g))}s=n.toDer(p).getBytes(),f.md.start().update(s)}f.signature=f.key.sign(f.md,"RSASSA-PKCS1-V1_5")}t.signerInfos=function(t){for(var e=[],r=0;r<t.length;++r)e.push(u(t[r]));return e}(t.signers)}(function(){for(var e={},r=0;r<t.signers.length;++r){var a=t.signers[r],s=a.digestAlgorithm;s in e||(e[s]=i.md[i.pki.oids[s]].create()),0===a.authenticatedAttributes.length?a.md=e[s]:a.md=i.md[i.pki.oids[s]].create()}for(var s in t.digestAlgorithmIdentifiers=[],e)t.digestAlgorithmIdentifiers.push(n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(s).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.NULL,!1,"")]));return e}())},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(e){"string"==typeof e&&(e=i.pki.certificateFromPem(e)),t.certificates.push(e)},addCertificateRevokationList:function(t){throw new Error("PKCS#7 CRL support not yet implemented.")}}},a.createEncryptedData=function(){var t=null;return t={type:i.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:i.pki.oids["aes256-CBC"]},fromAsn1:function(e){l(t,e,a.asn1.encryptedDataValidator)},decrypt:function(e){void 0!==e&&(t.encryptedContent.key=e),h(t)}}},a.createEnvelopedData=function(){var t=null;return t={type:i.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:i.pki.oids["aes256-CBC"]},fromAsn1:function(e){var r=l(t,e,a.asn1.envelopedDataValidator);t.recipients=function(t){for(var e=[],r=0;r<t.length;++r)e.push(s(t[r]));return e}(r.recipientInfos.value)},toAsn1:function(){return n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(t.type).getBytes()),n.create(n.Class.CONTEXT_SPECIFIC,0,!0,[n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,n.integerToDer(t.version).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.SET,!0,function(t){for(var e=[],r=0;r<t.length;++r)e.push(o(t[r]));return e}(t.recipients)),n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,function(t){return[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(i.pki.oids.data).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(t.algorithm).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.OCTETSTRING,!1,t.parameter.getBytes())]),n.create(n.Class.CONTEXT_SPECIFIC,0,!0,[n.create(n.Class.UNIVERSAL,n.Type.OCTETSTRING,!1,t.content.getBytes())])]}(t.encryptedContent))])])])},findRecipient:function(e){for(var r=e.issuer.attributes,i=0;i<t.recipients.length;++i){var n=t.recipients[i],a=n.issuer;if(n.serialNumber===e.serialNumber&&a.length===r.length){for(var s=!0,o=0;o<r.length;++o)if(a[o].type!==r[o].type||a[o].value!==r[o].value){s=!1;break}if(s)return n}}return null},decrypt:function(e,r){if(void 0===t.encryptedContent.key&&void 0!==e&&void 0!==r)switch(e.encryptedContent.algorithm){case i.pki.oids.rsaEncryption:case i.pki.oids.desCBC:var n=r.decrypt(e.encryptedContent.content);t.encryptedContent.key=i.util.createBuffer(n);break;default:throw new Error("Unsupported asymmetric cipher, OID "+e.encryptedContent.algorithm)}h(t)},addRecipient:function(e){t.recipients.push({version:0,issuer:e.issuer.attributes,serialNumber:e.serialNumber,encryptedContent:{algorithm:i.pki.oids.rsaEncryption,key:e.publicKey}})},encrypt:function(e,r){if(void 0===t.encryptedContent.content){var n,a,s;switch(r=r||t.encryptedContent.algorithm,e=e||t.encryptedContent.key,r){case i.pki.oids["aes128-CBC"]:n=16,a=16,s=i.aes.createEncryptionCipher;break;case i.pki.oids["aes192-CBC"]:n=24,a=16,s=i.aes.createEncryptionCipher;break;case i.pki.oids["aes256-CBC"]:n=32,a=16,s=i.aes.createEncryptionCipher;break;case i.pki.oids["des-EDE3-CBC"]:n=24,a=8,s=i.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+r)}if(void 0===e)e=i.util.createBuffer(i.random.getBytes(n));else if(e.length()!=n)throw new Error("Symmetric key has wrong length; got "+e.length()+" bytes, expected "+n+".");t.encryptedContent.algorithm=r,t.encryptedContent.key=e,t.encryptedContent.parameter=i.util.createBuffer(i.random.getBytes(a));var o=s(e);if(o.start(t.encryptedContent.parameter.copy()),o.update(t.content),!o.finish())throw new Error("Symmetric encryption failed.");t.encryptedContent.content=o.output}for(var u=0;u<t.recipients.length;++u){var c=t.recipients[u];if(void 0===c.encryptedContent.content)switch(c.encryptedContent.algorithm){case i.pki.oids.rsaEncryption:c.encryptedContent.content=c.encryptedContent.key.encrypt(t.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+c.encryptedContent.algorithm)}}}}}},function(t,e,r){var i=r(0);r(9),r(15),r(28),r(16),r(1);var n=t.exports=i.ssh=i.ssh||{};function a(t,e){var r=e.toString(16);r[0]>="8"&&(r="00"+r);var n=i.util.hexToBytes(r);t.putInt32(n.length),t.putBytes(n)}function s(t,e){t.putInt32(e.length),t.putString(e)}function o(){for(var t=i.md.sha1.create(),e=arguments.length,r=0;r<e;++r)t.update(arguments[r]);return t.digest()}n.privateKeyToPutty=function(t,e,r){r=r||"";var n=""===(e=e||"")?"none":"aes256-cbc",u="PuTTY-User-Key-File-2: ssh-rsa\r\n";u+="Encryption: "+n+"\r\n",u+="Comment: "+r+"\r\n";var c=i.util.createBuffer();s(c,"ssh-rsa"),a(c,t.e),a(c,t.n);var l=i.util.encode64(c.bytes(),64),h=Math.floor(l.length/66)+1;u+="Public-Lines: "+h+"\r\n",u+=l;var f,p=i.util.createBuffer();if(a(p,t.d),a(p,t.p),a(p,t.q),a(p,t.qInv),e){var d=p.length()+16-1;d-=d%16;var g=o(p.bytes());g.truncate(g.length()-d+p.length()),p.putBuffer(g);var y=i.util.createBuffer();y.putBuffer(o("\0\0\0\0",e)),y.putBuffer(o("\0\0\0",e));var m=i.aes.createEncryptionCipher(y.truncate(8),"CBC");m.start(i.util.createBuffer().fillWithByte(0,16)),m.update(p.copy()),m.finish();var v=m.output;v.truncate(16),f=i.util.encode64(v.bytes(),64)}else f=i.util.encode64(p.bytes(),64);u+="\r\nPrivate-Lines: "+(h=Math.floor(f.length/66)+1)+"\r\n",u+=f;var _=o("putty-private-key-file-mac-key",e),b=i.util.createBuffer();s(b,"ssh-rsa"),s(b,n),s(b,r),b.putInt32(c.length()),b.putBuffer(c),b.putInt32(p.length()),b.putBuffer(p);var C=i.hmac.create();return C.start("sha1",_),C.update(b.bytes()),u+="\r\nPrivate-MAC: "+C.digest().toHex()+"\r\n"},n.publicKeyToOpenSSH=function(t,e){e=e||"";var r=i.util.createBuffer();return s(r,"ssh-rsa"),a(r,t.e),a(r,t.n),"ssh-rsa "+i.util.encode64(r.bytes())+" "+e},n.privateKeyToOpenSSH=function(t,e){return e?i.pki.encryptRsaPrivateKey(t,e,{legacy:!0,algorithm:"aes128"}):i.pki.privateKeyToPem(t)},n.getPublicKeyFingerprint=function(t,e){var r=(e=e||{}).md||i.md.md5.create(),n=i.util.createBuffer();s(n,"ssh-rsa"),a(n,t.e),a(n,t.n),r.start(),r.update(n.getBytes());var o=r.digest();if("hex"===e.encoding){var u=o.toHex();return e.delimiter?u.match(/.{2}/g).join(e.delimiter):u}if("binary"===e.encoding)return o.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".');return o}},function(t,e,r){var i=r(0);r(52),r(54),r(1);var n="forge.task",a={},s=0;i.debug.set(n,"tasks",a);var o={};i.debug.set(n,"queues",o);var u="ready",c="running",l="blocked",h="sleeping",f="done",p="error",d={ready:{}};d.ready.stop=u,d.ready.start=c,d.ready.cancel=f,d.ready.fail=p,d.running={},d.running.stop=u,d.running.start=c,d.running.block=l,d.running.unblock=c,d.running.sleep=h,d.running.wakeup=c,d.running.cancel=f,d.running.fail=p,d.blocked={},d.blocked.stop=l,d.blocked.start=l,d.blocked.block=l,d.blocked.unblock=l,d.blocked.sleep=l,d.blocked.wakeup=l,d.blocked.cancel=f,d.blocked.fail=p,d.sleeping={},d.sleeping.stop=h,d.sleeping.start=h,d.sleeping.block=h,d.sleeping.unblock=h,d.sleeping.sleep=h,d.sleeping.wakeup=h,d.sleeping.cancel=f,d.sleeping.fail=p,d.done={},d.done.stop=f,d.done.start=f,d.done.block=f,d.done.unblock=f,d.done.sleep=f,d.done.wakeup=f,d.done.cancel=f,d.done.fail=p,d.error={},d.error.stop=p,d.error.start=p,d.error.block=p,d.error.unblock=p,d.error.sleep=p,d.error.wakeup=p,d.error.cancel=p,d.error.fail=p;var g=function(t){this.id=-1,this.name=t.name||"?",this.parent=t.parent||null,this.run=t.run,this.subtasks=[],this.error=!1,this.state=u,this.blocks=0,this.timeoutId=null,this.swapTime=null,this.userData=null,this.id=s++,a[this.id]=this};g.prototype.debug=function(t){t=t||"",i.log.debug(n,t,"[%s][%s] task:",this.id,this.name,this,"subtasks:",this.subtasks.length,"queue:",o)},g.prototype.next=function(t,e){"function"==typeof t&&(e=t,t=this.name);var r=new g({run:e,name:t,parent:this});return r.state=c,r.type=this.type,r.successCallback=this.successCallback||null,r.failureCallback=this.failureCallback||null,this.subtasks.push(r),this},g.prototype.parallel=function(t,e){return i.util.isArray(t)&&(e=t,t=this.name),this.next(t,function(r){var n=r;n.block(e.length);for(var a=function(t,r){i.task.start({type:t,run:function(t){e[r](t)},success:function(t){n.unblock()},failure:function(t){n.unblock()}})},s=0;s<e.length;s++){a(t+"__parallel-"+r.id+"-"+s,s)}})},g.prototype.stop=function(){this.state=d[this.state].stop},g.prototype.start=function(){this.error=!1,this.state=d[this.state].start,this.state===c&&(this.start=new Date,this.run(this),y(this,0))},g.prototype.block=function(t){t=void 0===t?1:t,this.blocks+=t,this.blocks>0&&(this.state=d[this.state].block)},g.prototype.unblock=function(t){return t=void 0===t?1:t,this.blocks-=t,0===this.blocks&&this.state!==f&&(this.state=c,y(this,0)),this.blocks},g.prototype.sleep=function(t){t=void 0===t?0:t,this.state=d[this.state].sleep;var e=this;this.timeoutId=setTimeout(function(){e.timeoutId=null,e.state=c,y(e,0)},t)},g.prototype.wait=function(t){t.wait(this)},g.prototype.wakeup=function(){this.state===h&&(cancelTimeout(this.timeoutId),this.timeoutId=null,this.state=c,y(this,0))},g.prototype.cancel=function(){this.state=d[this.state].cancel,this.permitsNeeded=0,null!==this.timeoutId&&(cancelTimeout(this.timeoutId),this.timeoutId=null),this.subtasks=[]},g.prototype.fail=function(t){if(this.error=!0,m(this,!0),t)t.error=this.error,t.swapTime=this.swapTime,t.userData=this.userData,y(t,0);else{if(null!==this.parent){for(var e=this.parent;null!==e.parent;)e.error=this.error,e.swapTime=this.swapTime,e.userData=this.userData,e=e.parent;m(e,!0)}this.failureCallback&&this.failureCallback(this)}};var y=function(t,e){var r=e>30||+new Date-t.swapTime>20,i=function(e){if(e++,t.state===c)if(r&&(t.swapTime=+new Date),t.subtasks.length>0){var i=t.subtasks.shift();i.error=t.error,i.swapTime=t.swapTime,i.userData=t.userData,i.run(i),i.error||y(i,e)}else m(t),t.error||null!==t.parent&&(t.parent.error=t.error,t.parent.swapTime=t.swapTime,t.parent.userData=t.userData,y(t.parent,e))};r?setTimeout(i,0):i(e)},m=function(t,e){t.state=f,delete a[t.id],null===t.parent&&(t.type in o?0===o[t.type].length?i.log.error(n,"[%s][%s] task queue empty [%s]",t.id,t.name,t.type):o[t.type][0]!==t?i.log.error(n,"[%s][%s] task not first in queue [%s]",t.id,t.name,t.type):(o[t.type].shift(),0===o[t.type].length?delete o[t.type]:o[t.type][0].start()):i.log.error(n,"[%s][%s] task queue missing [%s]",t.id,t.name,t.type),e||(t.error&&t.failureCallback?t.failureCallback(t):!t.error&&t.successCallback&&t.successCallback(t)))};t.exports=i.task=i.task||{},i.task.start=function(t){var e=new g({run:t.run,name:t.name||"?"});e.type=t.type,e.successCallback=t.success||null,e.failureCallback=t.failure||null,e.type in o?o[t.type].push(e):(o[e.type]=[e],function(t){t.error=!1,t.state=d[t.state].start,setTimeout(function(){t.state===c&&(t.swapTime=+new Date,t.run(t),y(t,0))},0)}(e))},i.task.cancel=function(t){t in o&&(o[t]=[o[t][0]])},i.task.createCondition=function(){var t={tasks:{},wait:function(e){e.id in t.tasks||(e.block(),t.tasks[e.id]=e)},notify:function(){var e=t.tasks;for(var r in t.tasks={},e)e[r].unblock()}};return t}},function(t,e,r){var i=r(84);e.descriptorChecksum=function(t){return i(t,0).toNumber()>>8&255},e.blockChecksum=function(t){return i(t,0).toNumber()},e.streamChecksum=function(t,e){return null===t?e.digest().toNumber():(null===e&&(e=i(0)),e.update(t))},e.readInt32LE=function(t,e){return t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24},e.bindings=r(33)},function(t,e,r){(function(i){var n;!function(a){var s=r(85).UINT32;s.prototype.xxh_update=function(t,e){var r,i,n=u._low,a=u._high;r=(i=t*n)>>>16,r+=e*n,r&=65535,r+=t*a;var s=this._low+(65535&i),c=s>>>16,l=(c+=this._high+(65535&r))<<16|65535&s;s=65535&(l=l<<13|l>>>19),c=l>>>16,n=o._low,a=o._high,r=(i=s*n)>>>16,r+=c*n,r&=65535,r+=s*a,this._low=65535&i,this._high=65535&r};var o=s("2654435761"),u=s("2246822519"),c=s("3266489917"),l=s("668265263"),h=s("374761393"),f=o.clone().add(u);function p(){return 2==arguments.length?new p(arguments[1]).update(arguments[0]).digest():this instanceof p?void d.call(this,arguments[0]):new p(arguments[0])}function d(t){return this.seed=t instanceof s?t.clone():s(t),this.v1=this.seed.clone().add(f),this.v2=this.seed.clone().add(u),this.v3=this.seed.clone(),this.v4=this.seed.clone().subtract(o),this.total_len=0,this.memsize=0,this.memory=null,this}p.prototype.init=d,p.prototype.update=function(t){var e,r="string"==typeof t;r&&(t=function(t){for(var e=[],r=0,i=t.length;r<i;r++){var n=t.charCodeAt(r);n<128?e.push(n):n<2048?e.push(192|n>>6,128|63&n):n<55296||n>=57344?e.push(224|n>>12,128|n>>6&63,128|63&n):(r++,n=65536+((1023&n)<<10|1023&t.charCodeAt(r)),e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|63&n))}return new Uint8Array(e)}(t),r=!1,e=!0),"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer&&(e=!0,t=new Uint8Array(t));var n=0,a=t.length,s=n+a;if(0==a)return this;if(this.total_len+=a,0==this.memsize&&(this.memory=r?"":e?new Uint8Array(16):new i(16)),this.memsize+a<16)return r?this.memory+=t:e?this.memory.set(t.subarray(0,a),this.memsize):t.copy(this.memory,this.memsize,0,a),this.memsize+=a,this;if(this.memsize>0){r?this.memory+=t.slice(0,16-this.memsize):e?this.memory.set(t.subarray(0,16-this.memsize),this.memsize):t.copy(this.memory,this.memsize,0,16-this.memsize);var o=0;r?(this.v1.xxh_update(this.memory.charCodeAt(o+1)<<8|this.memory.charCodeAt(o),this.memory.charCodeAt(o+3)<<8|this.memory.charCodeAt(o+2)),o+=4,this.v2.xxh_update(this.memory.charCodeAt(o+1)<<8|this.memory.charCodeAt(o),this.memory.charCodeAt(o+3)<<8|this.memory.charCodeAt(o+2)),o+=4,this.v3.xxh_update(this.memory.charCodeAt(o+1)<<8|this.memory.charCodeAt(o),this.memory.charCodeAt(o+3)<<8|this.memory.charCodeAt(o+2)),o+=4,this.v4.xxh_update(this.memory.charCodeAt(o+1)<<8|this.memory.charCodeAt(o),this.memory.charCodeAt(o+3)<<8|this.memory.charCodeAt(o+2))):(this.v1.xxh_update(this.memory[o+1]<<8|this.memory[o],this.memory[o+3]<<8|this.memory[o+2]),o+=4,this.v2.xxh_update(this.memory[o+1]<<8|this.memory[o],this.memory[o+3]<<8|this.memory[o+2]),o+=4,this.v3.xxh_update(this.memory[o+1]<<8|this.memory[o],this.memory[o+3]<<8|this.memory[o+2]),o+=4,this.v4.xxh_update(this.memory[o+1]<<8|this.memory[o],this.memory[o+3]<<8|this.memory[o+2])),n+=16-this.memsize,this.memsize=0,r&&(this.memory="")}if(n<=s-16){var u=s-16;do{r?(this.v1.xxh_update(t.charCodeAt(n+1)<<8|t.charCodeAt(n),t.charCodeAt(n+3)<<8|t.charCodeAt(n+2)),n+=4,this.v2.xxh_update(t.charCodeAt(n+1)<<8|t.charCodeAt(n),t.charCodeAt(n+3)<<8|t.charCodeAt(n+2)),n+=4,this.v3.xxh_update(t.charCodeAt(n+1)<<8|t.charCodeAt(n),t.charCodeAt(n+3)<<8|t.charCodeAt(n+2)),n+=4,this.v4.xxh_update(t.charCodeAt(n+1)<<8|t.charCodeAt(n),t.charCodeAt(n+3)<<8|t.charCodeAt(n+2))):(this.v1.xxh_update(t[n+1]<<8|t[n],t[n+3]<<8|t[n+2]),n+=4,this.v2.xxh_update(t[n+1]<<8|t[n],t[n+3]<<8|t[n+2]),n+=4,this.v3.xxh_update(t[n+1]<<8|t[n],t[n+3]<<8|t[n+2]),n+=4,this.v4.xxh_update(t[n+1]<<8|t[n],t[n+3]<<8|t[n+2])),n+=4}while(n<=u)}return n<s&&(r?this.memory+=t.slice(n):e?this.memory.set(t.subarray(n,s),this.memsize):t.copy(this.memory,this.memsize,n,s),this.memsize=s-n),this},p.prototype.digest=function(){var t,e,r=this.memory,i="string"==typeof r,n=0,a=this.memsize,f=new s;for((t=this.total_len>=16?this.v1.rotl(1).add(this.v2.rotl(7).add(this.v3.rotl(12).add(this.v4.rotl(18)))):this.seed.add(h)).add(f.fromNumber(this.total_len));n<=a-4;)i?f.fromBits(r.charCodeAt(n+1)<<8|r.charCodeAt(n),r.charCodeAt(n+3)<<8|r.charCodeAt(n+2)):f.fromBits(r[n+1]<<8|r[n],r[n+3]<<8|r[n+2]),t.add(f.multiply(c)).rotl(17).multiply(l),n+=4;for(;n<a;)f.fromBits(i?r.charCodeAt(n++):r[n++],0),t.add(f.multiply(h)).rotl(11).multiply(o);return e=t.clone().shiftRight(15),t.xor(e).multiply(u),e=t.clone().shiftRight(13),t.xor(e).multiply(c),e=t.clone().shiftRight(16),t.xor(e),this.init(this.seed),t},void 0===(n=function(){return p}.apply(e,[]))||(t.exports=n)}()}).call(this,r(3).Buffer)},function(t,e,r){e.UINT32=r(86),e.UINT64=r(87)},function(t,e,r){var i;!function(r){n(Math.pow(36,5)),n(Math.pow(16,7)),n(Math.pow(10,9)),n(Math.pow(2,30)),n(36),n(16),n(10),n(2);function n(t,e){return this instanceof n?(this._low=0,this._high=0,this.remainder=null,void 0===e?s.call(this,t):"string"==typeof t?o.call(this,t,e):void a.call(this,t,e)):new n(t,e)}function a(t,e){return this._low=0|t,this._high=0|e,this}function s(t){return this._low=65535&t,this._high=t>>>16,this}function o(t,e){var r=parseInt(t,e||10);return this._low=65535&r,this._high=r>>>16,this}n.prototype.fromBits=a,n.prototype.fromNumber=s,n.prototype.fromString=o,n.prototype.toNumber=function(){return 65536*this._high+this._low},n.prototype.toString=function(t){return this.toNumber().toString(t||10)},n.prototype.add=function(t){var e=this._low+t._low,r=e>>>16;return r+=this._high+t._high,this._low=65535&e,this._high=65535&r,this},n.prototype.subtract=function(t){return this.add(t.clone().negate())},n.prototype.multiply=function(t){var e,r,i=this._high,n=this._low,a=t._high,s=t._low;return e=(r=n*s)>>>16,e+=i*s,e&=65535,e+=n*a,this._low=65535&r,this._high=65535&e,this},n.prototype.div=function(t){if(0==t._low&&0==t._high)throw Error("division by zero");if(0==t._high&&1==t._low)return this.remainder=new n(0),this;if(t.gt(this))return this.remainder=this.clone(),this._low=0,this._high=0,this;if(this.eq(t))return this.remainder=new n(0),this._low=1,this._high=0,this;for(var e=t.clone(),r=-1;!this.lt(e);)e.shiftLeft(1,!0),r++;for(this.remainder=this.clone(),this._low=0,this._high=0;r>=0;r--)e.shiftRight(1),this.remainder.lt(e)||(this.remainder.subtract(e),r>=16?this._high|=1<<r-16:this._low|=1<<r);return this},n.prototype.negate=function(){var t=1+(65535&~this._low);return this._low=65535&t,this._high=~this._high+(t>>>16)&65535,this},n.prototype.equals=n.prototype.eq=function(t){return this._low==t._low&&this._high==t._high},n.prototype.greaterThan=n.prototype.gt=function(t){return this._high>t._high||!(this._high<t._high)&&this._low>t._low},n.prototype.lessThan=n.prototype.lt=function(t){return this._high<t._high||!(this._high>t._high)&&this._low<t._low},n.prototype.or=function(t){return this._low|=t._low,this._high|=t._high,this},n.prototype.and=function(t){return this._low&=t._low,this._high&=t._high,this},n.prototype.not=function(){return this._low=65535&~this._low,this._high=65535&~this._high,this},n.prototype.xor=function(t){return this._low^=t._low,this._high^=t._high,this},n.prototype.shiftRight=n.prototype.shiftr=function(t){return t>16?(this._low=this._high>>t-16,this._high=0):16==t?(this._low=this._high,this._high=0):(this._low=this._low>>t|this._high<<16-t&65535,this._high>>=t),this},n.prototype.shiftLeft=n.prototype.shiftl=function(t,e){return t>16?(this._high=this._low<<t-16,this._low=0,e||(this._high&=65535)):16==t?(this._high=this._low,this._low=0):(this._high=this._high<<t|this._low>>16-t,this._low=this._low<<t&65535,e||(this._high&=65535)),this},n.prototype.rotateLeft=n.prototype.rotl=function(t){var e=this._high<<16|this._low;return e=e<<t|e>>>32-t,this._low=65535&e,this._high=e>>>16,this},n.prototype.rotateRight=n.prototype.rotr=function(t){var e=this._high<<16|this._low;return e=e>>>t|e<<32-t,this._low=65535&e,this._high=e>>>16,this},n.prototype.clone=function(){return new n(this._low,this._high)},void 0===(i=function(){return n}.apply(e,[]))||(t.exports=i)}()},function(t,e,r){var i;!function(r){var n={16:s(Math.pow(16,5)),10:s(Math.pow(10,5)),2:s(Math.pow(2,5))},a={16:s(16),10:s(10),2:s(2)};function s(t,e,r,i){return this instanceof s?(this.remainder=null,"string"==typeof t?c.call(this,t,e):void 0===e?u.call(this,t):void o.apply(this,arguments)):new s(t,e,r,i)}function o(t,e,r,i){return void 0===r?(this._a00=65535&t,this._a16=t>>>16,this._a32=65535&e,this._a48=e>>>16,this):(this._a00=0|t,this._a16=0|e,this._a32=0|r,this._a48=0|i,this)}function u(t){return this._a00=65535&t,this._a16=t>>>16,this._a32=0,this._a48=0,this}function c(t,e){e=e||10,this._a00=0,this._a16=0,this._a32=0,this._a48=0;for(var r=n[e]||new s(Math.pow(e,5)),i=0,a=t.length;i<a;i+=5){var o=Math.min(5,a-i),u=parseInt(t.slice(i,i+o),e);this.multiply(o<5?new s(Math.pow(e,o)):r).add(new s(u))}return this}s.prototype.fromBits=o,s.prototype.fromNumber=u,s.prototype.fromString=c,s.prototype.toNumber=function(){return 65536*this._a16+this._a00},s.prototype.toString=function(t){var e=a[t=t||10]||new s(t);if(!this.gt(e))return this.toNumber().toString(t);for(var r=this.clone(),i=new Array(64),n=63;n>=0&&(r.div(e),i[n]=r.remainder.toNumber().toString(t),r.gt(e));n--);return i[n-1]=r.toNumber().toString(t),i.join("")},s.prototype.add=function(t){var e=this._a00+t._a00,r=e>>>16,i=(r+=this._a16+t._a16)>>>16,n=(i+=this._a32+t._a32)>>>16;return n+=this._a48+t._a48,this._a00=65535&e,this._a16=65535&r,this._a32=65535&i,this._a48=65535&n,this},s.prototype.subtract=function(t){return this.add(t.clone().negate())},s.prototype.multiply=function(t){var e=this._a00,r=this._a16,i=this._a32,n=this._a48,a=t._a00,s=t._a16,o=t._a32,u=t._a48,c=e*a,l=c>>>16,h=(l+=e*s)>>>16;l&=65535,h+=(l+=r*a)>>>16;var f=(h+=e*o)>>>16;return h&=65535,f+=(h+=r*s)>>>16,h&=65535,f+=(h+=i*a)>>>16,f+=e*u,f&=65535,f+=r*o,f&=65535,f+=i*s,f&=65535,f+=n*a,this._a00=65535&c,this._a16=65535&l,this._a32=65535&h,this._a48=65535&f,this},s.prototype.div=function(t){if(0==t._a16&&0==t._a32&&0==t._a48){if(0==t._a00)throw Error("division by zero");if(1==t._a00)return this.remainder=new s(0),this}if(t.gt(this))return this.remainder=this.clone(),this._a00=0,this._a16=0,this._a32=0,this._a48=0,this;if(this.eq(t))return this.remainder=new s(0),this._a00=1,this._a16=0,this._a32=0,this._a48=0,this;for(var e=t.clone(),r=-1;!this.lt(e);)e.shiftLeft(1,!0),r++;for(this.remainder=this.clone(),this._a00=0,this._a16=0,this._a32=0,this._a48=0;r>=0;r--)e.shiftRight(1),this.remainder.lt(e)||(this.remainder.subtract(e),r>=48?this._a48|=1<<r-48:r>=32?this._a32|=1<<r-32:r>=16?this._a16|=1<<r-16:this._a00|=1<<r);return this},s.prototype.negate=function(){var t=1+(65535&~this._a00);return this._a00=65535&t,t=(65535&~this._a16)+(t>>>16),this._a16=65535&t,t=(65535&~this._a32)+(t>>>16),this._a32=65535&t,this._a48=~this._a48+(t>>>16)&65535,this},s.prototype.equals=s.prototype.eq=function(t){return this._a48==t._a48&&this._a00==t._a00&&this._a32==t._a32&&this._a16==t._a16},s.prototype.greaterThan=s.prototype.gt=function(t){return this._a48>t._a48||!(this._a48<t._a48)&&(this._a32>t._a32||!(this._a32<t._a32)&&(this._a16>t._a16||!(this._a16<t._a16)&&this._a00>t._a00))},s.prototype.lessThan=s.prototype.lt=function(t){return this._a48<t._a48||!(this._a48>t._a48)&&(this._a32<t._a32||!(this._a32>t._a32)&&(this._a16<t._a16||!(this._a16>t._a16)&&this._a00<t._a00))},s.prototype.or=function(t){return this._a00|=t._a00,this._a16|=t._a16,this._a32|=t._a32,this._a48|=t._a48,this},s.prototype.and=function(t){return this._a00&=t._a00,this._a16&=t._a16,this._a32&=t._a32,this._a48&=t._a48,this},s.prototype.xor=function(t){return this._a00^=t._a00,this._a16^=t._a16,this._a32^=t._a32,this._a48^=t._a48,this},s.prototype.not=function(){return this._a00=65535&~this._a00,this._a16=65535&~this._a16,this._a32=65535&~this._a32,this._a48=65535&~this._a48,this},s.prototype.shiftRight=s.prototype.shiftr=function(t){return(t%=64)>=48?(this._a00=this._a48>>t-48,this._a16=0,this._a32=0,this._a48=0):t>=32?(t-=32,this._a00=65535&(this._a32>>t|this._a48<<16-t),this._a16=this._a48>>t&65535,this._a32=0,this._a48=0):t>=16?(t-=16,this._a00=65535&(this._a16>>t|this._a32<<16-t),this._a16=65535&(this._a32>>t|this._a48<<16-t),this._a32=this._a48>>t&65535,this._a48=0):(this._a00=65535&(this._a00>>t|this._a16<<16-t),this._a16=65535&(this._a16>>t|this._a32<<16-t),this._a32=65535&(this._a32>>t|this._a48<<16-t),this._a48=this._a48>>t&65535),this},s.prototype.shiftLeft=s.prototype.shiftl=function(t,e){return(t%=64)>=48?(this._a48=this._a00<<t-48,this._a32=0,this._a16=0,this._a00=0):t>=32?(t-=32,this._a48=this._a16<<t|this._a00>>16-t,this._a32=this._a00<<t&65535,this._a16=0,this._a00=0):t>=16?(t-=16,this._a48=this._a32<<t|this._a16>>16-t,this._a32=65535&(this._a16<<t|this._a00>>16-t),this._a16=this._a00<<t&65535,this._a00=0):(this._a48=this._a48<<t|this._a32>>16-t,this._a32=65535&(this._a32<<t|this._a16>>16-t),this._a16=65535&(this._a16<<t|this._a00>>16-t),this._a00=this._a00<<t&65535),e||(this._a48&=65535),this},s.prototype.rotateLeft=s.prototype.rotl=function(t){if(0==(t%=64))return this;if(t>=32){var e=this._a00;if(this._a00=this._a32,this._a32=e,e=this._a48,this._a48=this._a16,this._a16=e,32==t)return this;t-=32}var r=this._a48<<16|this._a32,i=this._a16<<16|this._a00,n=r<<t|i>>>32-t,a=i<<t|r>>>32-t;return this._a00=65535&a,this._a16=a>>>16,this._a32=65535&n,this._a48=n>>>16,this},s.prototype.rotateRight=s.prototype.rotr=function(t){if(0==(t%=64))return this;if(t>=32){var e=this._a00;if(this._a00=this._a32,this._a32=e,e=this._a48,this._a48=this._a16,this._a16=e,32==t)return this;t-=32}var r=this._a48<<16|this._a32,i=this._a16<<16|this._a00,n=r>>>t|i<<32-t,a=i>>>t|r<<32-t;return this._a00=65535&a,this._a16=a>>>16,this._a32=65535&n,this._a48=n>>>16,this},s.prototype.clone=function(){return new s(this._a00,this._a16,this._a32,this._a48)},void 0===(i=function(){return s}.apply(e,[]))||(t.exports=i)}()},function(t,e,r){e.UINT32=r(89),e.UINT64=r(90)},function(t,e,r){var i;!function(r){n(Math.pow(36,5)),n(Math.pow(16,7)),n(Math.pow(10,9)),n(Math.pow(2,30)),n(36),n(16),n(10),n(2);function n(t,e){return this instanceof n?(this._low=0,this._high=0,this.remainder=null,void 0===e?s.call(this,t):"string"==typeof t?o.call(this,t,e):void a.call(this,t,e)):new n(t,e)}function a(t,e){return this._low=0|t,this._high=0|e,this}function s(t){return this._low=65535&t,this._high=t>>>16,this}function o(t,e){var r=parseInt(t,e||10);return this._low=65535&r,this._high=r>>>16,this}n.prototype.fromBits=a,n.prototype.fromNumber=s,n.prototype.fromString=o,n.prototype.toNumber=function(){return 65536*this._high+this._low},n.prototype.toString=function(t){return this.toNumber().toString(t||10)},n.prototype.add=function(t){var e=this._low+t._low,r=e>>>16;return r+=this._high+t._high,this._low=65535&e,this._high=65535&r,this},n.prototype.subtract=function(t){return this.add(t.clone().negate())},n.prototype.multiply=function(t){var e,r,i=this._high,n=this._low,a=t._high,s=t._low;return e=(r=n*s)>>>16,e+=i*s,e&=65535,e+=n*a,this._low=65535&r,this._high=65535&e,this},n.prototype.div=function(t){if(0==t._low&&0==t._high)throw Error("division by zero");if(0==t._high&&1==t._low)return this.remainder=new n(0),this;if(t.gt(this))return this.remainder=this.clone(),this._low=0,this._high=0,this;if(this.eq(t))return this.remainder=new n(0),this._low=1,this._high=0,this;for(var e=t.clone(),r=-1;!this.lt(e);)e.shiftLeft(1,!0),r++;for(this.remainder=this.clone(),this._low=0,this._high=0;r>=0;r--)e.shiftRight(1),this.remainder.lt(e)||(this.remainder.subtract(e),r>=16?this._high|=1<<r-16:this._low|=1<<r);return this},n.prototype.negate=function(){var t=1+(65535&~this._low);return this._low=65535&t,this._high=~this._high+(t>>>16)&65535,this},n.prototype.equals=n.prototype.eq=function(t){return this._low==t._low&&this._high==t._high},n.prototype.greaterThan=n.prototype.gt=function(t){return this._high>t._high||!(this._high<t._high)&&this._low>t._low},n.prototype.lessThan=n.prototype.lt=function(t){return this._high<t._high||!(this._high>t._high)&&this._low<t._low},n.prototype.or=function(t){return this._low|=t._low,this._high|=t._high,this},n.prototype.and=function(t){return this._low&=t._low,this._high&=t._high,this},n.prototype.not=function(){return this._low=65535&~this._low,this._high=65535&~this._high,this},n.prototype.xor=function(t){return this._low^=t._low,this._high^=t._high,this},n.prototype.shiftRight=n.prototype.shiftr=function(t){return t>16?(this._low=this._high>>t-16,this._high=0):16==t?(this._low=this._high,this._high=0):(this._low=this._low>>t|this._high<<16-t&65535,this._high>>=t),this},n.prototype.shiftLeft=n.prototype.shiftl=function(t,e){return t>16?(this._high=this._low<<t-16,this._low=0,e||(this._high&=65535)):16==t?(this._high=this._low,this._low=0):(this._high=this._high<<t|this._low>>16-t,this._low=this._low<<t&65535,e||(this._high&=65535)),this},n.prototype.rotateLeft=n.prototype.rotl=function(t){var e=this._high<<16|this._low;return e=e<<t|e>>>32-t,this._low=65535&e,this._high=e>>>16,this},n.prototype.rotateRight=n.prototype.rotr=function(t){var e=this._high<<16|this._low;return e=e>>>t|e<<32-t,this._low=65535&e,this._high=e>>>16,this},n.prototype.clone=function(){return new n(this._low,this._high)},void 0===(i=function(){return n}.apply(e,[]))||(t.exports=i)}()},function(t,e,r){var i;!function(r){var n={16:s(Math.pow(16,5)),10:s(Math.pow(10,5)),2:s(Math.pow(2,5))},a={16:s(16),10:s(10),2:s(2)};function s(t,e,r,i){return this instanceof s?(this.remainder=null,"string"==typeof t?c.call(this,t,e):void 0===e?u.call(this,t):void o.apply(this,arguments)):new s(t,e,r,i)}function o(t,e,r,i){return void 0===r?(this._a00=65535&t,this._a16=t>>>16,this._a32=65535&e,this._a48=e>>>16,this):(this._a00=0|t,this._a16=0|e,this._a32=0|r,this._a48=0|i,this)}function u(t){return this._a00=65535&t,this._a16=t>>>16,this._a32=0,this._a48=0,this}function c(t,e){e=e||10,this._a00=0,this._a16=0,this._a32=0,this._a48=0;for(var r=n[e]||new s(Math.pow(e,5)),i=0,a=t.length;i<a;i+=5){var o=Math.min(5,a-i),u=parseInt(t.slice(i,i+o),e);this.multiply(o<5?new s(Math.pow(e,o)):r).add(new s(u))}return this}s.prototype.fromBits=o,s.prototype.fromNumber=u,s.prototype.fromString=c,s.prototype.toNumber=function(){return 65536*this._a16+this._a00},s.prototype.toString=function(t){var e=a[t=t||10]||new s(t);if(!this.gt(e))return this.toNumber().toString(t);for(var r=this.clone(),i=new Array(64),n=63;n>=0&&(r.div(e),i[n]=r.remainder.toNumber().toString(t),r.gt(e));n--);return i[n-1]=r.toNumber().toString(t),i.join("")},s.prototype.add=function(t){var e=this._a00+t._a00,r=e>>>16,i=(r+=this._a16+t._a16)>>>16,n=(i+=this._a32+t._a32)>>>16;return n+=this._a48+t._a48,this._a00=65535&e,this._a16=65535&r,this._a32=65535&i,this._a48=65535&n,this},s.prototype.subtract=function(t){return this.add(t.clone().negate())},s.prototype.multiply=function(t){var e=this._a00,r=this._a16,i=this._a32,n=this._a48,a=t._a00,s=t._a16,o=t._a32,u=t._a48,c=e*a,l=c>>>16,h=(l+=e*s)>>>16;l&=65535,h+=(l+=r*a)>>>16;var f=(h+=e*o)>>>16;return h&=65535,f+=(h+=r*s)>>>16,h&=65535,f+=(h+=i*a)>>>16,f+=e*u,f&=65535,f+=r*o,f&=65535,f+=i*s,f&=65535,f+=n*a,this._a00=65535&c,this._a16=65535&l,this._a32=65535&h,this._a48=65535&f,this},s.prototype.div=function(t){if(0==t._a16&&0==t._a32&&0==t._a48){if(0==t._a00)throw Error("division by zero");if(1==t._a00)return this.remainder=new s(0),this}if(t.gt(this))return this.remainder=this.clone(),this._a00=0,this._a16=0,this._a32=0,this._a48=0,this;if(this.eq(t))return this.remainder=new s(0),this._a00=1,this._a16=0,this._a32=0,this._a48=0,this;for(var e=t.clone(),r=-1;!this.lt(e);)e.shiftLeft(1,!0),r++;for(this.remainder=this.clone(),this._a00=0,this._a16=0,this._a32=0,this._a48=0;r>=0;r--)e.shiftRight(1),this.remainder.lt(e)||(this.remainder.subtract(e),r>=48?this._a48|=1<<r-48:r>=32?this._a32|=1<<r-32:r>=16?this._a16|=1<<r-16:this._a00|=1<<r);return this},s.prototype.negate=function(){var t=1+(65535&~this._a00);return this._a00=65535&t,t=(65535&~this._a16)+(t>>>16),this._a16=65535&t,t=(65535&~this._a32)+(t>>>16),this._a32=65535&t,this._a48=~this._a48+(t>>>16)&65535,this},s.prototype.equals=s.prototype.eq=function(t){return this._a48==t._a48&&this._a00==t._a00&&this._a32==t._a32&&this._a16==t._a16},s.prototype.greaterThan=s.prototype.gt=function(t){return this._a48>t._a48||!(this._a48<t._a48)&&(this._a32>t._a32||!(this._a32<t._a32)&&(this._a16>t._a16||!(this._a16<t._a16)&&this._a00>t._a00))},s.prototype.lessThan=s.prototype.lt=function(t){return this._a48<t._a48||!(this._a48>t._a48)&&(this._a32<t._a32||!(this._a32>t._a32)&&(this._a16<t._a16||!(this._a16>t._a16)&&this._a00<t._a00))},s.prototype.or=function(t){return this._a00|=t._a00,this._a16|=t._a16,this._a32|=t._a32,this._a48|=t._a48,this},s.prototype.and=function(t){return this._a00&=t._a00,this._a16&=t._a16,this._a32&=t._a32,this._a48&=t._a48,this},s.prototype.xor=function(t){return this._a00^=t._a00,this._a16^=t._a16,this._a32^=t._a32,this._a48^=t._a48,this},s.prototype.not=function(){return this._a00=65535&~this._a00,this._a16=65535&~this._a16,this._a32=65535&~this._a32,this._a48=65535&~this._a48,this},s.prototype.shiftRight=s.prototype.shiftr=function(t){return(t%=64)>=48?(this._a00=this._a48>>t-48,this._a16=0,this._a32=0,this._a48=0):t>=32?(t-=32,this._a00=65535&(this._a32>>t|this._a48<<16-t),this._a16=this._a48>>t&65535,this._a32=0,this._a48=0):t>=16?(t-=16,this._a00=65535&(this._a16>>t|this._a32<<16-t),this._a16=65535&(this._a32>>t|this._a48<<16-t),this._a32=this._a48>>t&65535,this._a48=0):(this._a00=65535&(this._a00>>t|this._a16<<16-t),this._a16=65535&(this._a16>>t|this._a32<<16-t),this._a32=65535&(this._a32>>t|this._a48<<16-t),this._a48=this._a48>>t&65535),this},s.prototype.shiftLeft=s.prototype.shiftl=function(t,e){return(t%=64)>=48?(this._a48=this._a00<<t-48,this._a32=0,this._a16=0,this._a00=0):t>=32?(t-=32,this._a48=this._a16<<t|this._a00>>16-t,this._a32=this._a00<<t&65535,this._a16=0,this._a00=0):t>=16?(t-=16,this._a48=this._a32<<t|this._a16>>16-t,this._a32=65535&(this._a16<<t|this._a00>>16-t),this._a16=this._a00<<t&65535,this._a00=0):(this._a48=this._a48<<t|this._a32>>16-t,this._a32=65535&(this._a32<<t|this._a16>>16-t),this._a16=65535&(this._a16<<t|this._a00>>16-t),this._a00=this._a00<<t&65535),e||(this._a48&=65535),this},s.prototype.rotateLeft=s.prototype.rotl=function(t){if(0==(t%=64))return this;if(t>=32){var e=this._a00;if(this._a00=this._a32,this._a32=e,e=this._a48,this._a48=this._a16,this._a16=e,32==t)return this;t-=32}var r=this._a48<<16|this._a32,i=this._a16<<16|this._a00,n=r<<t|i>>>32-t,a=i<<t|r>>>32-t;return this._a00=65535&a,this._a16=a>>>16,this._a32=65535&n,this._a48=n>>>16,this},s.prototype.rotateRight=s.prototype.rotr=function(t){if(0==(t%=64))return this;if(t>=32){var e=this._a00;if(this._a00=this._a32,this._a32=e,e=this._a48,this._a48=this._a16,this._a16=e,32==t)return this;t-=32}var r=this._a48<<16|this._a32,i=this._a16<<16|this._a00,n=r>>>t|i<<32-t,a=i>>>t|r<<32-t;return this._a00=65535&a,this._a16=a>>>16,this._a32=65535&n,this._a48=n>>>16,this},s.prototype.clone=function(){return new s(this._a00,this._a16,this._a32,this._a48)},void 0===(i=function(){return s}.apply(e,[]))||(t.exports=i)}()},function(t,e){},function(t,e,r){"use strict";var i=r(22).Buffer,n=r(93);function a(t,e,r){t.copy(e,r)}t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,r=""+e.data;e=e.next;)r+=t+e.data;return r},t.prototype.concat=function(t){if(0===this.length)return i.alloc(0);if(1===this.length)return this.head.data;for(var e=i.allocUnsafe(t>>>0),r=this.head,n=0;r;)a(r.data,e,n),n+=r.data.length,r=r.next;return e},t}(),n&&n.inspect&&n.inspect.custom&&(t.exports.prototype[n.inspect.custom]=function(){var t=n.inspect({length:this.length});return this.constructor.name+" "+t})},function(t,e){},function(t,e,r){(function(e){function r(t){try{if(!e.localStorage)return!1}catch(t){return!1}var r=e.localStorage[t];return null!=r&&"true"===String(r).toLowerCase()}t.exports=function(t,e){if(r("noDeprecation"))return t;var i=!1;return function(){if(!i){if(r("throwDeprecation"))throw new Error(e);r("traceDeprecation")?console.trace(e):console.warn(e),i=!0}return t.apply(this,arguments)}}}).call(this,r(8))},function(t,e,r){"use strict";t.exports=a;var i=r(61),n=r(17);function a(t){if(!(this instanceof a))return new a(t);i.call(this,t)}n.inherits=r(11),n.inherits(a,i),a.prototype._transform=function(t,e,r){r(null,t)}},function(t,e,r){t.exports=r(36)},function(t,e,r){t.exports=r(12)},function(t,e,r){t.exports=r(35).Transform},function(t,e,r){t.exports=r(35).PassThrough},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e,r){(function(t){var i=r(55);e.LZ4_uncompress=function(e,r){var n=[],a=new i(r);return a.on("data",function(t){n.push(t)}),a.end(e),t.concat(n)}}).call(this,r(3).Buffer)},function(t,e,r){(function(t){var i=r(63);e.LZ4_compress=function(e,r){var n=[],a=new i(r);return a.on("data",function(t){n.push(t)}),a.end(e),t.concat(n)}}).call(this,r(3).Buffer)},function(t,e){t.exports=function(t){if(Array.isArray(t))return t}},function(t,e){t.exports=function(t,e){var r=[],i=!0,n=!1,a=void 0;try{for(var s,o=t[Symbol.iterator]();!(i=(s=o.next()).done)&&(r.push(s.value),!e||r.length!==e);i=!0);}catch(t){n=!0,a=t}finally{try{i||null==o.return||o.return()}finally{if(n)throw a}}return r}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(t,e,r){"use strict";r.r(e);var i=r(2),n=r.n(i),a=r(64),s=r.n(a),o=r(65),u=r.n(o),c=function(t){return t instanceof Array?t:String(t).replace(/\s+/g,"").split(",")},l=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"undefined";s()(this,t),this.name=e,this.events={}}return u()(t,[{key:"destroy",value:function(){this.events={}}},{key:"on",value:function(t,e){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(i=i||{},"function"!=typeof e)throw new TypeError("Invalid callback");return c(t).forEach(function(t){r.events[t]||(r.events[t]=[]),r.events[t].push({callback:e,options:i})}),this}},{key:"off",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return c(t).filter(function(t){return!!e.events[t]}).forEach(function(t){if(r)for(var n=e.events[t].length;n--;){var a=e.events[t][n];(!a.options.persist||i)&&a.callback===r&&e.events[t].splice(n,1)}else e.events[t]=i?[]:e.events[t].filter(function(t){return!0!==t.options.persist})}),this}},{key:"emit",value:function(t){for(var e=this,r=arguments.length,i=new Array(r>1?r-1:0),n=1;n<r;n++)i[n-1]=arguments[n];return c(t).forEach(function(t){e.events[t]&&e.events[t].forEach(function(t){return t.callback.apply(void 0,i)})}),this}}]),t}(),h=r(23),f=r.n(h),p=r(14),d=r.n(p),g=navigator,y=g.platform,m=g.userAgent,v=m.includes("MSIE"),_=m.toLowerCase().includes("opera"),b=m.toLowerCase().includes("firefox"),C=m.toLowerCase().includes("safari")&&!m.toLowerCase().includes("chrome"),E=!(v||_||b||C),S=y.includes("Mac"),w=y.includes("Win"),A=function(){var t,e={8:"BackSpace",9:"Tab",12:"KP_Begin",13:"Return",16:"Shift_L",17:"Control_L",18:"Alt_L",19:"Pause",20:"Caps_Lock",27:"Escape",31:"Mode_switch",32:"space",33:"Prior",34:"Next",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",42:"Print",45:"Insert",46:"Delete",58:"colon",59:"semicolon",60:"less",61:"equal",62:"greater",63:"question",64:"at",91:"Menu",92:"Menu",93:"KP_Enter",106:"KP_Multiply",107:"KP_Add",109:"KP_Subtract",110:"KP_Delete",111:"KP_Divide",144:"Num_Lock",145:"Scroll_Lock",160:"dead_circumflex",167:"underscore",161:"exclam",162:"quotedbl",163:"numbersign",164:"dollar",165:"percent",166:"ampersand",168:"parenleft",169:"parenright",170:"asterisk",171:"plus",172:"bar",173:"minus",174:"braceleft",175:"braceright",176:"asciitilde",186:"semicolon",187:"equal",188:"comma",189:"minus",190:"period",191:"slash",192:"grave",219:"bracketleft",220:"backslash",221:"bracketright",222:"apostrophe"};for(t=0;t<26;t++)e[65+t]="abcdefghijklmnopqrstuvwxyz"[t];for(t=0;t<10;t++)e[48+t]=""+t,e[96+t]=""+t;for(t=1;t<=24;t++)e[111+t]="F"+t;return e}(),T=function(){for(var t={Escape:"Escape",Tab:"Tab",CapsLock:"Caps_Lock",ShiftLeft:"Shift_L",ControlLeft:"Control_L",MetaLeft:"Meta_L",AltLeft:"Alt_L",Space:"space",AltRight:"Alt_R",MetaRight:"Meta_R",ContextMenu:"Menu_R",ControlRight:"Control_L",ShiftRight:"Shift_R",Enter:"Return",Backspace:"BackSpace",ScrollLock:"Scroll_Lock",Pause:"Pause",NumLock:"Num_Lock",Insert:"Insert",Home:"Home",PageUp:"Prior",Delete:"Delete",End:"End",PageDown:"Next"},e=0;e<=9;e++)t["Numpad"+e]=""+e,t["KP"+e]="KP"+e;for(var r=1;r<=20;r++)t["F"+r]="F"+r;return t}(),k={NumpadDivide:"KP_Divide",NumpadMultiply:"KP_Multiply",NumpadSubstract:"KP_Substract",NumpadAdd:"KP_Add",NumpadEnter:"KP_Enter",NumpadDecimal:"KP_Decimal",Insert:"KP_Insert",End:"KP_End",ArrowDown:"KP_Down",PageDown:"KP_Next",ArrowLeft:"KP_Left",Clear:"KP_Begin",ArrowRight:"KP_Right",Home:"KP_Home",ArrowUp:"KP_Up",PageUp:"KP_Prior"},I={space:32,exclam:33,quotedbl:34,numbersign:35,dollar:36,percent:37,ampersand:38,apostrophe:39,parenleft:40,parenright:41,asterisk:42,plus:43,comma:44,minus:45,period:46,slash:47,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,colon:58,semicolon:59,less:60,equal:61,greater:62,question:63,at:64,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,bracketleft:91,backslash:92,bracketright:93,asciicircum:94,underscore:95,grave:96,a:97,b:98,c:99,d:100,e:101,f:102,g:103,h:104,i:105,j:106,k:107,l:108,m:109,n:110,o:111,p:112,q:113,r:114,s:115,t:116,u:117,v:118,w:119,x:120,y:121,z:122,braceleft:123,bar:124,braceright:125,asciitilde:126,nobreakspace:160,exclamdown:161,cent:162,sterling:163,currency:164,yen:165,brokenbar:166,section:167,diaeresis:168,copyright:169,ordfeminine:170,guillemotleft:171,notsign:172,hyphen:173,registered:174,macron:175,degree:176,plusminus:177,twosuperior:178,threesuperior:179,acute:180,mu:181,paragraph:182,periodcentered:183,cedilla:184,onesuperior:185,masculine:186,guillemotright:187,onequarter:188,onehalf:189,threequarters:190,questiondown:191,Agrave:192,Aacute:193,Acircumflex:194,Atilde:195,Adiaeresis:196,Aring:197,AE:198,Ccedilla:199,Egrave:200,Eacute:201,Ecircumflex:202,Ediaeresis:203,Igrave:204,Iacute:205,Icircumflex:206,Idiaeresis:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocircumflex:212,Otilde:213,Odiaeresis:214,multiply:215,Oslash:216,Ooblique:216,Ugrave:217,Uacute:218,Ucircumflex:219,Udiaeresis:220,Yacute:221,THORN:222,ssharp:223,agrave:224,aacute:225,acircumflex:226,atilde:227,adiaeresis:228,aring:229,ae:230,ccedilla:231,egrave:232,eacute:233,ecircumflex:234,ediaeresis:235,igrave:236,iacute:237,icircumflex:238,idiaeresis:239,eth:240,ntilde:241,ograve:242,oacute:243,ocircumflex:244,otilde:245,odiaeresis:246,division:247,oslash:248,ooblique:248,ugrave:249,uacute:250,ucircumflex:251,udiaeresis:252,yacute:253,thorn:254,ydiaeresis:255,Aogonek:260,breve:728,Lstroke:321,Lcaron:317,Sacute:346,Scaron:352,Scedilla:350,Tcaron:356,Zacute:377,Zcaron:381,Zabovedot:379,aogonek:261,ogonek:731,lstroke:322,lcaron:318,sacute:347,caron:711,scaron:353,scedilla:351,tcaron:357,zacute:378,doubleacute:733,zcaron:382,zabovedot:380,Racute:340,Abreve:258,Lacute:313,Cacute:262,Ccaron:268,Eogonek:280,Ecaron:282,Dcaron:270,Dstroke:272,Nacute:323,Ncaron:327,Odoubleacute:336,Rcaron:344,Uring:366,Udoubleacute:368,Tcedilla:354,racute:341,abreve:259,lacute:314,cacute:263,ccaron:269,eogonek:281,ecaron:283,dcaron:271,dstroke:273,nacute:324,ncaron:328,odoubleacute:337,rcaron:345,uring:367,udoubleacute:369,tcedilla:355,abovedot:729,Hstroke:294,Hcircumflex:292,Iabovedot:304,Gbreve:286,Jcircumflex:308,hstroke:295,hcircumflex:293,idotless:305,gbreve:287,jcircumflex:309,Cabovedot:266,Ccircumflex:264,Gabovedot:288,Gcircumflex:284,Ubreve:364,Scircumflex:348,cabovedot:267,ccircumflex:265,gabovedot:289,gcircumflex:285,ubreve:365,scircumflex:349,kra:312,Rcedilla:342,Itilde:296,Lcedilla:315,Emacron:274,Gcedilla:290,Tslash:358,rcedilla:343,itilde:297,lcedilla:316,emacron:275,gcedilla:291,tslash:359,ENG:330,eng:331,Amacron:256,Iogonek:302,Eabovedot:278,Imacron:298,Ncedilla:325,Omacron:332,Kcedilla:310,Uogonek:370,Utilde:360,Umacron:362,amacron:257,iogonek:303,eabovedot:279,imacron:299,ncedilla:326,omacron:333,kcedilla:311,uogonek:371,utilde:361,umacron:363,Wcircumflex:372,wcircumflex:373,Ycircumflex:374,ycircumflex:375,Babovedot:7682,babovedot:7683,Dabovedot:7690,dabovedot:7691,Fabovedot:7710,fabovedot:7711,Mabovedot:7744,mabovedot:7745,Pabovedot:7766,pabovedot:7767,Sabovedot:7776,sabovedot:7777,Tabovedot:7786,tabovedot:7787,Wgrave:7808,wgrave:7809,Wacute:7810,wacute:7811,Wdiaeresis:7812,wdiaeresis:7813,Ygrave:7922,ygrave:7923,OE:338,oe:339,Ydiaeresis:376,overline:8254,kana_fullstop:12290,kana_openingbracket:12300,kana_closingbracket:12301,kana_comma:12289,kana_conjunctive:12539,kana_WO:12530,kana_a:12449,kana_i:12451,kana_u:12453,kana_e:12455,kana_o:12457,kana_ya:12515,kana_yu:12517,kana_yo:12519,kana_tsu:12483,prolongedsound:12540,kana_A:12450,kana_I:12452,kana_U:12454,kana_E:12456,kana_O:12458,kana_KA:12459,kana_KI:12461,kana_KU:12463,kana_KE:12465,kana_KO:12467,kana_SA:12469,kana_SHI:12471,kana_SU:12473,kana_SE:12475,kana_SO:12477,kana_TA:12479,kana_CHI:12481,kana_TSU:12484,kana_TE:12486,kana_TO:12488,kana_NA:12490,kana_NI:12491,kana_NU:12492,kana_NE:12493,kana_NO:12494,kana_HA:12495,kana_HI:12498,kana_FU:12501,kana_HE:12504,kana_HO:12507,kana_MA:12510,kana_MI:12511,kana_MU:12512,kana_ME:12513,kana_MO:12514,kana_YA:12516,kana_YU:12518,kana_YO:12520,kana_RA:12521,kana_RI:12522,kana_RU:12523,kana_RE:12524,kana_RO:12525,kana_WA:12527,kana_N:12531,voicedsound:12443,semivoicedsound:12444,Farsi_0:1776,Farsi_1:1777,Farsi_2:1778,Farsi_3:1779,Farsi_4:1780,Farsi_5:1781,Farsi_6:1782,Farsi_7:1783,Farsi_8:1784,Farsi_9:1785,Arabic_percent:1642,Arabic_superscript_alef:1648,Arabic_tteh:1657,Arabic_peh:1662,Arabic_tcheh:1670,Arabic_ddal:1672,Arabic_rreh:1681,Arabic_comma:1548,Arabic_fullstop:1748,Arabic_0:1632,Arabic_1:1633,Arabic_2:1634,Arabic_3:1635,Arabic_4:1636,Arabic_5:1637,Arabic_6:1638,Arabic_7:1639,Arabic_8:1640,Arabic_9:1641,Arabic_semicolon:1563,Arabic_question_mark:1567,Arabic_hamza:1569,Arabic_maddaonalef:1570,Arabic_hamzaonalef:1571,Arabic_hamzaonwaw:1572,Arabic_hamzaunderalef:1573,Arabic_hamzaonyeh:1574,Arabic_alef:1575,Arabic_beh:1576,Arabic_tehmarbuta:1577,Arabic_teh:1578,Arabic_theh:1579,Arabic_jeem:1580,Arabic_hah:1581,Arabic_khah:1582,Arabic_dal:1583,Arabic_thal:1584,Arabic_ra:1585,Arabic_zain:1586,Arabic_seen:1587,Arabic_sheen:1588,Arabic_sad:1589,Arabic_dad:1590,Arabic_tah:1591,Arabic_zah:1592,Arabic_ain:1593,Arabic_ghain:1594,Arabic_tatweel:1600,Arabic_feh:1601,Arabic_qaf:1602,Arabic_kaf:1603,Arabic_lam:1604,Arabic_meem:1605,Arabic_noon:1606,Arabic_ha:1607,Arabic_waw:1608,Arabic_alefmaksura:1609,Arabic_yeh:1610,Arabic_fathatan:1611,Arabic_dammatan:1612,Arabic_kasratan:1613,Arabic_fatha:1614,Arabic_damma:1615,Arabic_kasra:1616,Arabic_shadda:1617,Arabic_sukun:1618,Arabic_madda_above:1619,Arabic_hamza_above:1620,Arabic_hamza_below:1621,Arabic_jeh:1688,Arabic_veh:1700,Arabic_keheh:1705,Arabic_gaf:1711,Arabic_noon_ghunna:1722,Arabic_heh_doachashmee:1726,Farsi_yeh:1740,Arabic_farsi_yeh:1740,Arabic_yeh_baree:1746,Arabic_heh_goal:1729,Cyrillic_GHE_bar:1170,Cyrillic_ghe_bar:1171,Cyrillic_ZHE_descender:1174,Cyrillic_zhe_descender:1175,Cyrillic_KA_descender:1178,Cyrillic_ka_descender:1179,Cyrillic_KA_vertstroke:1180,Cyrillic_ka_vertstroke:1181,Cyrillic_EN_descender:1186,Cyrillic_en_descender:1187,Cyrillic_U_straight:1198,Cyrillic_u_straight:1199,Cyrillic_U_straight_bar:1200,Cyrillic_u_straight_bar:1201,Cyrillic_HA_descender:1202,Cyrillic_ha_descender:1203,Cyrillic_CHE_descender:1206,Cyrillic_che_descender:1207,Cyrillic_CHE_vertstroke:1208,Cyrillic_che_vertstroke:1209,Cyrillic_SHHA:1210,Cyrillic_shha:1211,Cyrillic_SCHWA:1240,Cyrillic_schwa:1241,Cyrillic_I_macron:1250,Cyrillic_i_macron:1251,Cyrillic_O_bar:1256,Cyrillic_o_bar:1257,Cyrillic_U_macron:1262,Cyrillic_u_macron:1263,Serbian_dje:1106,Macedonia_gje:1107,Cyrillic_io:1105,Ukrainian_ie:1108,Macedonia_dse:1109,Ukrainian_i:1110,Ukrainian_yi:1111,Cyrillic_je:1112,Cyrillic_lje:1113,Cyrillic_nje:1114,Serbian_tshe:1115,Macedonia_kje:1116,Ukrainian_ghe_with_upturn:1169,Byelorussian_shortu:1118,Cyrillic_dzhe:1119,numerosign:8470,Serbian_DJE:1026,Macedonia_GJE:1027,Cyrillic_IO:1025,Ukrainian_IE:1028,Macedonia_DSE:1029,Ukrainian_I:1030,Ukrainian_YI:1031,Cyrillic_JE:1032,Cyrillic_LJE:1033,Cyrillic_NJE:1034,Serbian_TSHE:1035,Macedonia_KJE:1036,Ukrainian_GHE_WITH_UPTURN:1168,Byelorussian_SHORTU:1038,Cyrillic_DZHE:1039,Cyrillic_yu:1102,Cyrillic_a:1072,Cyrillic_be:1073,Cyrillic_tse:1094,Cyrillic_de:1076,Cyrillic_ie:1077,Cyrillic_ef:1092,Cyrillic_ghe:1075,Cyrillic_ha:1093,Cyrillic_i:1080,Cyrillic_shorti:1081,Cyrillic_ka:1082,Cyrillic_el:1083,Cyrillic_em:1084,Cyrillic_en:1085,Cyrillic_o:1086,Cyrillic_pe:1087,Cyrillic_ya:1103,Cyrillic_er:1088,Cyrillic_es:1089,Cyrillic_te:1090,Cyrillic_u:1091,Cyrillic_zhe:1078,Cyrillic_ve:1074,Cyrillic_softsign:1100,Cyrillic_yeru:1099,Cyrillic_ze:1079,Cyrillic_sha:1096,Cyrillic_e:1101,Cyrillic_shcha:1097,Cyrillic_che:1095,Cyrillic_hardsign:1098,Cyrillic_YU:1070,Cyrillic_A:1040,Cyrillic_BE:1041,Cyrillic_TSE:1062,Cyrillic_DE:1044,Cyrillic_IE:1045,Cyrillic_EF:1060,Cyrillic_GHE:1043,Cyrillic_HA:1061,Cyrillic_I:1048,Cyrillic_SHORTI:1049,Cyrillic_KA:1050,Cyrillic_EL:1051,Cyrillic_EM:1052,Cyrillic_EN:1053,Cyrillic_O:1054,Cyrillic_PE:1055,Cyrillic_YA:1071,Cyrillic_ER:1056,Cyrillic_ES:1057,Cyrillic_TE:1058,Cyrillic_U:1059,Cyrillic_ZHE:1046,Cyrillic_VE:1042,Cyrillic_SOFTSIGN:1068,Cyrillic_YERU:1067,Cyrillic_ZE:1047,Cyrillic_SHA:1064,Cyrillic_E:1069,Cyrillic_SHCHA:1065,Cyrillic_CHE:1063,Cyrillic_HARDSIGN:1066,Greek_ALPHAaccent:902,Greek_EPSILONaccent:904,Greek_ETAaccent:905,Greek_IOTAaccent:906,Greek_IOTAdieresis:938,Greek_OMICRONaccent:908,Greek_UPSILONaccent:910,Greek_UPSILONdieresis:939,Greek_OMEGAaccent:911,Greek_accentdieresis:901,Greek_horizbar:8213,Greek_alphaaccent:940,Greek_epsilonaccent:941,Greek_etaaccent:942,Greek_iotaaccent:943,Greek_iotadieresis:970,Greek_iotaaccentdieresis:912,Greek_omicronaccent:972,Greek_upsilonaccent:973,Greek_upsilondieresis:971,Greek_upsilonaccentdieresis:944,Greek_omegaaccent:974,Greek_ALPHA:913,Greek_BETA:914,Greek_GAMMA:915,Greek_DELTA:916,Greek_EPSILON:917,Greek_ZETA:918,Greek_ETA:919,Greek_THETA:920,Greek_IOTA:921,Greek_KAPPA:922,Greek_LAMDA:923,Greek_LAMBDA:923,Greek_MU:924,Greek_NU:925,Greek_XI:926,Greek_OMICRON:927,Greek_PI:928,Greek_RHO:929,Greek_SIGMA:931,Greek_TAU:932,Greek_UPSILON:933,Greek_PHI:934,Greek_CHI:935,Greek_PSI:936,Greek_OMEGA:937,Greek_alpha:945,Greek_beta:946,Greek_gamma:947,Greek_delta:948,Greek_epsilon:949,Greek_zeta:950,Greek_eta:951,Greek_theta:952,Greek_iota:953,Greek_kappa:954,Greek_lamda:955,Greek_lambda:955,Greek_mu:956,Greek_nu:957,Greek_xi:958,Greek_omicron:959,Greek_pi:960,Greek_rho:961,Greek_sigma:963,Greek_finalsmallsigma:962,Greek_tau:964,Greek_upsilon:965,Greek_phi:966,Greek_chi:967,Greek_psi:968,Greek_omega:969,leftradical:9143,topintegral:8992,botintegral:8993,topleftsqbracket:9121,botleftsqbracket:9123,toprightsqbracket:9124,botrightsqbracket:9126,topleftparens:9115,botleftparens:9117,toprightparens:9118,botrightparens:9120,leftmiddlecurlybrace:9128,rightmiddlecurlybrace:9132,lessthanequal:8804,notequal:8800,greaterthanequal:8805,integral:8747,therefore:8756,variation:8733,infinity:8734,nabla:8711,approximate:8764,similarequal:8771,ifonlyif:8660,implies:8658,identical:8801,radical:8730,includedin:8834,includes:8835,intersection:8745,union:8746,logicaland:8743,logicalor:8744,partialderivative:8706,function:402,leftarrow:8592,uparrow:8593,rightarrow:8594,downarrow:8595,soliddiamond:9670,checkerboard:9618,ht:9225,ff:9228,cr:9229,lf:9226,nl:9252,vt:9227,lowrightcorner:9496,uprightcorner:9488,upleftcorner:9484,lowleftcorner:9492,crossinglines:9532,horizlinescan1:9146,horizlinescan3:9147,horizlinescan5:9472,horizlinescan7:9148,horizlinescan9:9149,leftt:9500,rightt:9508,bott:9524,topt:9516,vertbar:9474,emspace:8195,enspace:8194,em3space:8196,em4space:8197,digitspace:8199,punctspace:8200,thinspace:8201,hairspace:8202,emdash:8212,endash:8211,ellipsis:8230,doubbaselinedot:8229,onethird:8531,twothirds:8532,onefifth:8533,twofifths:8534,threefifths:8535,fourfifths:8536,onesixth:8537,fivesixths:8538,careof:8453,figdash:8210,oneeighth:8539,threeeighths:8540,fiveeighths:8541,seveneighths:8542,trademark:8482,leftsinglequotemark:8216,rightsinglequotemark:8217,leftdoublequotemark:8220,rightdoublequotemark:8221,prescription:8478,permille:8240,minutes:8242,seconds:8243,latincross:10013,club:9827,diamond:9830,heart:9829,maltesecross:10016,dagger:8224,doubledagger:8225,checkmark:10003,ballotcross:10007,musicalsharp:9839,musicalflat:9837,malesymbol:9794,femalesymbol:9792,telephone:9742,telephonerecorder:8981,phonographcopyright:8471,caret:8248,singlelowquotemark:8218,doublelowquotemark:8222,downtack:8868,downstile:8970,jot:8728,quad:9109,uptack:8869,circle:9675,upstile:8968,lefttack:8867,righttack:8866,hebrew_doublelowline:8215,hebrew_aleph:1488,hebrew_bet:1489,hebrew_gimel:1490,hebrew_dalet:1491,hebrew_he:1492,hebrew_waw:1493,hebrew_zain:1494,hebrew_chet:1495,hebrew_tet:1496,hebrew_yod:1497,hebrew_finalkaph:1498,hebrew_kaph:1499,hebrew_lamed:1500,hebrew_finalmem:1501,hebrew_mem:1502,hebrew_finalnun:1503,hebrew_nun:1504,hebrew_samech:1505,hebrew_ayin:1506,hebrew_finalpe:1507,hebrew_pe:1508,hebrew_finalzade:1509,hebrew_zade:1510,hebrew_qoph:1511,hebrew_resh:1512,hebrew_shin:1513,hebrew_taw:1514,Thai_kokai:3585,Thai_khokhai:3586,Thai_khokhuat:3587,Thai_khokhwai:3588,Thai_khokhon:3589,Thai_khorakhang:3590,Thai_ngongu:3591,Thai_chochan:3592,Thai_choching:3593,Thai_chochang:3594,Thai_soso:3595,Thai_chochoe:3596,Thai_yoying:3597,Thai_dochada:3598,Thai_topatak:3599,Thai_thothan:3600,Thai_thonangmontho:3601,Thai_thophuthao:3602,Thai_nonen:3603,Thai_dodek:3604,Thai_totao:3605,Thai_thothung:3606,Thai_thothahan:3607,Thai_thothong:3608,Thai_nonu:3609,Thai_bobaimai:3610,Thai_popla:3611,Thai_phophung:3612,Thai_fofa:3613,Thai_phophan:3614,Thai_fofan:3615,Thai_phosamphao:3616,Thai_moma:3617,Thai_yoyak:3618,Thai_rorua:3619,Thai_ru:3620,Thai_loling:3621,Thai_lu:3622,Thai_wowaen:3623,Thai_sosala:3624,Thai_sorusi:3625,Thai_sosua:3626,Thai_hohip:3627,Thai_lochula:3628,Thai_oang:3629,Thai_honokhuk:3630,Thai_paiyannoi:3631,Thai_saraa:3632,Thai_maihanakat:3633,Thai_saraaa:3634,Thai_saraam:3635,Thai_sarai:3636,Thai_saraii:3637,Thai_saraue:3638,Thai_sarauee:3639,Thai_sarau:3640,Thai_sarauu:3641,Thai_phinthu:3642,Thai_baht:3647,Thai_sarae:3648,Thai_saraae:3649,Thai_sarao:3650,Thai_saraaimaimuan:3651,Thai_saraaimaimalai:3652,Thai_lakkhangyao:3653,Thai_maiyamok:3654,Thai_maitaikhu:3655,Thai_maiek:3656,Thai_maitho:3657,Thai_maitri:3658,Thai_maichattawa:3659,Thai_thanthakhat:3660,Thai_nikhahit:3661,Thai_leksun:3664,Thai_leknung:3665,Thai_leksong:3666,Thai_leksam:3667,Thai_leksi:3668,Thai_lekha:3669,Thai_lekhok:3670,Thai_lekchet:3671,Thai_lekpaet:3672,Thai_lekkao:3673,Armenian_ligature_ew:1415,Armenian_full_stop:1417,Armenian_verjaket:1417,Armenian_separation_mark:1373,Armenian_but:1373,Armenian_hyphen:1418,Armenian_yentamna:1418,Armenian_exclam:1372,Armenian_amanak:1372,Armenian_accent:1371,Armenian_shesht:1371,Armenian_question:1374,Armenian_paruyk:1374,Armenian_AYB:1329,Armenian_ayb:1377,Armenian_BEN:1330,Armenian_ben:1378,Armenian_GIM:1331,Armenian_gim:1379,Armenian_DA:1332,Armenian_da:1380,Armenian_YECH:1333,Armenian_yech:1381,Armenian_ZA:1334,Armenian_za:1382,Armenian_E:1335,Armenian_e:1383,Armenian_AT:1336,Armenian_at:1384,Armenian_TO:1337,Armenian_to:1385,Armenian_ZHE:1338,Armenian_zhe:1386,Armenian_INI:1339,Armenian_ini:1387,Armenian_LYUN:1340,Armenian_lyun:1388,Armenian_KHE:1341,Armenian_khe:1389,Armenian_TSA:1342,Armenian_tsa:1390,Armenian_KEN:1343,Armenian_ken:1391,Armenian_HO:1344,Armenian_ho:1392,Armenian_DZA:1345,Armenian_dza:1393,Armenian_GHAT:1346,Armenian_ghat:1394,Armenian_TCHE:1347,Armenian_tche:1395,Armenian_MEN:1348,Armenian_men:1396,Armenian_HI:1349,Armenian_hi:1397,Armenian_NU:1350,Armenian_nu:1398,Armenian_SHA:1351,Armenian_sha:1399,Armenian_VO:1352,Armenian_vo:1400,Armenian_CHA:1353,Armenian_cha:1401,Armenian_PE:1354,Armenian_pe:1402,Armenian_JE:1355,Armenian_je:1403,Armenian_RA:1356,Armenian_ra:1404,Armenian_SE:1357,Armenian_se:1405,Armenian_VEV:1358,Armenian_vev:1406,Armenian_TYUN:1359,Armenian_tyun:1407,Armenian_RE:1360,Armenian_re:1408,Armenian_TSO:1361,Armenian_tso:1409,Armenian_VYUN:1362,Armenian_vyun:1410,Armenian_PYUR:1363,Armenian_pyur:1411,Armenian_KE:1364,Armenian_ke:1412,Armenian_O:1365,Armenian_o:1413,Armenian_FE:1366,Armenian_fe:1414,Armenian_apostrophe:1370,Georgian_an:4304,Georgian_ban:4305,Georgian_gan:4306,Georgian_don:4307,Georgian_en:4308,Georgian_vin:4309,Georgian_zen:4310,Georgian_tan:4311,Georgian_in:4312,Georgian_kan:4313,Georgian_las:4314,Georgian_man:4315,Georgian_nar:4316,Georgian_on:4317,Georgian_par:4318,Georgian_zhar:4319,Georgian_rae:4320,Georgian_san:4321,Georgian_tar:4322,Georgian_un:4323,Georgian_phar:4324,Georgian_khar:4325,Georgian_ghan:4326,Georgian_qar:4327,Georgian_shin:4328,Georgian_chin:4329,Georgian_can:4330,Georgian_jil:4331,Georgian_cil:4332,Georgian_char:4333,Georgian_xan:4334,Georgian_jhan:4335,Georgian_hae:4336,Georgian_he:4337,Georgian_hie:4338,Georgian_we:4339,Georgian_har:4340,Georgian_hoe:4341,Georgian_fi:4342,Xabovedot:7818,Ibreve:300,Zstroke:437,Gcaron:486,Ocaron:466,Obarred:415,xabovedot:7819,ibreve:301,zstroke:438,gcaron:487,ocaron:466,obarred:629,SCHWA:399,schwa:601,EZH:439,ezh:658,Lbelowdot:7734,lbelowdot:7735,Abelowdot:7840,abelowdot:7841,Ahook:7842,ahook:7843,Acircumflexacute:7844,acircumflexacute:7845,Acircumflexgrave:7846,acircumflexgrave:7847,Acircumflexhook:7848,acircumflexhook:7849,Acircumflextilde:7850,acircumflextilde:7851,Acircumflexbelowdot:7852,acircumflexbelowdot:7853,Abreveacute:7854,abreveacute:7855,Abrevegrave:7856,abrevegrave:7857,Abrevehook:7858,abrevehook:7859,Abrevetilde:7860,abrevetilde:7861,Abrevebelowdot:7862,abrevebelowdot:7863,Ebelowdot:7864,ebelowdot:7865,Ehook:7866,ehook:7867,Etilde:7868,etilde:7869,Ecircumflexacute:7870,ecircumflexacute:7871,Ecircumflexgrave:7872,ecircumflexgrave:7873,Ecircumflexhook:7874,ecircumflexhook:7875,Ecircumflextilde:7876,ecircumflextilde:7877,Ecircumflexbelowdot:7878,ecircumflexbelowdot:7879,Ihook:7880,ihook:7881,Ibelowdot:7882,ibelowdot:7883,Obelowdot:7884,obelowdot:7885,Ohook:7886,ohook:7887,Ocircumflexacute:7888,ocircumflexacute:7889,Ocircumflexgrave:7890,ocircumflexgrave:7891,Ocircumflexhook:7892,ocircumflexhook:7893,Ocircumflextilde:7894,ocircumflextilde:7895,Ocircumflexbelowdot:7896,ocircumflexbelowdot:7897,Ohornacute:7898,ohornacute:7899,Ohorngrave:7900,ohorngrave:7901,Ohornhook:7902,ohornhook:7903,Ohorntilde:7904,ohorntilde:7905,Ohornbelowdot:7906,ohornbelowdot:7907,Ubelowdot:7908,ubelowdot:7909,Uhook:7910,uhook:7911,Uhornacute:7912,uhornacute:7913,Uhorngrave:7914,uhorngrave:7915,Uhornhook:7916,uhornhook:7917,Uhorntilde:7918,uhorntilde:7919,Uhornbelowdot:7920,uhornbelowdot:7921,Ybelowdot:7924,ybelowdot:7925,Yhook:7926,yhook:7927,Ytilde:7928,ytilde:7929,Ohorn:416,ohorn:417,Uhorn:431,uhorn:432,EcuSign:8352,ColonSign:8353,CruzeiroSign:8354,FFrancSign:8355,LiraSign:8356,MillSign:8357,NairaSign:8358,PesetaSign:8359,RupeeSign:8360,WonSign:8361,NewSheqelSign:8362,DongSign:8363,EuroSign:8364,zerosuperior:8304,foursuperior:8308,fivesuperior:8309,sixsuperior:8310,sevensuperior:8311,eightsuperior:8312,ninesuperior:8313,zerosubscript:8320,onesubscript:8321,twosubscript:8322,threesubscript:8323,foursubscript:8324,fivesubscript:8325,sixsubscript:8326,sevensubscript:8327,eightsubscript:8328,ninesubscript:8329,partdifferential:8706,emptyset:8709,elementof:8712,notelementof:8713,containsas:8715,squareroot:8730,cuberoot:8731,fourthroot:8732,dintegral:8748,tintegral:8749,because:8757,approxeq:8773,notapproxeq:8775,notidentical:8802,stricteq:8803,braille_blank:10240,braille_dots_1:10241,braille_dots_2:10242,braille_dots_12:10243,braille_dots_3:10244,braille_dots_13:10245,braille_dots_23:10246,braille_dots_123:10247,braille_dots_4:10248,braille_dots_14:10249,braille_dots_24:10250,braille_dots_124:10251,braille_dots_34:10252,braille_dots_134:10253,braille_dots_234:10254,braille_dots_1234:10255,braille_dots_5:10256,braille_dots_15:10257,braille_dots_25:10258,braille_dots_125:10259,braille_dots_35:10260,braille_dots_135:10261,braille_dots_235:10262,braille_dots_1235:10263,braille_dots_45:10264,braille_dots_145:10265,braille_dots_245:10266,braille_dots_1245:10267,braille_dots_345:10268,braille_dots_1345:10269,braille_dots_2345:10270,braille_dots_12345:10271,braille_dots_6:10272,braille_dots_16:10273,braille_dots_26:10274,braille_dots_126:10275,braille_dots_36:10276,braille_dots_136:10277,braille_dots_236:10278,braille_dots_1236:10279,braille_dots_46:10280,braille_dots_146:10281,braille_dots_246:10282,braille_dots_1246:10283,braille_dots_346:10284,braille_dots_1346:10285,braille_dots_2346:10286,braille_dots_12346:10287,braille_dots_56:10288,braille_dots_156:10289,braille_dots_256:10290,braille_dots_1256:10291,braille_dots_356:10292,braille_dots_1356:10293,braille_dots_2356:10294,braille_dots_12356:10295,braille_dots_456:10296,braille_dots_1456:10297,braille_dots_2456:10298,braille_dots_12456:10299,braille_dots_3456:10300,braille_dots_13456:10301,braille_dots_23456:10302,braille_dots_123456:10303,braille_dots_7:10304,braille_dots_17:10305,braille_dots_27:10306,braille_dots_127:10307,braille_dots_37:10308,braille_dots_137:10309,braille_dots_237:10310,braille_dots_1237:10311,braille_dots_47:10312,braille_dots_147:10313,braille_dots_247:10314,braille_dots_1247:10315,braille_dots_347:10316,braille_dots_1347:10317,braille_dots_2347:10318,braille_dots_12347:10319,braille_dots_57:10320,braille_dots_157:10321,braille_dots_257:10322,braille_dots_1257:10323,braille_dots_357:10324,braille_dots_1357:10325,braille_dots_2357:10326,braille_dots_12357:10327,braille_dots_457:10328,braille_dots_1457:10329,braille_dots_2457:10330,braille_dots_12457:10331,braille_dots_3457:10332,braille_dots_13457:10333,braille_dots_23457:10334,braille_dots_123457:10335,braille_dots_67:10336,braille_dots_167:10337,braille_dots_267:10338,braille_dots_1267:10339,braille_dots_367:10340,braille_dots_1367:10341,braille_dots_2367:10342,braille_dots_12367:10343,braille_dots_467:10344,braille_dots_1467:10345,braille_dots_2467:10346,braille_dots_12467:10347,braille_dots_3467:10348,braille_dots_13467:10349,braille_dots_23467:10350,braille_dots_123467:10351,braille_dots_567:10352,braille_dots_1567:10353,braille_dots_2567:10354,braille_dots_12567:10355,braille_dots_3567:10356,braille_dots_13567:10357,braille_dots_23567:10358,braille_dots_123567:10359,braille_dots_4567:10360,braille_dots_14567:10361,braille_dots_24567:10362,braille_dots_124567:10363,braille_dots_34567:10364,braille_dots_134567:10365,braille_dots_234567:10366,braille_dots_1234567:10367,braille_dots_8:10368,braille_dots_18:10369,braille_dots_28:10370,braille_dots_128:10371,braille_dots_38:10372,braille_dots_138:10373,braille_dots_238:10374,braille_dots_1238:10375,braille_dots_48:10376,braille_dots_148:10377,braille_dots_248:10378,braille_dots_1248:10379,braille_dots_348:10380,braille_dots_1348:10381,braille_dots_2348:10382,braille_dots_12348:10383,braille_dots_58:10384,braille_dots_158:10385,braille_dots_258:10386,braille_dots_1258:10387,braille_dots_358:10388,braille_dots_1358:10389,braille_dots_2358:10390,braille_dots_12358:10391,braille_dots_458:10392,braille_dots_1458:10393,braille_dots_2458:10394,braille_dots_12458:10395,braille_dots_3458:10396,braille_dots_13458:10397,braille_dots_23458:10398,braille_dots_123458:10399,braille_dots_68:10400,braille_dots_168:10401,braille_dots_268:10402,braille_dots_1268:10403,braille_dots_368:10404,braille_dots_1368:10405,braille_dots_2368:10406,braille_dots_12368:10407,braille_dots_468:10408,braille_dots_1468:10409,braille_dots_2468:10410,braille_dots_12468:10411,braille_dots_3468:10412,braille_dots_13468:10413,braille_dots_23468:10414,braille_dots_123468:10415,braille_dots_568:10416,braille_dots_1568:10417,braille_dots_2568:10418,braille_dots_12568:10419,braille_dots_3568:10420,braille_dots_13568:10421,braille_dots_23568:10422,braille_dots_123568:10423,braille_dots_4568:10424,braille_dots_14568:10425,braille_dots_24568:10426,braille_dots_124568:10427,braille_dots_34568:10428,braille_dots_134568:10429,braille_dots_234568:10430,braille_dots_1234568:10431,braille_dots_78:10432,braille_dots_178:10433,braille_dots_278:10434,braille_dots_1278:10435,braille_dots_378:10436,braille_dots_1378:10437,braille_dots_2378:10438,braille_dots_12378:10439,braille_dots_478:10440,braille_dots_1478:10441,braille_dots_2478:10442,braille_dots_12478:10443,braille_dots_3478:10444,braille_dots_13478:10445,braille_dots_23478:10446,braille_dots_123478:10447,braille_dots_578:10448,braille_dots_1578:10449,braille_dots_2578:10450,braille_dots_12578:10451,braille_dots_3578:10452,braille_dots_13578:10453,braille_dots_23578:10454,braille_dots_123578:10455,braille_dots_4578:10456,braille_dots_14578:10457,braille_dots_24578:10458,braille_dots_124578:10459,braille_dots_34578:10460,braille_dots_134578:10461,braille_dots_234578:10462,braille_dots_1234578:10463,braille_dots_678:10464,braille_dots_1678:10465,braille_dots_2678:10466,braille_dots_12678:10467,braille_dots_3678:10468,braille_dots_13678:10469,braille_dots_23678:10470,braille_dots_123678:10471,braille_dots_4678:10472,braille_dots_14678:10473,braille_dots_24678:10474,braille_dots_124678:10475,braille_dots_34678:10476,braille_dots_134678:10477,braille_dots_234678:10478,braille_dots_1234678:10479,braille_dots_5678:10480,braille_dots_15678:10481,braille_dots_25678:10482,braille_dots_125678:10483,braille_dots_35678:10484,braille_dots_135678:10485,braille_dots_235678:10486,braille_dots_1235678:10487,braille_dots_45678:10488,braille_dots_145678:10489,braille_dots_245678:10490,braille_dots_1245678:10491,braille_dots_345678:10492,braille_dots_1345678:10493,braille_dots_2345678:10494,braille_dots_12345678:10495,Sinh_ng:3458,Sinh_h2:3459,Sinh_a:3461,Sinh_aa:3462,Sinh_ae:3463,Sinh_aee:3464,Sinh_i:3465,Sinh_ii:3466,Sinh_u:3467,Sinh_uu:3468,Sinh_ri:3469,Sinh_rii:3470,Sinh_lu:3471,Sinh_luu:3472,Sinh_e:3473,Sinh_ee:3474,Sinh_ai:3475,Sinh_o:3476,Sinh_oo:3477,Sinh_au:3478,Sinh_ka:3482,Sinh_kha:3483,Sinh_ga:3484,Sinh_gha:3485,Sinh_ng2:3486,Sinh_nga:3487,Sinh_ca:3488,Sinh_cha:3489,Sinh_ja:3490,Sinh_jha:3491,Sinh_nya:3492,Sinh_jnya:3493,Sinh_nja:3494,Sinh_tta:3495,Sinh_ttha:3496,Sinh_dda:3497,Sinh_ddha:3498,Sinh_nna:3499,Sinh_ndda:3500,Sinh_tha:3501,Sinh_thha:3502,Sinh_dha:3503,Sinh_dhha:3504,Sinh_na:3505,Sinh_ndha:3507,Sinh_pa:3508,Sinh_pha:3509,Sinh_ba:3510,Sinh_bha:3511,Sinh_ma:3512,Sinh_mba:3513,Sinh_ya:3514,Sinh_ra:3515,Sinh_la:3517,Sinh_va:3520,Sinh_sha:3521,Sinh_ssha:3522,Sinh_sa:3523,Sinh_ha:3524,Sinh_lla:3525,Sinh_fa:3526,Sinh_al:3530,Sinh_aa2:3535,Sinh_ae2:3536,Sinh_aee2:3537,Sinh_i2:3538,Sinh_ii2:3539,Sinh_u2:3540,Sinh_uu2:3542,Sinh_ru2:3544,Sinh_e2:3545,Sinh_ee2:3546,Sinh_ai2:3547,Sinh_o2:3548,Sinh_oo2:3549,Sinh_au2:3550,Sinh_lu2:3551,Sinh_ruu2:3570,Sinh_luu2:3571,Sinh_kunddaliya:3572},B=Object.keys(I).reduce(function(t,e){return Object.assign({},t,d()({},String.fromCharCode(I[e]),e))},{}),R={"aac+mpeg4":'audio/mp4; codecs="mp4a.40.2"',mp3:"audio/mpeg","mp3+mpeg4":'audio/mp4; codecs="mp3"',ogg:"audio/ogg",wav:"audio/wav",flac:"audio/flac","opus+mka":'audio/webm; codecs="opus"',"vorbis+mka":'audio/webm; codecs="vorbis"',"vorbis+ogg":'audio/ogg; codecs="vorbis"',"speex+ogg":'audio/ogg; codecs="speex"',"flac+ogg":'audio/ogg; codecs="flac"',"opus+ogg":'audio/ogg; codecs="opus"'},N=["opus+mka","vorbis+mka","opus+ogg","vorbis+ogg","opus","vorbis","speex+ogg","flac+ogg","aac+mpeg4","mp3+mpeg4","mp3","flac","wav","wave"],U={wav:"lpcm",mp3:"mp3",flac:"flac","aac+mpeg4":"mp4a"},L=r(66),P=r.n(L),D=function(t){return t.charCodeAt(0)},x=function(){return performance?Math.round(performance.now()):Date.now()},O=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10400,r="";if(t.subarray)for(var i=0,n=t.length;i<n;i+=e)r+=String.fromCharCode.apply(null,t.subarray(i,Math.min(i+e,n)));else for(var a=0,s=t.length;a<s;a+=e)r+=String.fromCharCode.apply(null,t.slice(a,Math.min(a+e,s)));return window.btoa(r)},M=function(t){var e=t.subarray(0,4),r=e[0]|e[1]<<8|e[2]<<16|e[3]<<24,i=new Uint8Array(r);return{uncompressedSize:P.a.decodeBlock(t,i,4),inflated:i}},V=function(t){for(var e=new Uint8Array(t.length),r=0,i=t.length;r<i;++r)e[r]=t.charCodeAt(r);return e},K=function(){for(var t=[],e=0;e<36;e++)t[e]=8===e||13===e||18===e||23===e?"-":"0123456789abcdef".substr(Math.floor(16*Math.random()),1);return t.join("")},F=function(t,e,r){var i=Math.round(25.4*t/r),n=Math.round(25.4*e/r);return[["HTML",t,e,i,n,[["Canvas",0,0,t,e,i,n]],0,0,t,e]]},z=function(t,e,r){if(t.startsWith("hmac")){var i="md5";t.indexOf("+")>0&&(i=t.split("+")[1]);var n=f.a.hmac.create();return n.start(i,e),n.update(r),n.digest().toHex()}return"xor"===t?function(t,e){var r="";if(t.length!==e.length)throw new Error("strings must be equal length");for(var i=0;i<t.length;i++)r+=String.fromCharCode(t[i].charCodeAt(0)^e[i].charCodeAt(0));return r}(r.slice(0,e.length),e):null},j={Win:{type:"win32",name:"Microsoft Windows"},Mac:{type:"darwin",name:"Mac OSX"},Linux:{type:"linux",name:"Linux"},X11:{type:"posix",name:"Posix"}},G=function(t,e){var r=["hmac","hmac+md5","xor"].concat(n()(Object.keys(f.a.md.algorithms).map(function(t){return"hmac+".concat(t)}))),i=["jpeg","png","rgb","rgb32"];(function(){try{var t=document.createElement("canvas");if(t.getContext("2d"))return 0==t.toDataURL("image/webp").indexOf("data:image/webp")}catch(t){console.warn(t)}return!1})()&&i.push("webp");var a=t.image_codecs.length>0?t.image_codecs:i;return{digest:r,"salt-digest":r,"generic-rgb-encodings":!0,"sound.decoders":t.audio_codecs.length>0?t.audio_codecs:e,encodings:a,"encoding.generic":!0,"encoding.rgb24zlib":!0,"encoding.rgb_zlib":!0,"encoding.icons.max_size":[30,30],"encodings.core":a,"encodings.rgb_formats":["RGBX","RGBA"],"encodings.window-icon":["png"],"encodings.cursor":["png"],"encoding.flush":!0,"encoding.transparency":!0,"encoding.client_options":!0,"encoding.csc_atoms":!0,"encoding.scrolling":!0,"encoding.color-gamut":function(){var t,e={rec2020:"(color-gamut: rec2020)",P3:"(color-gamut: p3)",srgb:"(color-gamut: srgb)"};return"function"==typeof window.matchMedia&&(t=Object.keys(e).find(function(t){return window.matchMedia(e[t]).matches})),t||""}(),"encoding.video_scaling":!0,"encoding.video_max_size":[1024,768],"encoding.eos":!0,"encoding.full_csc_modes":{mpeg1:["YUV420P"],h264:["YUV420P"],"mpeg4+mp4":["YUV420P"],"h264+mp4":["YUV420P"],"vp8+webm":["YUV420P"],webp:["BGRX","BGRA"]},"encoding.h264.YUV420P.profile":"baseline","encoding.h264.YUV420P.level":"2.1","encoding.h264.cabac":!1,"encoding.h264.deblocking-filter":!1,"encoding.h264.fast-decode":!0,"encoding.h264+mp4.YUV420P.profile":"main","encoding.h264+mp4.YUV420P.level":"3.0","encoding.h264.score-delta":-20,"encoding.h264+mp4.score-delta":50,"encoding.mpeg4+mp4.score-delta":50,"encoding.vp8+webm.score-delta":50}},H=function(t){var e=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en",e=["language","browserLanguage","systemLanguage","userLanguage"].map(function(t){return navigator[t]}).filter(function(t){return!!t});return(navigator.languages||[e||t]).map(function(t){return t.split(/-|_/)[0]})[0]}(),r=Object.keys(A).reduce(function(t,e){return n()(t).concat([[parseInt(e,10),A[e],parseInt(e,10),0,0]])},[]);return{share:t.share,steal:t.steal,windows:!0,"file-transfer":t.transfer,printing:t.printing,"file-size-limit":10,auto_refresh_delay:500,randr_notify:!0,raw_window_icons:!0,cursors:!0,bell:t.bell,system_tray:!0,"server-window-resize":!0,named_cursors:!1,"notify-startup-complete":!0,"window.raise":!0,"window.initiate-moveresize":!0,"metadata.supported":["fullscreen","maximized","above","below","title","size-hints","class-instance","transient-for","window-type","has-alpha","decorations","override-redirect","tray","modal","opacity"],"sound.receive":t.sound,"sound.send":!1,"sound.server_driven":!0,"sound.bundle-metadata":!0,keyboard:t.keyboard,xkbmap_layout:t.language||e,xkbmap_keycodes:r,xkbmap_print:"",xkbmap_query:"",desktop_size:t.screen,desktop_mode_size:t.screen,screen_sizes:F(t.screen[0],t.screen[1],t.dpi),dpi:t.dpi,clipboard_enabled:t.clipboard,"clipboard.want_targets":!0,"clipboard.greedy":!0,"clipboard.selections":["CLIPBOARD","PRIMARY"],notifications:t.notifications,"notifications.close":!0,"notifications.actions":!0}},q=function(t,e){var r=function(){var t=navigator,e=t.appVersion,r=t.oscpu,i=t.cpuClass,n=Object.keys(j).find(function(t){return e.includes(t)});return Object.assign({type:"unknown",name:"unknown",processor:r||i||"unknown",platform:e},n?j[n]:{})}(),i={name:"Chrome",agent:navigator.userAgent},n=H(t),a=G(t,e);return Object.assign({version:"2.4",platform:r.type,"platform.name":r.name,"patform.processor":r.processor,"platform.platform":r.platform,"session-type":i.name,"session-type.full":i.agent,namespace:!0,client_type:"HTML5",username:t.username,uuid:t.uuid,argv:[window.location.href],zlib:t.zlib,lzi:!1,lz4:t.lz4,"lz4.js.version":"0.2.0","encoding.rgb_lz4":!0,compression_level:t.compression_level,rencode:!1,bencode:!0,yaml:!1,"open-url":!0},n,a,{})},W=r(26),Y=r.n(W),Q=r(24),X=r.n(Q),Z=function(t,e){return function(r){var i,n=r.w,a=r.h,s=r.coding,o=r.options,u=Object.assign({},r,{w:o.scaled_size?o.scaled_size[0]:n,h:o.scaled_size?o.scaled_size[1]:a});-1!==["jpeg","png","webp"].indexOf(s)?i=function(t){var e=t.x,r=t.y,i=(t.w,t.h,t.coding),n=t.data;return function(t,a){var s=t.drawContext,o=O(n),u=new Image;u.onload=function(t){0===u.width||0===u.height?a("Invalid image size"):(s.drawImage(u,e,r),a())},u.onerror=function(t){return a("Image failed to load: "+i)},u.src="data:image/".concat(i,";base64,").concat(o)}}(u):"rgb32"===s?i=function(t){var e=t.x,r=t.y,i=t.w,n=t.h,a=t.data,s=t.options;return function(t,o){var u=t.drawContext,c=u.createImageData(i,n);if(s.zlib>0)a=X.a.inflateSync(a);else if(s.lz4>0){var l=M(a),h=l.uncompressedSize,f=l.inflated;a=f.slice(0,h)}a.length>c.data.length?o("Data size mismatch"):(c.data.set(a),u.putImageData(c,e,r),o())}}(u):"mpeg1"===s?console.warn("Skippet frame using",s):"h264"===s?console.warn("Skippet frame using",s):-1!==["h264+mp4","vp8+webm","mpeg4+mp4"].indexOf(s)?console.warn("Skippet frame using",s):"scroll"===s&&(i=function(t){t.x,t.y,t.w,t.h;var e=t.data;return function(t,r){for(var i=t.drawContext,n=t.canvas,a=0,s=e.length;a<s;++a){var o=Y()(e[a],6),u=o[0],c=o[1],l=o[2],h=o[3],f=o[4],p=o[5];i.drawImage(n,u,c,l,h,u+f,c+p,l,h)}r()}}(u)),i&&i(t,e)}},J={altKey:"alt",ctrlKey:"control",metaKey:"meta",shiftKey:"shift"},$=function(t){return Object.keys(J).filter(function(e){return t[e]}).map(function(t){return J[t]})},tt=function(t){var e=!1,r=!1,i=function(t){return function(t,e,r){var i=$(event);return e&&i.push("lock"),r&&i.push("numlock"),function(t){return t}(i)}(0,e,r)};return{modifiers:i,process:function(n,a){var s=a?a.wid:0,o=($(n),i()),u=o.includes("shift");if("keydown"===n.type||"keyup"===n.type){var c=n.which||event.keyCode;if(229===c)return!1;var l="keydown"===n.type;144===c&&l&&(r=!r);var h=event.key||String.fromCharCode(c),f=n.code||"";return f!=h&&h in k?r="0123456789.".includes(f=k[h]):f in T?f=T[f]:h in B?f=B[h]:c in A&&(f=A[c]),f.match("_L$")&&2===n.location&&(f=f.replace("_L","_R")),("AltGraph"==h||"Alt_R"===f&&w)&&(l,f="ISO_Level3_Shift",h="AltGraph"),(e&&u||!e&&!u)&&(h=h.toLowerCase()),t("key-action",s,f,l,o,c,h,c,0),!0}return"keypress"===n.type&&(e=function(t,e){var r=t.which||t.keyCode;return!!(r>=97&&r<=122&&e)||r>=65&&r<=90&&!e}(n,u),!0)}}},et=function(){var t=document.createElement("div");return["wheel","mousewheel","DOMMouseScroll"].find(function(e){var r="on".concat(e);return t.setAttribute(r,"return;"),"function"==typeof t[r]})}(),rt=function(){var t=0,e=0;return function(r,i,n){var a=function(t){var e=0,r=0,i=0,n=0;return"detail"in t&&(r=t.detail),"wheelDelta"in t&&(r=-t.wheelDelta/120),"wheelDeltaY"in t&&(r=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(e=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(e=r,r=0),i=10*e,n=10*r,"deltaY"in t&&(n=t.deltaY),"deltaX"in t&&(i=t.deltaX),(i||n)&&t.deltaMode&&(1==t.deltaMode?(i*=40,n*=40):(i*=800,n*=800)),i&&!e&&(e=i<1?-1:1),n&&!r&&(r=n<1?-1:1),{spinX:e,spinY:r,pixelX:i,pixelY:n,deltaMode:t.deltaMode||0}}(r),s=Math.min(1200,a.pixelX),o=Math.min(1200,a.pixelY),u=Math.abs(s),c=Math.abs(o);u>=40&&u<=160?t=s>0?120:-120:t+=s,c>=40&&c<=160?e=o>0?120:-120:e+=o;for(var l=Math.abs(t),h=Math.abs(e),f=t>=0?6:7,p=e>=0?5:4;l>=120;)l-=120,i(f);for(;h>=120;)h-=120,i(p);t=t>=0?l:-l,e=e>=0?h:-h}}(),it=function(t,e){var r=0,i=0;if(e){var n=e.canvas.getBoundingClientRect(),a=n.top;r=n.left-e.x,i=a-e.y}return{x:parseInt(t.clientX-r,10),y:parseInt(t.clientY-i,10),button:function(t){var e=t.which?Math.max(0,t.which):t.button?Math.max(0,t.button)+1:0;return 4===e?e=8:5===e&&(e=9),e}(t),buttons:[]}},nt=function(t,e){return{process:function(r,i){var n=i?i.wid:0,a=e.modifiers(r);if("mousemove"===r.type){var s=it(r,i),o=s.x,u=s.y,c=s.buttons;t("pointer-position",n,[o,u],a,c)}else if("mousedown"===r.type||"mouseup"===r.type){var l="mousedown"===r.type,h=it(r,i),f=h.x,p=h.y,d=h.button,g=h.buttons;t("button-action",n,d,l,[f,p],a,g)}else if(r.type===et){var y=it(r,i),m=function(e,r,i,n,a){return function(s){t("button-action",e,s,!0,[r,i],n,a),t("button-action",e,s,!1,[r,i],n,a)}}(n,y.x,y.y,a,y.buttons);rt(r,m,m,void 0)}}}},at=r(25),st=r.n(at),ot=window.MediaSource||window.WebKitMediaSource,ut=function(t){var e={}.hasOwnProperty,r=new(function(r){function i(){}return function(t,r){for(var i in r)e.call(r,i)&&(t[i]=r[i]);function n(){this.constructor=t}n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype}(i,t.EventEmitter),i.prototype.start=function(){return!0},i.prototype.pause=function(){return!0},i.prototype.reset=function(){return!0},i.prototype._on_data=function(e){var r=new t.Buffer(e);return this.emit("data",r)},i}()),i=new t.Asset(r);return new t.Player(i)},ct=window.MediaSource||window.WebKitMediaSource,lt={stream:function(t){var e=document.createElement("audio");e.setAttribute("autoplay",!0),e.setAttribute("controls",!1),e.setAttribute("loop",!0);return{start:function(t){var r=function(t){return t.uri.replace(/^ws/,"http").replace(/\/?$/,"/")+"audio.mp3?uuid=".concat(t.uuid)}(t);e.src=r,e.play()},stop:function(){e.pause()},ready:function(){return!0}}},mediasource:function(t,e,r){var i=!1,n=null,a=new ot;a.addEventListener("error",function(t){console.warn("Media failed",t),r()}),a.addEventListener("sourceopen",function(){if(!i){try{(n=a.addSourceBuffer(t.codecMedia)).mode="sequence",n.addEventListener("error",function(t){console.warn("Buffer failed",t),r()})}catch(t){console.warn("Buffer exception",t),r()}i=!0,e()}});var s=window.URL.createObjectURL(a),o=document.createElement("audio");o.setAttribute("autoplay",!0),o.setAttribute("controls",!1),o.setAttribute("loop",!0),o.src=s;return{start:function(){},stop:function(){o.pause(),n&&a.removeSourceBuffer(n),"open"===a.readyState&&a.endOfStream(),n=null},push:function(t){n&&(n.appendBuffer(t),o.paused&&o.play())},ready:function(){return n&&!n.updating}}},aurora:function(t,e,r){var i=ut(st.a);return{start:function(){e(),i.play()},stop:function(){i.stop()},push:function(t){return i.asset.source._on_data(t)},ready:function(){return!!i}}}},ht=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=function(){var t=[];return b||C?(t+=["opus+mka","vorbis+mka"],C&&(t+=["wav"])):E&&(t=["aac+mpeg4"],S&&(t+=["opus+mka"])),t}();return{mediasource:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return v||!ct?{}:Object.keys(R).filter(function(e){return-1===t.indexOf(e)}).filter(function(t){return ct.isTypeSupported(R[t])}).reduce(function(t,e){return Object.assign(d()({},e,R[e]),t)},{})}(n()(t).concat(n()(e))),aurora:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return v?{}:Object.keys(U).filter(function(e){return-1===t.indexOf(e)}).filter(function(t){return st.a.Decoder.find(U[t])}).reduce(function(t,e){return Object.assign(d()({},e,U[e]),t)},{})}(n()(t)),stream:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return["mp3"].filter(function(e){return-1===t.indexOf(e)}).reduce(function(t,e){return Object.assign(d()({},e,R[e]),t)},{})}(n()(t))}},ft=function(t,e,r){var i=r["sound.encoders"],n=t;n||(n=v?-1!==e.frameworks.mediasource.indexOf(s)?"mediasource":"stream":"aurora");var a=e.force.length>0?e.force:Object.keys(e.frameworks[n]),s=function(t,e){if(!t.length)return null;var r=N.filter(function(t){return-1!==e.indexOf(t)}).find(function(e){return t.includes(e)}),i=t.find(function(t){return-1!==e.indexOf(t)});return r||i}(a,i);return{codec:s,codecMedia:R[s],codecs:a,framework:n}},pt=function(t){var e,r=!1,i=[],n=0,a=3,s=function(t){if(console.debug("---","Stopping audio stream",t),e)try{e.stop()}catch(e){console.warn(e),t=!0}r=!0===t},o=function(){console.debug("---","Starting audio stream"),i=[],n=0,e&&e.start()},u=function(t,r,o){if(e){if(i.legngth>=250)return console.warn("Audio overflow"),void s();if(o){for(var u=0;u<o.length;u++)i.push(V(o[u]));a=1}r&&i.push(r),e.ready()&&(n>0||i.length>=a)&&(r=1===i.length?i[0]:function(t){for(var e=0,r=0,i=t.length;r<i;++r)e+=t[r].length;var n=new Uint8Array(e);e=0;for(var a=0,s=t.length;a<s;++a){var o=t[a];o.length>0&&(n.set(o,e),e+=o.length)}return n}(i),n+=1,i=[],e.push(r))}};return Object.freeze({process:function(t,e,i,n){if(!r)if(i["start-of-stream"])o();else if(e)try{u(0,e,n)}catch(t){console.warn("Audio stream aborted",t),s(!0)}},start:function(r,i,n,a){var s=ft(r,i,a);console.info("init audio",s),s.framework&&(e=lt[s.framework](s,function(){return t("sound-control","start",s.codec)},function(){return t("sound-control","stop")})),o()},destroy:function(){return s()}})},dt=r(67),gt=r.n(dt);function yt(t){if(null===t||void 0===t)throw"invalid: cannot encode null";switch(Ct(t)){case"string":return function(t){return t.length+":"+t}(t);case"number":return Et(t);case"list":return function(t){var e;for(var r in e="l",t)e+=yt(t[r]);return e+"e"}(t);case"dictionary":return function(t){var e;for(var r in e="d",t)e+=yt(r)+yt(t[r]);return e+"e"}(t);case"boolean":return Et(t?1:0);default:throw"invalid object type in source: "+Ct(t)}}function mt(t){return t.substr||(t=function(t){for(var e="",r=t.slice,i=0,n=t.length;i<n;i+=10400)e+=r?String.fromCharCode.apply(null,t.slice(i,Math.min(i+10400,n))):String.fromCharCode.apply(null,t.subarray(i,Math.min(i+10400,n)));return e}(t)),vt(t)[0]}function vt(t){switch(t.charAt(0)){case"d":return function(t){var e,r,i={};for(;"e"!==t.charAt(0)&&t.length>0;){if(null===(e=_t(t)))return null;if(null===(r=vt(e[1])))return null;i[e[0]]=r[0],t=r[1]}if(t.length<=0)return null;return[i,t.substr(1)]}(t.substr(1));case"l":return function(t){var e,r=[];for(;"e"!==t.charAt(0)&&t.length>0;){if(null===(e=vt(t)))return null;r[r.length]=e[0],t=e[1]}if(t.length<=0)throw"unexpected end of buffer reading list";return[r,t.substr(1)]}(t.substr(1));case"i":return function(t){var e=t.split("e",1)[0];if(!bt(e))return null;return[parseInt(e,10),t.substr(e.length+1)]}(t.substr(1));default:return _t(t)}}function _t(t){var e=t.split(":",1)[0];if(bt(e)){var r=parseInt(e,10);return[t.substr(e.length+1,r),t.substr(e.length+1+r)]}return null}function bt(t){return!isNaN(t.toString())}function Ct(t){var e=gt()(t);return"object"===e?void 0===t.length?"dictionary":"list":e}function Et(t){return"i"+t+"e"}var St=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var i;null===e[1].match(/^(ping|pointer|button|cursor|draw|damage|sound-data)/)&&(i=console).debug.apply(i,e)},wt=function(t){if("string"==typeof t){for(var e=new Uint8Array(t.length),r=0,i=t.length;r<i;++r)e[r]=t.charCodeAt(r);return e}return null},At=function(t){for(var e=t.length,r=t.split("").map(D),i=[D("P"),0,0,0],a=3;a>=0;a--)i.push(e>>8*a&255);return i.concat(n()(r))},Tt=function(t){var e=[],r=[],i=[],a=function(t,r,i){var n;if(e[0].length===i)n=e.shift();else{n=new Uint8Array(i);for(var a=0;a<i;){var s=e[0],o=i-a;s.length>o?(n.set(s.subarray(0,o),a),a+=o,e[0]=s.subarray(o)):(n.set(s,a),a+=s.length,e.shift())}}return function(t,e,r){if(0!==t){if(16&t){var i=M(r),n=i.inflated,a=i.uncompressedSize;return a<=0&&e+a!==0?(console.error("failed to decompress lz4 data, error code",a),null):n}return X.a.inflateSync(r)}return r}(t,i,n)},s=function(){if(!function(){if(r.length<8&&e.length>0)for(;r.length<8&&e.length>0;){for(var t=e[0],i=8-r.length,n=Math.min(i,t.length),a=0;a<n;a++)r.push(t[a]);if(t.length>i?e[0]=t.subarray(n):e.shift(),r[0]!==D("P"))return console.error("Invalid packet header format",r,D("P")),!1}return!(r.length<8)}())return!1;var s=function(t,e){var r={flags:t[1],padding:0,crypto:2&t[1]};if(0!==r.flags&&!r.crypto)return console.error("we can't handle this protocol flag yet",r),!1;var i=t[2];if(32&i)return console.error("lzo compression is not supported"),!1;var n=t[3];if(n>=20)return console.error("Invalid packet index",n),!1;for(var a=0,s=0;s<4;s++)a*=256,a+=t[4+s];for(var o=0,u=0,c=e.length;u<c;++u)o+=e[u].length;return!(o<a)&&{index:n,level:i,proto:r,packetSize:a}}(r,e);if(!1===s)return!1;r=[];var o=s.index,u=s.level,c=(s.proto,s.packetSize),l=a(u,0,c);if(o>0)i[o]=l;else try{var h=function(t,e){var r=mt(t);for(var i in e)r[i]=e[i];if("draw"===r[0]&&"scroll"!==r[6]){var n=wt(r[7]);null!==n&&(r[7]=n)}return r}(l,i);St.apply(void 0,["<<<"].concat(n()(h))),t.apply(void 0,n()(h)),i=[]}catch(t){return console.error("error decoding packet",t),!1}return!0};return{clear:function(){e=[]},push:function(t){e.push(t),s()}}},kt=function(){var t=[];return{clear:function(){t=[]},push:function(e,r){t.push(e),function(e){for(;0!==t.length;){var r=t.shift();if(r&&e){St.apply(void 0,[">>>"].concat(n()(r)));var i=yt(r),a=At(i),s=new Uint8Array(a).buffer;e.send(s)}}}(r)}}},It=function(t){var e,r=Tt(function(){return t.emit.apply(t,arguments)}),i=kt();return t.on("ws:data",function(t,i){return r.push(i,e)}),{send:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return i.push(r,e)},close:function(){e&&e.close(),e=null},open:function(r){e=function(t,e){var r=new WebSocket(t,"binary");return r.binaryType="arraybuffer",r.onopen=function(t){return e.emit("ws:open",t)},r.onclose=function(t){return e.emit("ws:close",t)},r.onerror=function(t){return e.emit("ws:error",t)},r.onmessage=function(t){var r=new Uint8Array(t.data);e.emit("ws:data",t,r)},r}(r.uri,t)},flush:function(){i.clear(),r.clear()}}},Bt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.assign({uuid:K(),uri:"ws://localhost:10000",audio_framework:null,audio_codec_blacklist:[],audio_codecs:[],image_codecs:[],screen:[window.innerWidth,window.innerHeight],dpi:"deviceXDPI"in screen?(screen.systemXDPI+screen.systemYDPI)/2:96,compression_level:1,reconnect:!0,notifications:!0,clipboard:!1,sound:!0,bell:!0,printing:!1,transfer:!1,keyboard:!0,share:!0,steal:!0,language:null,username:"",password:"",zlib:!0,lz4:!0},t,e)},Rt=function(t,e,r,i,n,a,s,o,u){var c=!!t,l=document.createElement("canvas");l.width=n,l.height=a;var h=l.getContext("2d"),f=function(t,e){var r=t.wid,i=t.canvas,n=t.context,a=!0,s=[],o=document.createElement("canvas");o.width=i.width,o.height=i.height;var u=o.getContext("2d");u.imageSmoothingEnabled=!1;var c={canvas:i,context:n,drawCanvas:o,drawContext:u};return window.requestAnimationFrame(function t(){if(a)if(0===s.length)window.requestAnimationFrame(t);else{var i=s.shift(),u=Y()(i,2),l=u[0],h=u[1],f=x()-l;f>1e3&&console.warn("A frame was very late....");var p=Y()(h,9),d=p[0],g=p[1],y=p[2],m=p[3],v=p[4],_=p[5],b=p[6],C=p[7],E=p[8];E=E||{};var S=Object.freeze({x:d,y:g,w:y,h:m,coding:v,data:_,sequence:b,rowstride:C,options:E});Z(c,function(i,a){i?(console.warn(i),e("damage-sequence",b,r,y,m,-1,"")):e("damage-sequence",b,r,y,m,f,""),n.drawImage(o,0,0),window.requestAnimationFrame(t)})(S)}}),{push:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return s.push([x(),e])},stop:function(){return a=!1}}}({wid:e,canvas:l,context:h},u);return{wid:e,x:r,y:i,w:n,h:a,parent:t,overlay:c,canvas:l,context:h,metadata:s,properties:o,draw:function(){return f.push.apply(f,arguments)},updateMetadata:function(t){return Object.assign(s,t)},destroy:function(){return f.stop()}}},Nt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=Object.assign({worker:"worker.js"},e);var r,i,a,s,o=new l("XpraClient"),u=function(t,e){if(window.Worker){var r=new Worker(e.worker);return r.onmessage=function(e){var r=e.data;"data"===r.event?t.emit.apply(t,n()(r.args)):t.emit.apply(t,[r.event].concat(n()(r.args)))},{send:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return r.postMessage({command:"send",packet:e})},close:function(){return r.postMessage({command:"close"})},open:function(t){return r.postMessage({command:"open",config:t})},flush:function(){return r.postMessage({command:"flush"})}}}return It(t)}(o,e),c=u.send,h=function(){return c("ping",x())},f=tt(c),p=nt(c,f),d=pt(c),g=!1,y=!1,m=[],v=0,_=0,b={reconnecting:function(){return!1},connecting:function(){return y},connected:function(){return g}},C=function(){return Object.keys(b).find(function(t){return!0===b[t]()})||"disconnected"},E=function(){return o.emit("ws:status",C())},S=function(t){return m.find(function(e){return e.wid===t})},w=function(t){S(t)?(v!==t&&c("focus",t,[]),v=t,o.emit("window:focus",{wid:t})):v=0},A=function(t){g=!1,y=!1,t||u.close(),E(),m=[],d.destroy(),u.flush()},T=function(t,e,r,i,n,a,s,o,u){var c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:{},l=S(t);l&&l.draw(e,r,i,n,a,s,o,u,c)},k=function(t,e){return function(){for(var r=arguments.length,i=new Array(r),n=0;n<r;n++)i[n]=arguments[n];var s;g&&a&&a["remote-logging.multi-line"]?c("logging",e,i.map(function(t){return unescape(encodeURIComponent(String(t)))})):(s=console)[t].apply(s,i)}},I=function(){var t;return function(e,i){clearTimeout(t),t=setTimeout(function(){var t=F(e,i,r.dpi);c("desktop_size",e,i,t)},100)}}(),B={error:k("error",40),warn:k("warn",30),log:k("log",20),info:k("info",20),debug:k("debug",10)};return o.on("ws:open",function(){s=function(t){var e=t.audio_codecs||[],r=ht(t.audio_codec_blacklist);return{frameworks:r,codecs:Object.values(r).reduce(function(t,e){return n()(t).concat(n()(Object.keys(e)))},[]),force:e}}(r),i=q(r,s.codecs),console.debug("!!!",{config:r,audioCodecs:s,clientCapabilities:i});var t=Object.assign({},i);(r.username||r.password)&&(t.challenge=!0),c("hello",t)}),o.on("ws:close",function(){return A(!0)}),o.on("disconnect",function(){return A(!0)}),o.on("hello",function(t){return a=t}),o.on("ping",function(t){return c("ping_echo",t,0,0,0,0)}),o.on("challenge",function(t,e,n,a){a=a||"xor",console.debug("--- challenge",{serverSalt:t,digest:n,saltDigest:a});try{var s=function(t,e){var r="xor"===t?e.length:32;if(r<16||r>256)throw new Error("Invalid salt length of",r);for(var i="";i.length<r;)i+=K();return i.slice(0,r)}(a,t),o=z(a,s,t);if(!o)throw new Error("Invalid challenge salt digest: "+a);var u=z(n,r.password,o);if(!u)throw new Error("Invalid challenge digest: "+n);var l={challenge_response:u,challenge_client_salt:s},h=Object.assign({},i,l);c("hello",h)}catch(t){console.error(t),A()}}),o.on("window-metadata",function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=S(t);r&&(r.updateMetadata(e),o.emit("window:metadata",r))}),o.on("new-window",function(t,e,r,n,a,s,u){_=0;var l=Object.assign({},u||{},{"encodings.rgb_formats":i["encodings.rgb_formats"]});c("map-window",t,e,r,n,a,l),c("focus",[],t);var h=Rt(!1,t,e,r,n,a,s,u,c);m.push(h),o.emit("window:create",h),w(t)}),o.on("new-override-redirect",function(t,e,r,i,n,a,s){var u=a["transient-for"],l=!!u&&S(u);if(l){var h=Rt(l,t,e,r,i,n,a,s,c);o.emit("overlay:create",{parent:l,wid:t,x:e,y:r,canvas:h.canvas}),m.push(h),_=u,w(t)}}),o.on("lost-window",function(t){var e=S(t);if(e){e.overlay?o.emit("overlay:destroy",e):(v===t&&o.emit("window:blur",{wid:t}),o.emit("window:destroy",e)),e.destroy();var r=m.findIndex(function(e){return e.wid===t});m.splice(r,1)}v===t&&(v=_)}),o.on("window-icon",function(t,e,r,i,n){var a=function(t){var e=t.coding,r=t.data;return"png"===e?"data:image/".concat(e,";base64,")+O(r):"about:blank"}({coding:i,data:n});a&&o.emit("window:icon",{wid:t,src:a})}),o.on("startup-complete",function(){o.emit("system:started"),g=!0,y=!1,B.info("Xpra HTML5 Client connected"),E(),r.sound&&d.start(r.audio_framework,s,i,a)}),o.on("sound-data",function(t,e,r,i){d.process(t,e,r,i)}),o.on("notify_show",function(t,e,r,i,n,a,s,u,c){o.emit("notification:create",e,{busId:t,replacesId:r,summary:i,body:n,timeout:a,icon:s,actions:u,hints:c})}),o.on("notify_show",function(t){o.emit("notification:destroy",t)}),o.on("send-file",function(t,e,r,i,n){n.length===i?r?o.emit("system:print",{filename:t,mime:e,size:i},n):o.emit("system:upload",{filename:t,mime:e,size:i},n):console.warn("Invalid file",t,e,i)}),o.on("open-url",function(){return o.emit("system:url")}),o.on("bell",function(){return o.emit("system:bell")}),o.on("eos",T),o.on("draw",T),setInterval(function(){g&&h()},5e3),Object.freeze({console:B,connect:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r=Bt(t,e),u&&A(),y=!0,E(),u.open(r)},disconnect:A,ping:h,send:c,inject:function(t,e){if(g){void 0===e&&(e=v);var r=S(e);f.process(t,r),p.process(t,r)}},status:function(){return C()},on:function(){return o.on.apply(o,arguments)},off:function(t,e){e&&o.off(t,e)},screen:{resize:I},surface:{focus:w,kill:function(t){S(t)&&c("close-window",t)}}})};r.d(e,"createClient",function(){return Nt})}])});
//# sourceMappingURL=main.js.map